(function(window,undefined){function isArraylike(a){var b=a.length,c=jQuery.type(a);return jQuery.isWindow(a)?!1:a.nodeType===1&&b?!0:c==="array"||c!=="function"&&(b===0||typeof b=="number"&&b>0&&b-1 in a)}function createOptions(a){var b=optionsCache[a]={};return jQuery.each(a.match(core_rnotwhite)||[],function(a,c){b[c]=!0}),b}function Data(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=jQuery.expando+Math.random()}function dataAttr(a,b,c){var d;if(c===undefined&&a.nodeType===1){d="data-"+b.replace(rmultiDash,"-$1").toLowerCase(),c=a.getAttribute(d);if(typeof c=="string"){try{c=c==="true"?!0:c==="false"?!1:c==="null"?null:+c+""===c?+c:rbrace.test(c)?JSON.parse(c):c}catch(e){}data_user.set(a,b,c)}else c=undefined}return c}function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(a){}}function sibling(a,b){while((a=a[b])&&a.nodeType!==1);return a}function winnow(a,b,c){if(jQuery.isFunction(b))return jQuery.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return jQuery.grep(a,function(a){return a===b!==c});if(typeof b=="string"){if(isSimple.test(b))return jQuery.filter(b,a,c);b=jQuery.filter(b,a)}return jQuery.grep(a,function(a){return core_indexOf.call(b,a)>=0!==c})}function manipulationTarget(a,b){return jQuery.nodeName(a,"table")&&jQuery.nodeName(b.nodeType===1?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function disableScript(a){return a.type=(a.getAttribute("type")!==null)+"/"+a.type,a}function restoreScript(a){var b=rscriptTypeMasked.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function setGlobalEval(a,b){var c=a.length,d=0;for(;d<c;d++)data_priv.set(a[d],"globalEval",!b||data_priv.get(b[d],"globalEval"))}function cloneCopyEvent(a,b){var c,d,e,f,g,h,i,j;if(b.nodeType!==1)return;if(data_priv.hasData(a)){f=data_priv.access(a),g=jQuery.extend({},f),j=f.events,data_priv.set(b,g);if(j){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)jQuery.event.add(b,e,j[e][c])}}data_user.hasData(a)&&(h=data_user.access(a),i=jQuery.extend({},h),data_user.set(b,i))}function getAll(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return b===undefined||b&&jQuery.nodeName(a,b)?jQuery.merge([a],c):c}function fixInput(a,b){var c=b.nodeName.toLowerCase();if(c==="input"&&manipulation_rcheckableType.test(a.type))b.checked=a.checked;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}function vendorPropName(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=cssPrefixes.length;while(e--){b=cssPrefixes[e]+c;if(b in a)return b}return d}function isHidden(a,b){return a=b||a,jQuery.css(a,"display")==="none"||!jQuery.contains(a.ownerDocument,a)}function getStyles(a){return window.getComputedStyle(a,null)}function showHide(a,b){var c,d,e,f=[],g=0,h=a.length;for(;g<h;g++){d=a[g];if(!d.style)continue;f[g]=data_priv.get(d,"olddisplay"),c=d.style.display,b?(!f[g]&&c==="none"&&(d.style.display=""),d.style.display===""&&isHidden(d)&&(f[g]=data_priv.access(d,"olddisplay",css_defaultDisplay(d.nodeName)))):f[g]||(e=isHidden(d),(c&&c!=="none"||!e)&&data_priv.set(d,"olddisplay",e?c:jQuery.css(d,"display")))}for(g=0;g<h;g++){d=a[g];if(!d.style)continue;if(!b||d.style.display==="none"||d.style.display==="")d.style.display=b?f[g]||"":"none"}return a}function setPositiveNumber(a,b,c){var d=rnumsplit.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function augmentWidthOrHeight(a,b,c,d,e){var f=c===(d?"border":"content")?4:b==="width"?1:0,g=0;for(;f<4;f+=2)c==="margin"&&(g+=jQuery.css(a,c+cssExpand[f],!0,e)),d?(c==="content"&&(g-=jQuery.css(a,"padding"+cssExpand[f],!0,e)),c!=="margin"&&(g-=jQuery.css(a,"border"+cssExpand[f]+"Width",!0,e))):(g+=jQuery.css(a,"padding"+cssExpand[f],!0,e),c!=="padding"&&(g+=jQuery.css(a,"border"+cssExpand[f]+"Width",!0,e)));return g}function getWidthOrHeight(a,b,c){var d=!0,e=b==="width"?a.offsetWidth:a.offsetHeight,f=getStyles(a),g=jQuery.support.boxSizing&&jQuery.css(a,"boxSizing",!1,f)==="border-box";if(e<=0||e==null){e=curCSS(a,b,f);if(e<0||e==null)e=a.style[b];if(rnumnonpx.test(e))return e;d=g&&(jQuery.support.boxSizingReliable||e===a.style[b]),e=parseFloat(e)||0}return e+augmentWidthOrHeight(a,b,c||(g?"border":"content"),d,f)+"px"}function css_defaultDisplay(a){var b=document,c=elemdisplay[a];if(!c){c=actualDisplay(a,b);if(c==="none"||!c)iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(iframe[0].contentWindow||iframe[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=actualDisplay(a,b),iframe.detach();elemdisplay[a]=c}return c}function actualDisplay(a,b){var c=jQuery(b.createElement(a)).appendTo(b.body),d=jQuery.css(c[0],"display");return c.remove(),d}function buildParams(a,b,c,d){var e;if(jQuery.isArray(b))jQuery.each(b,function(b,e){c||rbracket.test(a)?d(a,e):buildParams(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)});else if(!c&&jQuery.type(b)==="object")for(e in b)buildParams(a+"["+e+"]",b[e],c,d);else d(a,b)}function addToPrefiltersOrTransports(a){return function(b,c){typeof b!="string"&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(core_rnotwhite)||[];if(jQuery.isFunction(c))while(d=f[e++])d[0]==="+"?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function inspectPrefiltersOrTransports(a,b,c,d){function g(h){var i;return e[h]=!0,jQuery.each(a[h]||[],function(a,h){var j=h(b,c,d);if(typeof j=="string"&&!f&&!e[j])return b.dataTypes.unshift(j),g(j),!1;if(f)return!(i=j)}),i}var e={},f=a===transports;return g(b.dataTypes[0])||!e["*"]&&g("*")}function ajaxExtend(a,b){var c,d,e=jQuery.ajaxSettings.flatOptions||{};for(c in b)b[c]!==undefined&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&jQuery.extend(!0,a,d),a}function ajaxHandleResponses(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while(i[0]==="*")i.shift(),d===undefined&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function ajaxConvert(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f){a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift();if(f)if(f==="*")f=i;else if(i!=="*"&&i!==f){g=j[i+" "+f]||j["* "+f];if(!g)for(e in j){h=e.split(" ");if(h[1]===f){g=j[i+" "+h[0]]||j["* "+h[0]];if(g){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}}}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}}return{state:"success",data:b}}function createFxNow(){return setTimeout(function(){fxNow=undefined}),fxNow=jQuery.now()}function createTweens(a,b){jQuery.each(b,function(b,c){var d=(tweeners[b]||[]).concat(tweeners["*"]),e=0,f=d.length;for(;e<f;e++)if(d[e].call(a,b,c))return})}function Animation(a,b,c){var d,e,f=0,g=animationPrefilters.length,h=jQuery.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;var b=fxNow||createFxNow(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;for(;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:jQuery.extend({},b),opts:jQuery.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:fxNow||createFxNow(),duration:c.duration,tweens:[],createTween:function(b,c){var d=jQuery.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;e=!0;for(;c<d;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;propFilter(k,j.opts.specialEasing);for(;f<g;f++){d=animationPrefilters[f].call(j,a,k,j.opts);if(d)return d}return createTweens(j,k),jQuery.isFunction(j.opts.start)&&j.opts.start.call(a,j),jQuery.fx.timer(jQuery.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function propFilter(a,b){var c,d,e,f,g;for(c in a){d=jQuery.camelCase(c),e=b[d],f=a[c],jQuery.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=jQuery.cssHooks[d];if(g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}}function defaultPrefilter(a,b,c){var d,e,f,g,h,i,j,k,l,m=this,n=a.style,o={},p=[],q=a.nodeType&&isHidden(a);c.queue||(k=jQuery._queueHooks(a,"fx"),k.unqueued==null&&(k.unqueued=0,l=k.empty.fire,k.empty.fire=function(){k.unqueued||l()}),k.unqueued++,m.always(function(){m.always(function(){k.unqueued--,jQuery.queue(a,"fx").length||k.empty.fire()})})),a.nodeType===1&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],jQuery.css(a,"display")==="inline"&&jQuery.css(a,"float")==="none"&&(n.display="inline-block")),c.overflow&&(n.overflow="hidden",m.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]})),h=data_priv.get(a,"fxshow");for(d in b){f=b[d];if(rfxtypes.exec(f)){delete b[d],i=i||f==="toggle";if(f===(q?"hide":"show"))if(f==="show"&&h!==undefined&&h[d]!==undefined)q=!0;else continue;p.push(d)}}g=p.length;if(g){h=data_priv.get(a,"fxshow")||data_priv.access(a,"fxshow",{}),"hidden"in h&&(q=h.hidden),i&&(h.hidden=!q),q?jQuery(a).show():m.done(function(){jQuery(a).hide()}),m.done(function(){var b;data_priv.remove(a,"fxshow");for(b in o)jQuery.style(a,b,o[b])});for(d=0;d<g;d++)e=p[d],j=m.createTween(e,q?h[e]:0),o[e]=h[e]||jQuery.style(a,e),e in h||(h[e]=j.start,q&&(j.end=j.start,j.start=e==="width"||e==="height"?1:0))}}function Tween(a,b,c,d,e){return new Tween.prototype.init(a,b,c,d,e)}function genFx(a,b){var c,d={height:a},e=0;b=b?1:0;for(;e<4;e+=2-b)c=cssExpand[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function getWindow(a){return jQuery.isWindow(a)?a:a.nodeType===9&&a.defaultView}var rootjQuery,readyList,core_strundefined=typeof undefined,location=window.location,document=window.document,docElem=document.documentElement,_jQuery=window.jQuery,_$=window.$,class2type={},core_deletedIds=[],core_version="2.0.0",core_concat=core_deletedIds.concat,core_push=core_deletedIds.push,core_slice=core_deletedIds.slice,core_indexOf=core_deletedIds.indexOf,core_toString=class2type.toString,core_hasOwn=class2type.hasOwnProperty,core_trim=core_version.trim,jQuery=function(a,b){return new jQuery.fn.init(a,b,rootjQuery)},core_pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,core_rnotwhite=/\S+/g,rquickExpr=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(a,b){return b.toUpperCase()},completed=function(){document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1),jQuery.ready()};jQuery.fn=jQuery.prototype={jquery:core_version,constructor:jQuery,init:function(a,b,c){var d,e;if(!a)return this;if(typeof a=="string"){a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3?d=[null,a,null]:d=rquickExpr.exec(a);if(d&&(d[1]||!b)){if(d[1]){b=b instanceof jQuery?b[0]:b,jQuery.merge(this,jQuery.parseHTML(d[1],b&&b.nodeType?b.ownerDocument||b:document,!0));if(rsingleTag.test(d[1])&&jQuery.isPlainObject(b))for(d in b)jQuery.isFunction(this[d])?this[d](b[d]):this.attr(d,b[d]);return this}return e=document.getElementById(d[2]),e&&e.parentNode&&(this.length=1,this[0]=e),this.context=document,this.selector=a,this}return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a)}return a.nodeType?(this.context=this[0]=a,this.length=1,this):jQuery.isFunction(a)?c.ready(a):(a.selector!==undefined&&(this.selector=a.selector,this.context=a.context),jQuery.makeArray(a,this))},selector:"",length:0,toArray:function(){return core_slice.call(this)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a){var b=jQuery.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return jQuery.each(this,a,b)},ready:function(a){return jQuery.ready.promise().done(a),this},slice:function(){return this.pushStack(core_slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},map:function(a){return this.pushStack(jQuery.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:core_push,sort:[].sort,splice:[].splice},jQuery.fn.init.prototype=jQuery.fn,jQuery.extend=jQuery.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;typeof g=="boolean"&&(j=g,g=arguments[1]||{},h=2),typeof g!="object"&&!jQuery.isFunction(g)&&(g={}),i===h&&(g=this,--h);for(;h<i;h++)if((a=arguments[h])!=null)for(b in a){c=g[b],d=a[b];if(g===d)continue;j&&d&&(jQuery.isPlainObject(d)||(e=jQuery.isArray(d)))?(e?(e=!1,f=c&&jQuery.isArray(c)?c:[]):f=c&&jQuery.isPlainObject(c)?c:{},g[b]=jQuery.extend(j,f,d)):d!==undefined&&(g[b]=d)}return g},jQuery.extend({expando:"jQuery"+(core_version+Math.random()).replace(/\D/g,""),noConflict:function(a){return window.$===jQuery&&(window.$=_$),a&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},isReady:!1,readyWait:1,holdReady:function(a){a?jQuery.readyWait++:jQuery.ready(!0)},ready:function(a){if(a===!0?--jQuery.readyWait:jQuery.isReady)return;jQuery.isReady=!0;if(a!==!0&&--jQuery.readyWait>0)return;readyList.resolveWith(document,[jQuery]),jQuery.fn.trigger&&jQuery(document).trigger("ready").off("ready")},isFunction:function(a){return jQuery.type(a)==="function"},isArray:Array.isArray,isWindow:function(a){return a!=null&&a===a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):typeof a=="object"||typeof a=="function"?class2type[core_toString.call(a)]||"object":typeof a},isPlainObject:function(a){if(jQuery.type(a)!=="object"||a.nodeType||jQuery.isWindow(a))return!1;try{if(a.constructor&&!core_hasOwn.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){if(!a||typeof a!="string")return null;typeof b=="boolean"&&(c=b,b=!1),b=b||document;var d=rsingleTag.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=jQuery.buildFragment([a],b,e),e&&jQuery(e).remove(),jQuery.merge([],d.childNodes))},parseJSON:JSON.parse,parseXML:function(a){var b,c;if(!a||typeof a!="string")return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=undefined}return(!b||b.getElementsByTagName("parsererror").length)&&jQuery.error("Invalid XML: "+a),b},noop:function(){},globalEval:function(code){var script,indirect=eval;code=jQuery.trim(code),code&&(code.indexOf("use strict")===1?(script=document.createElement("script"),script.text=code,document.head.appendChild(script).parentNode.removeChild(script)):indirect(code))},camelCase:function(a){return a.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=isArraylike(a);if(c)if(g)for(;e<f;e++){d=b.apply(a[e],c);if(d===!1)break}else for(e in a){d=b.apply(a[e],c);if(d===!1)break}else if(g)for(;e<f;e++){d=b.call(a[e],e,a[e]);if(d===!1)break}else for(e in a){d=b.call(a[e],e,a[e]);if(d===!1)break}return a},trim:function(a){return a==null?"":core_trim.call(a)},makeArray:function(a,b){var c=b||[];return a!=null&&(isArraylike(Object(a))?jQuery.merge(c,typeof a=="string"?[a]:a):core_push.call(c,a)),c},inArray:function(a,b,c){return b==null?-1:core_indexOf.call(b,a,c)},merge:function(a,b){var c=b.length,d=a.length,e=0;if(typeof c=="number")for(;e<c;e++)a[d++]=b[e];else while(b[e]!==undefined)a[d++]=b[e++];return a.length=d,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;c=!!c;for(;f<g;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,b,c){var d,e=0,f=a.length,g=isArraylike(a),h=[];if(g)for(;e<f;e++)d=b(a[e],e,c),d!=null&&(h[h.length]=d);else for(e in a)d=b(a[e],e,c),d!=null&&(h[h.length]=d);return core_concat.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;return typeof b=="string"&&(c=a[b],b=a,a=c),jQuery.isFunction(a)?(d=core_slice.call(arguments,2),e=function(){return a.apply(b||this,d.concat(core_slice.call(arguments)))},e.guid=a.guid=a.guid||jQuery.guid++,e):undefined},access:function(a,b,c,d,e,f,g){var h=0,i=a.length,j=c==null;if(jQuery.type(c)==="object"){e=!0;for(h in c)jQuery.access(a,b,h,c[h],!0,f,g)}else if(d!==undefined){e=!0,jQuery.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(jQuery(a),c)}));if(b)for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)))}return e?a:j?b.call(a):i?b(a[0],c):f},now:Date.now,swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e}}),jQuery.ready.promise=function(a){return readyList||(readyList=jQuery.Deferred(),document.readyState==="complete"?setTimeout(jQuery.ready):(document.addEventListener("DOMContentLoaded",completed,!1),window.addEventListener("load",completed,!1))),readyList.promise(a)},jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){class2type["[object "+b+"]"]=b.toLowerCase()}),rootjQuery=jQuery(document),function(a,b){function be(a){return Y.test(a+"")}function bf(){var a,b=[];return a=function(c,d){return b.push(c+=" ")>e.cacheLength&&delete a[b.shift()],a[c]=d}}function bg(a){return a[s]=!0,a}function bh(a){var b=l.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function bi(a,b,c,d){var e,f,g,h,i,j,m,p,q,v;(b?b.ownerDocument||b:t)!==l&&k(b),b=b||l,c=c||[];if(!a||typeof a!="string")return c;if((h=b.nodeType)!==1&&h!==9)return[];if(n&&!d){if(e=Z.exec(a))if(g=e[1]){if(h===9){f=b.getElementById(g);if(!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&r(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return H.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&u.getElementsByClassName&&b.getElementsByClassName)return H.apply(c,b.getElementsByClassName(g)),c}if(u.qsa&&(!o||!o.test(a))){p=m=s,q=b,v=h===9&&a;if(h===1&&b.nodeName.toLowerCase()!=="object"){j=bp(a),(m=b.getAttribute("id"))?p=m.replace(ba,"\\$&"):b.setAttribute("id",p),p="[id='"+p+"'] ",i=j.length;while(i--)j[i]=p+bq(j[i]);q=T.test(a)&&b.parentNode||b,v=j.join(",")}if(v)try{return H.apply(c,q.querySelectorAll(v)),c}catch(w){}finally{m||b.removeAttribute("id")}}}return by(a.replace(Q,"$1"),b,c,d)}function bj(a,b){var c=b&&a,d=c&&(~b.sourceIndex||D)-(~a.sourceIndex||D);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function bk(a,c,d){var e;return d?b:(e=a.getAttributeNode(c))&&e.specified?e.value:a[c]===!0?c.toLowerCase():null}function bl(a,c,d){var e;return d?b:e=a.getAttribute(c,c.toLowerCase()==="type"?1:2)}function bm(a){return function(b){var c=b.nodeName.toLowerCase();return c==="input"&&b.type===a}}function bn(a){return function(b){var c=b.nodeName.toLowerCase();return(c==="input"||c==="button")&&b.type===a}}function bo(a){return bg(function(b){return b=+b,bg(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function bp(a,b){var c,d,f,g,h,i,j,k=y[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=e.preFilter;while(h){if(!c||(d=R.exec(h)))d&&(h=h.slice(d[0].length)||h),i.push(f=[]);c=!1;if(d=S.exec(h))c=d.shift(),f.push({value:c,type:d[0].replace(Q," ")}),h=h.slice(c.length);for(g in e.filter)(d=X[g].exec(h))&&(!j[g]||(d=j[g](d)))&&(c=d.shift(),f.push({value:c,type:g,matches:d}),h=h.slice(c.length));if(!c)break}return b?h.length:h?bi.error(a):y(a,i).slice(0)}function bq(a){var b=0,c=a.length,d="";for(;b<c;b++)d+=a[b].value;return d}function br(a,b,c){var e=b.dir,f=c&&e==="parentNode",g=w++;return b.first?function(b,c,d){while(b=b[e])if(b.nodeType===1||f)return a(b,c,d)}:function(b,c,h){var i,j,k,l=v+" "+g;if(h){while(b=b[e])if(b.nodeType===1||f)if(a(b,c,h))return!0}else while(b=b[e])if(b.nodeType===1||f){k=b[s]||(b[s]={});if((j=k[e])&&j[0]===l){if((i=j[1])===!0||i===d)return i===!0}else{j=k[e]=[l],j[1]=a(b,c,h)||d;if(j[1]===!0)return!0}}}}function bs(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function bt(a,b,c,d,e){var f,g=[],h=0,i=a.length,j=b!=null;for(;h<i;h++)if(f=a[h])if(!c||c(f,d,e))g.push(f),j&&b.push(h);return g}function bu(a,b,c,d,e,f){return d&&!d[s]&&(d=bu(d)),e&&!e[s]&&(e=bu(e,f)),bg(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||bx(b||"*",h.nodeType?[h]:h,[]),q=a&&(f||!b)?bt(p,m,a,h,i):p,r=c?e||(f?a:o||d)?[]:g:q;c&&c(q,r,h,i);if(d){j=bt(r,n),d(j,[],h,i),k=j.length;while(k--)if(l=j[k])r[n[k]]=!(q[n[k]]=l)}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=bt(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function bv(a){var b,c,d,f=a.length,g=e.relative[a[0].type],h=g||e.relative[" "],j=g?1:0,k=br(function(a){return a===b},h,!0),l=br(function(a){return J.call(b,a)>-1},h,!0),m=[function(a,c,d){return!g&&(d||c!==i)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];for(;j<f;j++)if(c=e.relative[a[j].type])m=[br(bs(m),c)];else{c=e.filter[a[j].type].apply(null,a[j].matches);if(c[s]){d=++j;for(;d<f;d++)if(e.relative[a[d].type])break;return bu(j>1&&bs(m),j>1&&bq(a.slice(0,j-1)).replace(Q,"$1"),c,j<d&&bv(a.slice(j,d)),d<f&&bv(a=a.slice(d)),d<f&&bq(a))}m.push(c)}return bs(m)}function bw(a,b){var c=0,f=b.length>0,g=a.length>0,h=function(h,j,k,m,n){var o,p,q,r=[],s=0,t="0",u=h&&[],w=n!=null,x=i,y=h||g&&e.find.TAG("*",n&&j.parentNode||j),z=v+=x==null?1:Math.random()||.1;w&&(i=j!==l&&j,d=c);for(;(o=y[t])!=null;t++){if(g&&o){p=0;while(q=a[p++])if(q(o,j,k)){m.push(o);break}w&&(v=z,d=++c)}f&&((o=!q&&o)&&s--,h&&u.push(o))}s+=t;if(f&&t!==s){p=0;while(q=b[p++])q(u,r,j,k);if(h){if(s>0)while(t--)!u[t]&&!r[t]&&(r[t]=F.call(m));r=bt(r)}H.apply(m,r),w&&!h&&r.length>0&&s+b.length>1&&bi.uniqueSort(m)}return w&&(v=z,i=x),u};return f?bg(h):h}function bx(a,b,c){var d=0,e=b.length;for(;d<e;d++)bi(a,b[d],c);return c}function by(a,b,c,d){var f,g,i,j,k,l=bp(a);if(!d&&l.length===1){g=l[0]=l[0].slice(0);if(g.length>2&&(i=g[0]).type==="ID"&&b.nodeType===9&&n&&e.relative[g[1].type]){b=(e.find.ID(i.matches[0].replace(bb,bc),b)||[])[0];if(!b)return c;a=a.slice(g.shift().value.length)}f=X.needsContext.test(a)?0:g.length;while(f--){i=g[f];if(e.relative[j=i.type])break;if(k=e.find[j])if(d=k(i.matches[0].replace(bb,bc),T.test(g[0].type)&&b.parentNode||b)){g.splice(f,1),a=d.length&&bq(g);if(!a)return H.apply(c,d),c;break}}}return h(a,l)(d,b,!n,c,T.test(a)),c}function bz(){}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s="sizzle"+ -(new Date),t=a.document,u={},v=0,w=0,x=bf(),y=bf(),z=bf(),A=!1,B=function(){return 0},C=typeof b,D=1<<31,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=E.indexOf||function(a){var b=0,c=this.length;for(;b<c;b++)if(this[b]===a)return b;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")"+L+"*(?:([*^$|!~]?=)"+L+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+N+")|)|)"+L+"*\\]",P=":("+M+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+O.replace(3,8)+")*)|.*)\\)|)",Q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),R=new RegExp("^"+L+"*,"+L+"*"),S=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),T=new RegExp(L+"*[+~]"),U=new RegExp("="+L+"*([^\\]'\"]*)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),"boolean":new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/^(?:input|select|textarea|button)$/i,_=/^h\d$/i,ba=/'|\\/g,bb=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,bc=function(a,b){var c="0x"+b-65536;return c!==c?b:c<0?String.fromCharCode(c+65536):String.fromCharCode(c>>10|55296,c&1023|56320)};try{H.apply(E=I.call(t.childNodes),t.childNodes),E[t.childNodes.length].nodeType}catch(bd){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}g=bi.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?b.nodeName!=="HTML":!1},k=bi.setDocument=function(a){var c=a?a.ownerDocument||a:t;if(c===l||c.nodeType!==9||!c.documentElement)return l;l=c,m=c.documentElement,n=!g(c),u.getElementsByTagName=bh(function(a){return a.appendChild(c.createComment("")),!a.getElementsByTagName("*").length}),u.attributes=bh(function(a){return a.className="i",!a.getAttribute("className")}),u.getElementsByClassName=bh(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",a.getElementsByClassName("i").length===2}),u.sortDetached=bh(function(a){return a.compareDocumentPosition(l.createElement("div"))&1}),u.getById=bh(function(a){return m.appendChild(a).id=s,!c.getElementsByName||!c.getElementsByName(s).length}),u.getById?(e.find.ID=function(a,b){if(typeof b.getElementById!==C&&n){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},e.filter.ID=function(a){var b=a.replace(bb,bc);return function(a){return a.getAttribute("id")===b}}):(e.find.ID=function(a,c){if(typeof c.getElementById!==C&&n){var d=c.getElementById(a);return d?d.id===a||typeof d.getAttributeNode!==C&&d.getAttributeNode("id").value===a?[d]:b:[]}},e.filter.ID=function(a){var b=a.replace(bb,bc);return function(a){var c=typeof a.getAttributeNode!==C&&a.getAttributeNode("id");return c&&c.value===b}}),e.find.TAG=u.getElementsByTagName?function(a,b){if(typeof b.getElementsByTagName!==C)return b.getElementsByTagName(a)}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if(a==="*"){while(c=f[e++])c.nodeType===1&&d.push(c);return d}return f},e.find.CLASS=u.getElementsByClassName&&function(a,b){if(typeof b.getElementsByClassName!==C&&n)return b.getElementsByClassName(a)},p=[],o=[];if(u.qsa=be(c.querySelectorAll))bh(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||o.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll(":checked").length||o.push(":checked")}),bh(function(a){var b=l.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("t",""),a.querySelectorAll("[t^='']").length&&o.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll(":enabled").length||o.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),o.push(",.*:")});return(u.matchesSelector=be(q=m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.msMatchesSelector))&&bh(function(a){u.disconnectedMatch=q.call(a,"div"),q.call(a,"[s!='']:x"),p.push("!=",P)}),o=o.length&&new RegExp(o.join("|")),p=p.length&&new RegExp(p.join("|")),r=be(m.contains)||m.compareDocumentPosition?function(a,b){var c=a.nodeType===9?a.documentElement:a,d=b&&b.parentNode;return a===d||!!d&&d.nodeType===1&&!!(c.contains?c.contains(d):a.compareDocumentPosition&&a.compareDocumentPosition(d)&16)}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=m.compareDocumentPosition?function(a,b){if(a===b)return A=!0,0;var d=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b);if(d)return d&1||!u.sortDetached&&b.compareDocumentPosition(a)===d?a===c||r(t,a)?-1:b===c||r(t,b)?1:j?J.call(j,a)-J.call(j,b):0:d&4?-1:1;return a.compareDocumentPosition?-1:1}:function(a,b){var d,e=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(a===b)return A=!0,0;if(!f||!g)return a===c?-1:b===c?1:f?-1:g?1:j?J.call(j,a)-J.call(j,b):0;if(f===g)return bj(a,b);d=a;while(d=d.parentNode)h.unshift(d);d=b;while(d=d.parentNode)i.unshift(d);while(h[e]===i[e])e++;return e?bj(h[e],i[e]):h[e]===t?-1:i[e]===t?1:0},l},bi.matches=function(a,b){return bi(a,null,null,b)},bi.matchesSelector=function(a,b){(a.ownerDocument||a)!==l&&k(a),b=b.replace(U,"='$1']");if(u.matchesSelector&&n&&(!p||!p.test(b))&&(!o||!o.test(b)))try{var c=q.call(a,b);if(c||u.disconnectedMatch||a.document&&a.document.nodeType!==11)return c}catch(d){}return bi(b,l,null,[a]).length>0},bi.contains=function(a,b){return(a.ownerDocument||a)!==l&&k(a),r(a,b)},bi.attr=function(a,c){(a.ownerDocument||a)!==l&&k(a);var d=e.attrHandle[c.toLowerCase()],f=d&&d(a,c,!n);return f===b?u.attributes||!n?a.getAttribute(c):(f=a.getAttributeNode(c))&&f.specified?f.value:null:f},bi.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},bi.uniqueSort=function(a){var b,c=[],d=0,e=0;A=!u.detectDuplicates,j=!u.sortStable&&a.slice(0),a.sort(B);if(A){while(b=a[e++])b===a[e]&&(d=c.push(e));while(d--)a.splice(c[d],1)}return a},f=bi.getText=function(a){var b,c="",d=0,e=a.nodeType;if(!e)for(;b=a[d];d++)c+=f(b);else if(e===1||e===9||e===11){if(typeof a.textContent=="string")return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=f(a)}else if(e===3||e===4)return a.nodeValue;return c},e=bi.selectors={cacheLength:50,createPseudo:bg,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(bb,bc),a[3]=(a[4]||a[5]||"").replace(bb,bc),a[2]==="~="&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),a[1].slice(0,3)==="nth"?(a[3]||bi.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*(a[3]==="even"||a[3]==="odd")),a[5]=+(a[7]+a[8]||a[3]==="odd")):a[3]&&bi.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return X.CHILD.test(a[0])?null:(a[4]?a[2]=a[4]:c&&V.test(c)&&(b=bp(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(bb,bc).toLowerCase();return a==="*"?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=x[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&x(a,function(a){return b.test(typeof a.className=="string"&&a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=bi.attr(d,a);return e==null?b==="!=":b?(e+="",b==="="?e===c:b==="!="?e!==c:b==="^="?c&&e.indexOf(c)===0:b==="*="?c&&e.indexOf(c)>-1:b==="$="?c&&e.slice(-c.length)===c:b==="~="?(" "+e+" ").indexOf(c)>-1:b==="|="?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f=a.slice(0,3)!=="nth",g=a.slice(-4)!=="last",h=b==="of-type";return d===1&&e===0?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),t=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:l.nodeType===1)return!1;o=p=a==="only"&&!o&&"nextSibling"}return!0}o=[g?q.firstChild:q.lastChild];if(g&&t){k=q[s]||(q[s]={}),j=k[a]||[],n=j[0]===v&&j[1],m=j[0]===v&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(l.nodeType===1&&++m&&l===b){k[a]=[v,n,m];break}}else if(t&&(j=(b[s]||(b[s]={}))[a])&&j[0]===v)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:l.nodeType===1)&&++m){t&&((l[s]||(l[s]={}))[a]=[v,m]);if(l===b)break}return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,d=e.pseudos[a]||e.setFilters[a.toLowerCase()]||bi.error("unsupported pseudo: "+a);return d[s]?d(b):d.length>1?(c=[a,a,"",b],e.setFilters.hasOwnProperty(a.toLowerCase())?bg(function(a,c){var e,f=d(a,b),g=f.length;while(g--)e=J.call(a,f[g]),a[e]=!(c[e]=f[g])}):function(a){return d(a,0,c)}):d}},pseudos:{not:bg(function(a){var b=[],c=[],d=h(a.replace(Q,"$1"));return d[s]?bg(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)if(f=g[h])a[h]=!(b[h]=f)}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:bg(function(a){return function(b){return bi(a,b).length>0}}),contains:bg(function(a){return function(b){return(b.textContent||b.innerText||f(b)).indexOf(a)>-1}}),lang:bg(function(a){return W.test(a||"")||bi.error("unsupported lang: "+a),a=a.replace(bb,bc).toLowerCase(),function(b){var c;do if(c=n?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||c.indexOf(a+"-")===0;while((b=b.parentNode)&&b.nodeType===1);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===m},focus:function(a){return a===l.activeElement&&(!l.hasFocus||l.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&!!a.checked||b==="option"&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeName>"@"||a.nodeType===3||a.nodeType===4)return!1;return!0},parent:function(a){return!e.pseudos.empty(a)},header:function(a){return _.test(a.nodeName)},input:function(a){return $.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&a.type==="button"||b==="button"},text:function(a){var b;return a.nodeName.toLowerCase()==="input"&&a.type==="text"&&((b=a.getAttribute("type"))==null||b.toLowerCase()===a.type)},first:bo(function(){return[0]}),last:bo(function(a,b){return[b-1]}),eq:bo(function(a,b,c){return[c<0?c+b:c]}),even:bo(function(a,b){var c=0;for(;c<b;c+=2)a.push(c);return a}),odd:bo(function(a,b){var c=1;for(;c<b;c+=2)a.push(c);return a}),lt:bo(function(a,b,c){var d=c<0?c+b:c;for(;--d>=0;)a.push(d);return a}),gt:bo(function(a,b,c){var d=c<0?c+b:c;for(;++d<b;)a.push(d);return a})}};for(c in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})e.pseudos[c]=bm(c);for(c in{submit:!0,reset:!0})e.pseudos[c]=bn(c);h=bi.compile=function(a,b){var c,d=[],e=[],f=z[a+" "];if(!f){b||(b=bp(a)),c=b.length;while(c--)f=bv(b[c]),f[s]?d.push(f):e.push(f);f=z(a,bw(e,d))}return f},e.pseudos.nth=e.pseudos.eq,bz.prototype=e.filters=e.pseudos,e.setFilters=new bz,u.sortStable=s.split("").sort(B).join("")===s,k(),[0,0].sort(B),u.detectDuplicates=A,bh(function(a){a.innerHTML="<a href='#'></a>";if(a.firstChild.getAttribute("href")!=="#"){var b="type|href|height|width".split("|"),c=b.length;while(c--)e.attrHandle[b[c]]=bl}}),bh(function(a){if(a.getAttribute("disabled")!=null){var b=K.split("|"),c=b.length;while(c--)e.attrHandle[b[c]]=bk}}),jQuery.find=bi,jQuery.expr=bi.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=bi.uniqueSort,jQuery.text=bi.getText,jQuery.isXMLDoc=bi.isXML,jQuery.contains=bi.contains}(window);var optionsCache={};jQuery.Callbacks=function(a){a=typeof a=="string"?optionsCache[a]||createOptions(a):jQuery.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;for(;h&&g<f;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;(function g(b){jQuery.each(b,function(b,c){var d=jQuery.type(c);d==="function"?(!a.unique||!k.has(c))&&h.push(c):c&&c.length&&d!=="string"&&g(c)})})(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&jQuery.each(arguments,function(a,b){var c;while((c=jQuery.inArray(b,h,c))>-1)h.splice(c,1),d&&(c<=f&&f--,c<=g&&g--)}),this},has:function(a){return a?jQuery.inArray(a,h)>-1:!!h&&!!h.length},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=undefined,this},disabled:function(){return!h},lock:function(){return i=undefined,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],h&&(!c||i)&&(d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},jQuery.extend({Deferred:function(a){var b=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return jQuery.Deferred(function(c){jQuery.each(b,function(b,f){var g=f[0],h=jQuery.isFunction(a[b])&&a[b];e[f[1]](function(){var a=h&&h.apply(this,arguments);a&&jQuery.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g+"With"](this===d?c.promise():this,h?[a]:arguments)})}),a=null}).promise()},promise:function(a){return a!=null?jQuery.extend(a,d):d}},e={};return d.pipe=d.then,jQuery.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[a^1][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=core_slice.call(arguments),d=c.length,e=d!==1||a&&jQuery.isFunction(a.promise)?d:0,f=e===1?a:jQuery.Deferred(),g=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?core_slice.call(arguments):d,c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},h,i,j;if(d>1){h=new Array(d),i=new Array(d),j=new Array(d);for(;b<d;b++)c[b]&&jQuery.isFunction(c[b].promise)?c[b].promise().done(g(b,j,c)).fail(f.reject).progress(g(b,i,h)):--e}return e||f.resolveWith(j,c),f.promise()}}),jQuery.support=function(a){var b=document.createElement("input"),c=document.createDocumentFragment(),d=document.createElement("div"),e=document.createElement("select"),f=e.appendChild(document.createElement("option"));return b.type?(b.type="checkbox",a.checkOn=b.value!=="",a.optSelected=f.selected,a.reliableMarginRight=!0,a.boxSizingReliable=!0,a.pixelPosition=!1,b.checked=!0,a.noCloneChecked=b.cloneNode(!0).checked,e.disabled=!0,a.optDisabled=!f.disabled,b=document.createElement("input"),b.value="t",b.type="radio",a.radioValue=b.value==="t",b.setAttribute("checked","t"),b.setAttribute("name","t"),c.appendChild(b),a.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked,a.focusinBubbles="onfocusin"in window,d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",a.clearCloneStyle=d.style.backgroundClip==="content-box",jQuery(function(){var b,c,e="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",f=document.getElementsByTagName("body")[0];if(!f)return;b=document.createElement("div"),b.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",f.appendChild(b).appendChild(d),d.innerHTML="",d.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",jQuery.swap(f,f.style.zoom!=null?{zoom:1}:{},function(){a.boxSizing=d.offsetWidth===4}),window.getComputedStyle&&(a.pixelPosition=(window.getComputedStyle(d,null)||{}).top!=="1%",a.boxSizingReliable=(window.getComputedStyle(d,null)||{width:"4px"}).width==="4px",c=d.appendChild(document.createElement("div")),c.style.cssText=d.style.cssText=e,c.style.marginRight=c.style.width="0",d.style.width="1px",a.reliableMarginRight=!parseFloat((window.getComputedStyle(c,null)||{}).marginRight)),f.removeChild(b)}),a):a}({});var data_user,data_priv,rbrace=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,rmultiDash=/([A-Z])/g;Data.uid=1,Data.accepts=function(a){return a.nodeType?a.nodeType===1||a.nodeType===9:!0},Data.prototype={key:function(a){if(!Data.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=Data.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,jQuery.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if(typeof b=="string")f[b]=c;else if(jQuery.isEmptyObject(f))this.cache[e]=b;else for(d in b)f[d]=b[d]},get:function(a,b){var c=this.cache[this.key(a)];return b===undefined?c:c[b]},access:function(a,b,c){return b===undefined||b&&typeof b=="string"&&c===undefined?this.get(a,b):(this.set(a,b,c),c!==undefined?c:b)},remove:function(a,b){var c,d,e=this.key(a),f=this.cache[e];if(b===undefined)this.cache[e]={};else{jQuery.isArray(b)?d=b.concat(b.map(jQuery.camelCase)):b in f?d=[b]:(d=jQuery.camelCase(b),d=d in f?[d]:d.match(core_rnotwhite)||[]),c=d.length;while(c--)delete f[d[c]]}},hasData:function(a){return!jQuery.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){delete this.cache[this.key(a)]}},data_user=new Data,data_priv=new Data,jQuery.extend({acceptData:Data.accepts,hasData:function(a){return data_user.hasData(a)||data_priv.hasData(a)},data:function(a,b,c){return data_user.access(a,b,c)},removeData:function(a,b){data_user.remove(a,b)},_data:function(a,b,c){return data_priv.access(a,b,c)},_removeData:function(a,b){data_priv.remove(a,b)}}),jQuery.fn.extend({data:function(a,b){var c,d,e=this[0],f=0,g=null;if(a===undefined){if(this.length){g=data_user.get(e);if(e.nodeType===1&&!data_priv.get(e,"hasDataAttrs")){c=e.attributes;for(;f<c.length;f++)d=c[f].name,d.indexOf("data-")===0&&(d=jQuery.camelCase(d.substring(5)),dataAttr(e,d,g[d]));data_priv.set(e,"hasDataAttrs",!0)}}return g}return typeof a=="object"?this.each(function(){data_user.set(this,a)}):jQuery.access(this,function(b){var c,d=jQuery.camelCase(a);if(e&&b===undefined){c=data_user.get(e,a);if(c!==undefined)return c;c=data_user.get(e,d);if(c!==undefined)return c;c=dataAttr(e,d,undefined);if(c!==undefined)return c;return}this.each(function(){var c=data_user.get(this,d);data_user.set(this,d,b),a.indexOf("-")!==-1&&c!==undefined&&data_user.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){data_user.remove(this,a)})}}),jQuery.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=data_priv.get(a,b),c&&(!d||jQuery.isArray(c)?d=data_priv.access(a,b,jQuery.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=jQuery.queue(a,b),d=c.length,e=c.shift(),f=jQuery._queueHooks(a,b),g=function(){jQuery.dequeue(a,b)};e==="inprogress"&&(e=c.shift(),d--),f.cur=e,e&&(b==="fx"&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return data_priv.get(a,c)||data_priv.access(a,c,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(a,[b+"queue",c])})})}}),jQuery.fn.extend({queue:function(a,b){var c=2;return typeof a!="string"&&(b=a,a="fx",c--),arguments.length<c?jQuery.queue(this[0],a):b===undefined?this:this.each(function(){var c=jQuery.queue(this,a,b);jQuery._queueHooks(this,a),a==="fx"&&c[0]!=="inprogress"&&jQuery.dequeue(this,a)})},dequeue:function(a){return this.each(function(){jQuery.dequeue(this,a)})},delay:function(a,b){return a=jQuery.fx?jQuery.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=jQuery.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};typeof a!="string"&&(b=a,a=undefined),a=a||"fx";while(g--)c=data_priv.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var nodeHook,boolHook,rclass=/[\t\r\n]/g,rreturn=/\r/g,rfocusable=/^(?:input|select|textarea|button)$/i;jQuery.fn.extend({attr:function(a,b){return jQuery.access(this,jQuery.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){jQuery.removeAttr(this,a)})},prop:function(a,b){return jQuery.access(this,jQuery.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[jQuery.propFix[a]||a]})},addClass:function(a){var b,c,d,e,f,g=0,h=this.length,i=typeof a=="string"&&a;if(jQuery.isFunction(a))return this.each(function(b){jQuery(this).addClass(a.call(this,b,this.className))});if(i){b=(a||"").match(core_rnotwhite)||[];for(;g<h;g++){c=this[g],d=c.nodeType===1&&(c.className?(" "+c.className+" ").replace(rclass," "):" ");if(d){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");c.className=jQuery.trim(d)}}}return this},removeClass:function(a){var b,c,d,e,f,g=0,h=this.length,i=arguments.length===0||typeof a=="string"&&a;if(jQuery.isFunction(a))return this.each(function(b){jQuery(this).removeClass(a.call(this,b,this.className))});if(i){b=(a||"").match(core_rnotwhite)||[];for(;g<h;g++){c=this[g],d=c.nodeType===1&&(c.className?(" "+c.className+" ").replace(rclass," "):"");if(d){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");c.className=a?jQuery.trim(d):""}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";return jQuery.isFunction(a)?this.each(function(c){jQuery(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string"){var e,f=0,g=jQuery(this),h=b,i=a.match(core_rnotwhite)||[];while(e=i[f++])h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e)}else if(c===core_strundefined||c==="boolean")this.className&&data_priv.set(this,"__className__",this.className),this.className=this.className||a===!1?"":data_priv.get(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(rclass," ").indexOf(b)>=0)return!0;return!1},val:function(a){var b,c,d,e=this[0];if(!arguments.length){if(e)return b=jQuery.valHooks[e.type]||jQuery.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&(c=b.get(e,"value"))!==undefined?c:(c=e.value,typeof c=="string"?c.replace(rreturn,""):c==null?"":c);return}return d=jQuery.isFunction(a),this.each(function(c){var e,f=jQuery(this);if(this.nodeType!==1)return;d?e=a.call(this,c,f.val()):e=a,e==null?e="":typeof e=="number"?e+="":jQuery.isArray(e)&&(e=jQuery.map(e,function(a){return a==null?"":a+""})),b=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!b||!("set"in b)||b.set(this,e,"value")===undefined)this.value=e})}}),jQuery.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d=a.options,e=a.selectedIndex,f=a.type==="select-one"||e<0,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;for(;i<h;i++){c=d[i];if((c.selected||i===e)&&(jQuery.support.optDisabled?!c.disabled:c.getAttribute("disabled")===null)&&(!c.parentNode.disabled||!jQuery.nodeName(c.parentNode,"optgroup"))){b=jQuery(c).val();if(f)return b;g.push(b)}}return g},set:function(a,b){var c,d,e=a.options,f=jQuery.makeArray(b),g=e.length;while(g--){d=e[g];if(d.selected=jQuery.inArray(jQuery(d).val(),f)>=0)c=!0}return c||(a.selectedIndex=-1),f}}},attr:function(a,b,c){var d,e,f=a.nodeType;if(!a||f===3||f===8||f===2)return;if(typeof a.getAttribute===core_strundefined)return jQuery.prop(a,b,c);if(f!==1||!jQuery.isXMLDoc(a))b=b.toLowerCase(),d=jQuery.attrHooks[b]||(jQuery.expr.match.boolean.test(b)?boolHook:nodeHook);if(c===undefined)return d&&"get"in d&&(e=d.get(a,b))!==null?e:(e=jQuery.find.attr(a,b),e==null?undefined:e);if(c===null)jQuery.removeAttr(a,b);else return d&&"set"in d&&(e=d.set(a,c,b))!==undefined?e:(a.setAttribute(b,c+""),c)},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(core_rnotwhite);if(f&&a.nodeType===1)while(c=f[e++])d=jQuery.propFix[c]||c,jQuery.expr.match.boolean.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!jQuery.support.radioValue&&b==="radio"&&jQuery.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(!a||g===3||g===8||g===2)return;return f=g!==1||!jQuery.isXMLDoc(a),f&&(b=jQuery.propFix[b]||b,e=jQuery.propHooks[b]),c!==undefined?e&&"set"in e&&(d=e.set(a,c,b))!==undefined?d:a[b]=c:e&&"get"in e&&(d=e.get(a,b))!==null?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||rfocusable.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),boolHook={set:function(a,b,c){return b===!1?jQuery.removeAttr(a,c):a.setAttribute(c,c),c}},jQuery.each(jQuery.expr.match.boolean.source.match(/\w+/g),function(a,b){var c=jQuery.expr.attrHandle[b]||jQuery.find.attr;jQuery.expr.attrHandle[b]=function(a,b,d){var e=jQuery.expr.attrHandle[b],f=d?undefined:(jQuery.expr.attrHandle[b]=undefined)!=c(a,b,d)?b.toLowerCase():null;return jQuery.expr.attrHandle[b]=e,f}}),jQuery.support.optSelected||(jQuery.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(a,b){if(jQuery.isArray(b))return a.checked=jQuery.inArray(jQuery(a).val(),b)>=0}},jQuery.support.checkOn||(jQuery.valHooks[this].get=function(a){return a.getAttribute("value")===null?"on":a.value})});var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;jQuery.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=data_priv.get(a);if(!q)return;c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=jQuery.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(a){return typeof jQuery===core_strundefined||!!a&&jQuery.event.triggered===a.type?undefined:jQuery.event.dispatch.apply(g.elem,arguments)},g.elem=a),b=(b||"").match(core_rnotwhite)||[""],j=b.length;while(j--){h=rtypenamespace.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort();if(!n)continue;l=jQuery.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=jQuery.event.special[n]||{},k=jQuery.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&jQuery.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,(!l.setup||l.setup.call(a,d,o,g)===!1)&&a.addEventListener&&a.addEventListener(n,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),jQuery.event.global[n]=!0}a=null},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=data_priv.hasData(a)&&data_priv.get(a);if(!q||!(i=q.events))return;b=(b||"").match(core_rnotwhite)||[""],j=b.length;while(j--){h=rtypenamespace.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort();if(!n){for(n in i)jQuery.event.remove(a,n+b[j],c,d,!0);continue}l=jQuery.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],(e||p===k.origType)&&(!c||c.guid===k.guid)&&(!h||h.test(k.namespace))&&(!d||d===k.selector||d==="**"&&k.selector)&&(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&((!l.teardown||l.teardown.call(a,o,q.handle)===!1)&&jQuery.removeEvent(a,n,q.handle),delete i[n])}jQuery.isEmptyObject(i)&&(delete q.handle,data_priv.remove(a,"events"))},trigger:function(a,b,c,d){var e,f,g,h,i,j,k,l=[c||document],m=core_hasOwn.call(a,"type")?a.type:a,n=core_hasOwn.call(a,"namespace")?a.namespace.split("."):[];f=g=c=c||document;if(c.nodeType===3||c.nodeType===8)return;if(rfocusMorph.test(m+jQuery.event.triggered))return;m.indexOf(".")>=0&&(n=m.split("."),m=n.shift(),n.sort()),i=m.indexOf(":")<0&&"on"+m,a=a[jQuery.expando]?a:new jQuery.Event(m,typeof a=="object"&&a),a.isTrigger=d?2:3,a.namespace=n.join("."),a.namespace_re=a.namespace?new RegExp("(^|\\.)"+n.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=undefined,a.target||(a.target=c),b=b==null?[a]:jQuery.makeArray(b,[a]),k=jQuery.event.special[m]||{};if(!d&&k.trigger&&k.trigger.apply(c,b)===!1)return;if(!d&&!k.noBubble&&!jQuery.isWindow(c)){h=k.delegateType||m,rfocusMorph.test(h+m)||(f=f.parentNode);for(;f;f=f.parentNode)l.push(f),g=f;g===(c.ownerDocument||document)&&l.push(g.defaultView||g.parentWindow||window)}e=0;while((f=l[e++])&&!a.isPropagationStopped())a.type=e>1?h:k.bindType||m,j=(data_priv.get(f,"events")||{})[a.type]&&data_priv.get(f,"handle"),j&&j.apply(f,b),j=i&&f[i],j&&jQuery.acceptData(f)&&j.apply&&j.apply(f,b)===!1&&a.preventDefault();return a.type=m,!d&&!a.isDefaultPrevented()&&(!k._default||k._default.apply(l.pop(),b)===!1)&&jQuery.acceptData(c)&&i&&jQuery.isFunction(c[m])&&!jQuery.isWindow(c)&&(g=c[i],g&&(c[i]=null),jQuery.event.triggered=m,c[m](),jQuery.event.triggered=undefined,g&&(c[i]=g)),a.result},dispatch:function(a){a=jQuery.event.fix(a);var b,c,d,e,f,g=[],h=core_slice.call(arguments),i=(data_priv.get(this,"events")||{})[a.type]||[],j=jQuery.event.special[a.type]||{};h[0]=a,a.delegateTarget=this;if(j.preDispatch&&j.preDispatch.call(this,a)===!1)return;g=jQuery.event.handlers.call(this,a,i),b=0;while((e=g[b++])&&!a.isPropagationStopped()){a.currentTarget=e.elem,c=0;while((f=e.handlers[c++])&&!a.isImmediatePropagationStopped())if(!a.namespace_re||a.namespace_re.test(f.namespace))a.handleObj=f,a.data=f.data,d=((jQuery.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,h),d!==undefined&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation())}return j.postDispatch&&j.postDispatch.call(this,a),a.result},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||a.type!=="click"))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||a.type!=="click"){d=[];for(c=0;c<h;c++)f=b[c],e=f.selector+" ",d[e]===undefined&&(d[e]=f.needsContext?jQuery(e,this).index(i)>=0:jQuery.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return a.pageX==null&&b.clientX!=null&&(c=a.target.ownerDocument||document,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),!a.which&&f!==undefined&&(a.which=f&1?1:f&2?3:f&4?2:0),a}},fix:function(a){if(a[jQuery.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=rmouseEvent.test(e)?this.mouseHooks:rkeyEvent.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new jQuery.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target.nodeType===3&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input"))return this.click(),!1},_default:function(a){return jQuery.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){a.result!==undefined&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=jQuery.extend(new jQuery.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?jQuery.event.trigger(e,null,b):jQuery.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},jQuery.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},jQuery.Event=function(a,b){if(this instanceof jQuery.Event)a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.getPreventDefault&&a.getPreventDefault()?returnTrue:returnFalse):this.type=a,b&&jQuery.extend(this,b),this.timeStamp=a&&a.timeStamp||jQuery.now(),this[jQuery.expando]=!0;else return new jQuery.Event(a,b)},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=returnTrue,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=returnTrue,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){jQuery.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;if(!e||e!==d&&!jQuery.contains(d,e))a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b;return c}}}),jQuery.support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){jQuery.event.simulate(b,a.target,jQuery.event.fix(a),!0)};jQuery.event.special[b]={setup:function(){c++===0&&document.addEventListener(a,d,!0)},teardown:function(){--c===0&&document.removeEventListener(a,d,!0)}}}),jQuery.fn.extend({on:function(a,b,c,d,e){var f,g;if(typeof a=="object"){typeof b!="string"&&(c=c||b,b=undefined);for(g in a)this.on(g,b,c,a[g],e);return this}c==null&&d==null?(d=b,c=b=undefined):d==null&&(typeof b=="string"?(d=c,c=undefined):(d=c,c=b,b=undefined));if(d===!1)d=returnFalse;else if(!d)return this;return e===1&&(f=d,d=function(a){return jQuery().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,jQuery(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if(typeof a=="object"){for(e in a)this.off(e,b,a[e]);return this}if(b===!1||typeof b=="function")c=b,b=undefined;return c===!1&&(c=returnFalse),this.each(function(){jQuery.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){jQuery.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return jQuery.event.trigger(a,b,c,!0)}});var isSimple=/^.[^:#\[\.,]*$/,rneedsContext=jQuery.expr.match.needsContext,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.fn.extend({find:function(a){var b,c,d,e=this.length;if(typeof a!="string")return b=this,this.pushStack(jQuery(a).filter(function(){for(d=0;d<e;d++)if(jQuery.contains(b[d],this))return!0}));c=[];for(d=0;d<e;d++)jQuery.find(a,this[d],c);return c=this.pushStack(e>1?jQuery.unique(c):c),c.selector=(this.selector?this.selector+" ":"")+a,c},has:function(a){var b=jQuery(a,this),c=b.length;return this.filter(function(){var a=0;for(;a<c;a++)if(jQuery.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(winnow(this,a||[],!0))},filter:function(a){return this.pushStack(winnow(this,a||[],!1))},is:function(a){return!!a&&(typeof a=="string"?rneedsContext.test(a)?jQuery(a,this.context).index(this[0])>=0:jQuery.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c,d=0,e=this.length,f=[],g=rneedsContext.test(a)||typeof a!="string"?jQuery(a,b||this.context):0;for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:c.nodeType===1&&jQuery.find.matchesSelector(c,a))){c=f.push(c);break}return this.pushStack(f.length>1?jQuery.unique(f):f)},index:function(a){return a?typeof a=="string"?core_indexOf.call(jQuery(a),this[0]):core_indexOf.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c=typeof a=="string"?jQuery(a,b):jQuery.makeArray(a&&a.nodeType?[a]:a),d=jQuery.merge(this.get(),c);return this.pushStack(jQuery.unique(d))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}}),jQuery.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return jQuery.dir(a,"parentNode")},parentsUntil:function(a,b,c){return jQuery.dir(a,"parentNode",c)},next:function(a){return sibling(a,"nextSibling")},prev:function(a){return sibling(a,"previousSibling")},nextAll:function(a){return jQuery.dir(a,"nextSibling")},prevAll:function(a){return jQuery.dir(a,"previousSibling")},nextUntil:function(a,b,c){return jQuery.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return jQuery.dir(a,"previousSibling",c)},siblings:function(a){return jQuery.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return jQuery.sibling(a.firstChild)},contents:function(a){return jQuery.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:jQuery.merge([],a.childNodes)}},function(a,b){jQuery.fn[a]=function(c,d){var e=jQuery.map(this,b,c);return a.slice(-5)!=="Until"&&(d=c),d&&typeof d=="string"&&(e=jQuery.filter(d,e)),this.length>1&&(guaranteedUnique[a]||jQuery.unique(e),a[0]==="p"&&e.reverse()),this.pushStack(e)}}),jQuery.extend({filter:function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),b.length===1&&d.nodeType===1?jQuery.find.matchesSelector(d,a)?[d]:[]:jQuery.find.matches(a,jQuery.grep(b,function(a){return a.nodeType===1}))},dir:function(a,b,c){var d=[],e=c!==undefined;while((a=a[b])&&a.nodeType!==9)if(a.nodeType===1){if(e&&jQuery(a).is(c))break;d.push(a)}return d},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,manipulation_rcheckableType=/^(?:checkbox|radio)$/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.col=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.fn.extend({text:function(a){return jQuery.access(this,function(a){return a===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b=manipulationTarget(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b=manipulationTarget(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){var c,d=a?jQuery.filter(a,this):this,e=0;for(;(c=d[e])!=null;e++)!b&&c.nodeType===1&&jQuery.cleanData(getAll(c)),c.parentNode&&(b&&jQuery.contains(c.ownerDocument,c)&&setGlobalEval(getAll(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){var a,b=0;for(;(a=this[b])!=null;b++)a.nodeType===1&&(jQuery.cleanData(getAll(a,!1)),a.textContent="");return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return jQuery.clone(this,a,b)})},html:function(a){return jQuery.access(this,function(a){var b=this[0]||{},c=0,d=this.length;if(a===undefined&&b.nodeType===1)return b.innerHTML;if(typeof a=="string"&&!rnoInnerhtml.test(a)&&!wrapMap[(rtagName.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(rxhtmlTag,"<$1></$2>");try{for(;c<d;c++)b=this[c]||{},b.nodeType===1&&(jQuery.cleanData(getAll(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=jQuery.map(this,function(a){return[a.nextSibling,a.parentNode]}),b=0;return this.domManip(arguments,function(c){var d=a[b++],e=a[b++];e&&(jQuery(this).remove(),e.insertBefore(c,d))},!0),b?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b,c){a=core_concat.apply([],a);var d,e,f,g,h,i,j=0,k=this.length,l=this,m=k-1,n=a[0],o=jQuery.isFunction(n);if(o||!(k<=1||typeof n!="string"||jQuery.support.checkClone||!rchecked.test(n)))return this.each(function(d){var e=l.eq(d);o&&(a[0]=n.call(this,d,e.html())),e.domManip(a,b,c)});if(k){d=jQuery.buildFragment(a,this[0].ownerDocument,!1,!c&&this),e=d.firstChild,d.childNodes.length===1&&(d=e);if(e){f=jQuery.map(getAll(d,"script"),disableScript),g=f.length;for(;j<k;j++)h=d,j!==m&&(h=jQuery.clone(h,!0,!0),g&&jQuery.merge(f,getAll(h,"script"))),b.call(this[j],h,j);if(g){i=f[f.length-1].ownerDocument,jQuery.map(f,restoreScript);for(j=0;j<g;j++)h=f[j],rscriptType.test(h.type||"")&&!data_priv.access(h,"globalEval")&&jQuery.contains(i,h)&&(h.src?jQuery._evalUrl(h.src):jQuery.globalEval(h.textContent.replace(rcleanScript,"")))}}}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){jQuery.fn[a]=function(a){var c,d=[],e=jQuery(a),f=e.length-1,g=0;for(;g<=f;g++)c=g===f?this:this.clone(!0),jQuery(e[g])[b](c),core_push.apply(d,c.get());return this.pushStack(d)}}),jQuery.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=jQuery.contains(a.ownerDocument,a);if(!jQuery.support.noCloneChecked&&(a.nodeType===1||a.nodeType===11)&&!jQuery.isXMLDoc(a)){g=getAll(h),f=getAll(a);for(d=0,e=f.length;d<e;d++)fixInput(f[d],g[d])}if(b)if(c){f=f||getAll(a),g=g||getAll(h);for(d=0,e=f.length;d<e;d++)cloneCopyEvent(f[d],g[d])}else cloneCopyEvent(a,h);return g=getAll(h,"script"),g.length>0&&setGlobalEval(g,!i&&getAll(a,"script")),h},buildFragment:function(a,b,c,d){var e,f,g,h,i,j,k=0,l=a.length,m=b.createDocumentFragment(),n=[];for(;k<l;k++){e=a[k];if(e||e===0)if(jQuery.type(e)==="object")jQuery.merge(n,e.nodeType?[e]:e);else if(!rhtml.test(e))n.push(b.createTextNode(e));else{f=f||m.appendChild(b.createElement("div")),g=(rtagName.exec(e)||["",""])[1].toLowerCase(),h=wrapMap[g]||wrapMap._default,f.innerHTML=h[1]+e.replace(rxhtmlTag,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.firstChild;jQuery.merge(n,f.childNodes),f=m.firstChild,f.textContent=""}}m.textContent="",k=0;while(e=n[k++]){if(d&&jQuery.inArray(e,d)!==-1)continue;i=jQuery.contains(e.ownerDocument,e),f=getAll(m.appendChild(e),"script"),i&&setGlobalEval(f);if(c){j=0;while(e=f[j++])rscriptType.test(e.type||"")&&c.push(e)}}return m},cleanData:function(a){var b,c,d,e=a.length,f=0,g=jQuery.event.special;for(;f<e;f++){c=a[f];if(jQuery.acceptData(c)){b=data_priv.access(c);if(b)for(d in b.events)g[d]?jQuery.event.remove(c,d):jQuery.removeEvent(c,d,b.handle)}data_user.discard(c),data_priv.discard(c)}},_evalUrl:function(a){return jQuery.ajax({url:a,type:"GET",dataType:"text",async:!1,global:!1,success:jQuery.globalEval})}}),jQuery.fn.extend({wrapAll:function(a){var b;return jQuery.isFunction(a)?this.each(function(b){jQuery(this).wrapAll(a.call(this,b))}):(this[0]&&(b=jQuery(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return jQuery.isFunction(a)?this.each(function(b){jQuery(this).wrapInner(a.call(this,b))}):this.each(function(){var b=jQuery(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=jQuery.isFunction(a);return this.each(function(c){jQuery(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()}});var curCSS,iframe,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rmargin=/^margin/,rnumsplit=new RegExp("^("+core_pnum+")(.*)$","i"),rnumnonpx=new RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i"),rrelNum=new RegExp("^([+-])=("+core_pnum+")","i"),elemdisplay={BODY:"block"},cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssExpand=["Top","Right","Bottom","Left"],cssPrefixes=["Webkit","O","Moz","ms"];jQuery.fn.extend({css:function(a,b){return jQuery.access(this,function(a,b,c){var d,e,f={},g=0;if(jQuery.isArray(b)){d=getStyles(a),e=b.length;for(;g<e;g++)f[b[g]]=jQuery.css(a,b[g],!1,d);return f}return c!==undefined?jQuery.style(a,b,c):jQuery.css(a,b)},a,b,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(a){var b=typeof a=="boolean";return this.each(function(){(b?a:isHidden(this))?jQuery(this).show():jQuery(this).hide()})}}),jQuery.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=curCSS(a,"opacity");return c===""?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;var e,f,g,h=jQuery.camelCase(b),i=a.style;b=jQuery.cssProps[h]||(jQuery.cssProps[h]=vendorPropName(i,h)),g=jQuery.cssHooks[b]||jQuery.cssHooks[h];if(c===undefined)return g&&"get"in g&&(e=g.get(a,!1,d))!==undefined?e:i[b];f=typeof c,f==="string"&&(e=rrelNum.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(jQuery.css(a,b)),f="number");if(c==null||f==="number"&&isNaN(c))return;f==="number"&&!jQuery.cssNumber[h]&&(c+="px"),!jQuery.support.clearCloneStyle&&c===""&&b.indexOf("background")===0&&(i[b]="inherit");if(!g||!("set"in g)||(c=g.set(a,c,d))!==undefined)i[b]=c},css:function(a,b,c,d){var e,f,g,h=jQuery.camelCase(b);return b=jQuery.cssProps[h]||(jQuery.cssProps[h]=vendorPropName(a.style,h)),g=jQuery.cssHooks[b]||jQuery.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),e===undefined&&(e=curCSS(a,b,d)),e==="normal"&&b in cssNormalTransform&&(e=cssNormalTransform[b]),c===""||c?(f=parseFloat(e),c===!0||jQuery.isNumeric(f)?f||0:e):e}}),curCSS=function(a,b,c){var d,e,f,g=c||getStyles(a),h=g?g.getPropertyValue(b)||g[b]:undefined,i=a.style;return g&&(h===""&&!jQuery.contains(a.ownerDocument,a)&&(h=jQuery.style(a,b)),rnumnonpx.test(h)&&rmargin.test(b)&&(d=i.width,e=i.minWidth,f=i.maxWidth,i.minWidth=i.maxWidth=i.width=h,h=g.width,i.width=d,i.minWidth=e,i.maxWidth=f)),h},jQuery.each(["height","width"],function(a,b){jQuery.cssHooks[b]={get:function(a,c,d){if(c)return a.offsetWidth===0&&rdisplayswap.test(jQuery.css(a,"display"))?jQuery.swap(a,cssShow,function(){return getWidthOrHeight(a,b,d)}):getWidthOrHeight(a,b,d)},set:function(a,c,d){var e=d&&getStyles(a);return setPositiveNumber(a,c,d?augmentWidthOrHeight(a,b,d,jQuery.support.boxSizing&&jQuery.css(a,"boxSizing",!1,e)==="border-box",e):0)}}}),jQuery(function(){jQuery.support.reliableMarginRight||(jQuery.cssHooks.marginRight={get:function(a,b){if(b)return jQuery.swap(a,{display:"inline-block"},curCSS,[a,"marginRight"])}}),!jQuery.support.pixelPosition&&jQuery.fn.position&&jQuery.each(["top","left"],function(a,b){jQuery.cssHooks[b]={get:function(a,c){if(c)return c=curCSS(a,b),rnumnonpx.test(c)?jQuery(a).position()[b]+"px":c}}})}),jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},jQuery.expr.filters.visible=function(a){return!jQuery.expr.filters.hidden(a)}),jQuery.each({margin:"",padding:"",border:"Width"},function(a,b){jQuery.cssHooks[a+b]={expand:function(c){var d=0,e={},f=typeof c=="string"?c.split(" "):[c];for(;d<4;d++)e[a+cssExpand[d]+b]=f[d]||f[d-2]||f[0];return e}},rmargin.test(a)||(jQuery.cssHooks[a+b].set=setPositiveNumber)});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=jQuery.prop(this,"elements");return a?jQuery.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(a)&&(this.checked||!manipulation_rcheckableType.test(a))}).map(function(a,b){var c=jQuery(this).val();return c==null?null:jQuery.isArray(c)?jQuery.map(c,function(a){return{name:b.name,value:a.replace(rCRLF,"\r\n")}}):{name:b.name,value:c.replace(rCRLF,"\r\n")}}).get()}}),jQuery.param=function(a,b){var c,d=[],e=function(a,b){b=jQuery.isFunction(b)?b():b==null?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};b===undefined&&(b=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional);if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){e(this.name,this.value)});else for(c in a)buildParams(c,a[c],b,e);return d.join("&").replace(r20,"+")},jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){jQuery.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),jQuery.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length===1?this.off(a,"**"):this.off(b,a||"**",c)}});var ajaxLocParts,ajaxLocation,ajax_nonce=jQuery.now(),ajax_rquery=/\?/,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_load=jQuery.fn.load,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a"),ajaxLocation.href="",ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.fn.load=function(a,b,c){if(typeof a!="string"&&_load)return _load.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=a.slice(h),a=a.slice(0,h)),jQuery.isFunction(b)?(c=b,b=undefined):b&&typeof b=="object"&&(e="POST"),g.length>0&&jQuery.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?jQuery("<div>").append(jQuery.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){jQuery.fn[b]=function(a){return this.on(b,a)}}),jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?ajaxExtend(ajaxExtend(a,jQuery.ajaxSettings),b):ajaxExtend(jQuery.ajaxSettings,a)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(a,b){function w(a,b,f,h){var j,q,r,t,v,w=b;if(s===2)return;s=2,g&&clearTimeout(g),c=undefined,e=h||"",u.readyState=a>0?4:0,j=a>=200&&a<300||a===304,f&&(t=ajaxHandleResponses(k,u,f)),t=ajaxConvert(k,t,u,j);if(j)k.ifModified&&(v=u.getResponseHeader("Last-Modified"),v&&(jQuery.lastModified[d]=v),v=u.getResponseHeader("etag"),v&&(jQuery.etag[d]=v)),a===204?w="nocontent":a===304?w="notmodified":(w=t.state,q=t.data,r=t.error,j=!r);else{r=w;if(a||!w)w="error",a<0&&(a=0)}u.status=a,u.statusText=(b||w)+"",j?n.resolveWith(l,[q,w,u]):n.rejectWith(l,[u,w,r]),u.statusCode(p),p=undefined,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[u,k,j?q:r]),o.fireWith(l,[u,w]),i&&(m.trigger("ajaxComplete",[u,k]),--jQuery.active||jQuery.event.trigger("ajaxStop"))}typeof a=="object"&&(b=a,a=undefined),b=b||{};var c,d,e,f,g,h,i,j,k=jQuery.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?jQuery(l):jQuery.event,n=jQuery.Deferred(),o=jQuery.Callbacks("once memory"),p=k.statusCode||{},q={},r={},s=0,t="canceled",u={readyState:0,getResponseHeader:function(a){var b;if(s===2){if(!f){f={};while(b=rheaders.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return b==null?null:b},getAllResponseHeaders:function(){return s===2?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return s||(a=r[c]=r[c]||a,q[a]=b),this},overrideMimeType:function(a){return s||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(s<2)for(b in a)p[b]=[p[b],a[b]];else u.always(a[u.status]);return this},abort:function(a){var b=a||t;return c&&c.abort(b),w(0,b),this}};n.promise(u).complete=o.add,u.success=u.done,u.error=u.fail,k.url=((a||k.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=jQuery.trim(k.dataType||"*").toLowerCase().match(core_rnotwhite)||[""],k.crossDomain==null&&(h=rurl.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===ajaxLocParts[1]&&h[2]===ajaxLocParts[2]&&(h[3]||(h[1]==="http:"?"80":"443"))===(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?"80":"443")))),k.data&&k.processData&&typeof k.data!="string"&&(k.data=jQuery.param(k.data,k.traditional)),inspectPrefiltersOrTransports(prefilters,k,b,u);if(s===2)return u;i=k.global,i&&jQuery.active++===0&&jQuery.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!rnoContent.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(ajax_rquery.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=rts.test(d)?d.replace(rts,"$1_="+ajax_nonce++):d+(ajax_rquery.test(d)?"&":"?")+"_="+ajax_nonce++)),k.ifModified&&(jQuery.lastModified[d]&&u.setRequestHeader("If-Modified-Since",jQuery.lastModified[d]),jQuery.etag[d]&&u.setRequestHeader("If-None-Match",jQuery.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&u.setRequestHeader("Content-Type",k.contentType),u.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+(k.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)u.setRequestHeader(j,k.headers[j]);if(!k.beforeSend||k.beforeSend.call(l,u,k)!==!1&&s!==2){t="abort";for(j in{success:1,error:1,complete:1})u[j](k[j]);c=inspectPrefiltersOrTransports(transports,k,b,u);if(!c)w(-1,"No Transport");else{u.readyState=1,i&&m.trigger("ajaxSend",[u,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){u.abort("timeout")},k.timeout));try{s=1,c.send(q,w)}catch(v){if(s<2)w(-1,v);else throw v}}return u}return u.abort()},getJSON:function(a,b,c){return jQuery.get(a,b,c,"json")},getScript:function(a,b){return jQuery.get(a,undefined,b,"script")}}),jQuery.each(["get","post"],function(a,b){jQuery[b]=function(a,c,d,e){return jQuery.isFunction(c)&&(e=e||d,d=c,c=undefined),jQuery.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return jQuery.globalEval(a),a}}}),jQuery.ajaxPrefilter("script",function(a){a.cache===undefined&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),jQuery.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=jQuery("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e(a.type==="error"?404:200,a.type)}),document.head.appendChild(b[0])},abort:function(){c&&c()}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=oldCallbacks.pop()||jQuery.expando+"_"+ajax_nonce++;return this[a]=!0,a}}),jQuery.ajaxPrefilter("json jsonp",function(a,b,c){var d,e,f,g=a.jsonp!==!1&&(rjsonp.test(a.url)?"url":typeof a.data=="string"&&!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(a.data)&&"data");if(g||a.dataTypes[0]==="jsonp")return d=a.jsonpCallback=jQuery.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,g?a[g]=a[g].replace(rjsonp,"$1"+d):a.jsonp!==!1&&(a.url+=(ajax_rquery.test(a.url)?"&":"?")+a.jsonp+"="+d),a.converters["script json"]=function(){return f||jQuery.error(d+" was not called"),f[0]},a.dataTypes[0]="json",e=window[d],window[d]=function(){f=arguments},c.always(function(){window[d]=e,a[d]&&(a.jsonpCallback=b.jsonpCallback,oldCallbacks.push(d)),f&&jQuery.isFunction(e)&&e(f[0]),f=e=undefined}),"script"}),jQuery.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var xhrSupported=jQuery.ajaxSettings.xhr(),xhrSuccessStatus={0:200,1223:204},xhrId=0,xhrCallbacks={};window.ActiveXObject&&jQuery(window).on("unload",function(){for(var a in xhrCallbacks)xhrCallbacks[a]();xhrCallbacks=undefined}),jQuery.support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,jQuery.support.ajax=xhrSupported=!!xhrSupported,jQuery.ajaxTransport(function(a){var b;if(jQuery.support.cors||xhrSupported&&!a.crossDomain)return{send:function(c,d){var e,f,g=a.xhr();g.open(a.type,a.url,a.async,a.username,a.password);if(a.xhrFields)for(e in a.xhrFields)g[e]=a.xhrFields[e];a.mimeType&&g.overrideMimeType&&g.overrideMimeType(a.mimeType),!a.crossDomain&&!c["X-Requested-With"]&&(c["X-Requested-With"]="XMLHttpRequest");for(e in c)g.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete xhrCallbacks[f],b=g.onload=g.onerror=null,a==="abort"?g.abort():a==="error"?d(g.status||404,g.statusText):d(xhrSuccessStatus[g.status]||g.status,g.statusText,typeof g.responseText=="string"?{text:g.responseText}:undefined,g.getAllResponseHeaders()))}},g.onload=b(),g.onerror=b("error"),b=xhrCallbacks[f=xhrId++]=b("abort"),g.send(a.hasContent&&a.data||null)},abort:function(){b&&b()}}});var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+core_pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=rfxnum.exec(b),g=e.cur(),h=+g||0,i=1,j=20;if(f){c=+f[2],d=f[3]||(jQuery.cssNumber[a]?"":"px");if(d!=="px"&&h){h=jQuery.css(e.elem,a,!0)||c||1;do i=i||".5",h/=i,jQuery.style(e.elem,a,h+d);while(i!==(i=e.cur()/g)&&i!==1&&--j)}e.unit=d,e.start=h,e.end=f[1]?h+(f[1]+1)*c:c}return e}]};jQuery.Animation=jQuery.extend(Animation,{tweener:function(a,b){jQuery.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");var c,d=0,e=a.length;for(;d<e;d++)c=a[d],tweeners[c]=tweeners[c]||[],tweeners[c].unshift(b)},prefilter:function(a,b){b?animationPrefilters.unshift(a):animationPrefilters.push(a)}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(jQuery.cssNumber[c]?"":"px")},cur:function(){var a=Tween.propHooks[this.prop];return a&&a.get?a.get(this):Tween.propHooks._default.get(this)},run:function(a){var b,c=Tween.propHooks[this.prop];return this.options.duration?this.pos=b=jQuery.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(a){var b;return a.elem[a.prop]==null||!!a.elem.style&&a.elem.style[a.prop]!=null?(b=jQuery.css(a.elem,a.prop,""),!b||b==="auto"?0:b):a.elem[a.prop]},set:function(a){jQuery.fx.step[a.prop]?jQuery.fx.step[a.prop](a):a.elem.style&&(a.elem.style[jQuery.cssProps[a.prop]]!=null||jQuery.cssHooks[a.prop])?jQuery.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},jQuery.each(["toggle","show","hide"],function(a,b){var c=jQuery.fn[b];jQuery.fn[b]=function(a,d,e){return a==null||typeof a=="boolean"?c.apply(this,arguments):this.animate(genFx(b,!0),a,d,e)}}),jQuery.fn.extend({fadeTo:function(a,b,c,d){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=jQuery.isEmptyObject(a),f=jQuery.speed(b,c,d),g=function(){var b=Animation(this,jQuery.extend({},a),f);g.finish=function(){b.stop(!0)},(e||data_priv.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return typeof a!="string"&&(c=b,b=a,a=undefined),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=a!=null&&a+"queueHooks",f=jQuery.timers,g=data_priv.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&rrun.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem===this&&(a==null||f[e].queue===a)&&(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&jQuery.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=data_priv.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=jQuery.timers,g=d?d.length:0;c.finish=!0,jQuery.queue(this,a,[]),e&&e.cur&&e.cur.finish&&e.cur.finish.call(this);for(b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){jQuery.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),jQuery.speed=function(a,b,c){var d=a&&typeof a=="object"?jQuery.extend({},a):{complete:c||!c&&b||jQuery.isFunction(a)&&a,duration:a,easing:c&&b||b&&!jQuery.isFunction(b)&&b};d.duration=jQuery.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in jQuery.fx.speeds?jQuery.fx.speeds[d.duration]:jQuery.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";return d.old=d.complete,d.complete=function(){jQuery.isFunction(d.old)&&d.old.call(this),d.queue&&jQuery.dequeue(this,d.queue)},d},jQuery.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},jQuery.timers=[],jQuery.fx=Tween.prototype.init,jQuery.fx.tick=function(){var a,b=jQuery.timers,c=0;fxNow=jQuery.now();for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||jQuery.fx.stop(),fxNow=undefined},jQuery.fx.timer=function(a){a()&&jQuery.timers.push(a)&&jQuery.fx.start()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fx.step={},jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.animated=function(a){return jQuery.grep(jQuery.timers,function(b){return a===b.elem}).length}),jQuery.fn.offset=function(a){if(arguments.length)return a===undefined?this:this.each(function(b){jQuery.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(!f)return;return b=f.documentElement,jQuery.contains(b,d)?(typeof d.getBoundingClientRect!==core_strundefined&&(e=d.getBoundingClientRect()),c=getWindow(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},jQuery.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=jQuery.css(a,"position"),l=jQuery(a),m={};k==="static"&&(a.style.position="relative"),h=l.offset(),f=jQuery.css(a,"top"),i=jQuery.css(a,"left"),j=(k==="absolute"||k==="fixed")&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),jQuery.isFunction(b)&&(b=b.call(a,c,h)),b.top!=null&&(m.top=b.top-h.top+g),b.left!=null&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},jQuery.fn.extend({position:function(){if(!this[0])return;var a,b,c=this[0],d={top:0,left:0};return jQuery.css(c,"position")==="fixed"?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),jQuery.nodeName(a[0],"html")||(d=a.offset()),d.top+=jQuery.css(a[0],"borderTopWidth",!0),d.left+=jQuery.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-jQuery.css(c,"marginTop",!0),left:b.left-d.left-jQuery.css(c,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||docElem;while(a&&!jQuery.nodeName(a,"html")&&jQuery.css(a,"position")==="static")a=a.offsetParent;return a||docElem})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;jQuery.fn[a]=function(d){return jQuery.access(this,function(a,d,e){var f=getWindow(a);if(e===undefined)return f?f[b]:a[d];f?f.scrollTo(c?window.pageXOffset:e,c?e:window.pageYOffset):a[d]=e},a,d,arguments.length,null)}}),jQuery.each({Height:"height",Width:"width"},function(a,b){jQuery.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){jQuery.fn[d]=function(d,e){var f=arguments.length&&(c||typeof d!="boolean"),g=c||(d===!0||e===!0?"margin":"border");return jQuery.access(this,function(b,c,d){var e;return jQuery.isWindow(b)?b.document.documentElement["client"+a]:b.nodeType===9?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):d===undefined?jQuery.css(b,c,g):jQuery.style(b,c,d,g)},b,f?d:undefined,f,null)}})}),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack,typeof module=="object"&&typeof module.exports=="object"?module.exports=jQuery:typeof define=="function"&&define.amd&&define("jquery",[],function(){return jQuery}),typeof window=="object"&&typeof window.document=="object"&&(window.jQuery=window.$=jQuery)})(window);var previousMM=MM;if(!com){var com={};com.modestmaps||(com.modestmaps={})}var MM=com.modestmaps={noConflict:function(){return MM=previousMM,this}};(function(a){a.extend=function(a,b){for(var c in b.prototype)typeof a.prototype[c]=="undefined"&&(a.prototype[c]=b.prototype[c]);return a},a.getFrame=function(){return function(a){(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(function(){a(+(new Date))},10)})(a)}}(),a.transformProperty=function(a){if(!this.document)return;var b=document.documentElement.style;for(var c=0;c<a.length;c++)if(a[c]in b)return a[c];return!1}(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),a.matrixString=function(b){b.scale*b.width%1&&(b.scale+=(1-b.scale*b.width%1)/b.width);var c=b.scale||1;return a._browser.webkit3d?"translate3d("+b.x.toFixed(0)+"px,"+b.y.toFixed(0)+"px, 0px)"+"scale3d("+c+","+c+", 1)":"translate("+b.x.toFixed(6)+"px,"+b.y.toFixed(6)+"px)"+"scale("+c+","+c+")"},a._browser=function(a){return{webkit:"WebKitCSSMatrix"in a,webkit3d:"WebKitCSSMatrix"in a&&"m11"in new WebKitCSSMatrix}}(this),a.moveElement=function(b,c){if(a.transformProperty){c.scale||(c.scale=1),c.width||(c.width=0),c.height||(c.height=0);var d=a.matrixString(c);b[a.transformProperty]!==d&&(b.style[a.transformProperty]=b[a.transformProperty]=d)}else b.style.left=c.x+"px",b.style.top=c.y+"px",c.width&&c.height&&c.scale&&(b.style.width=Math.ceil(c.width*c.scale)+"px",b.style.height=Math.ceil(c.height*c.scale)+"px")},a.cancelEvent=function(a){return a.cancelBubble=!0,a.cancel=!0,a.returnValue=!1,a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),!1},a.coerceLayer=function(b){return typeof b=="string"?new a.Layer(new a.TemplatedLayer(b)):"draw"in b&&typeof b.draw=="function"?b:new a.Layer(b)},a.addEvent=function(a,b,c){a.addEventListener?(a.addEventListener(b,c,!1),b=="mousewheel"&&a.addEventListener("DOMMouseScroll",c,!1)):a.attachEvent&&(a["e"+b+c]=c,a[b+c]=function(){a["e"+b+c](window.event)},a.attachEvent("on"+b,a[b+c]))},a.removeEvent=function(a,b,c){a.removeEventListener?(a.removeEventListener(b,c,!1),b=="mousewheel"&&a.removeEventListener("DOMMouseScroll",c,!1)):a.detachEvent&&(a.detachEvent("on"+b,a[b+c]),a[b+c]=null)},a.getStyle=function(a,b){if(a.currentStyle)return a.currentStyle[b];if(window.getComputedStyle)return document.defaultView.getComputedStyle(a,null).getPropertyValue(b)},a.Point=function(a,b){this.x=parseFloat(a),this.y=parseFloat(b)},a.Point.prototype={x:0,y:0,toString:function(){return"("+this.x.toFixed(3)+", "+this.y.toFixed(3)+")"},copy:function(){return new a.Point(this.x,this.y)}},a.Point.distance=function(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))},a.Point.interpolate=function(b,c,d){return new a.Point(b.x+(c.x-b.x)*d,b.y+(c.y-b.y)*d)},a.Coordinate=function(a,b,c){this.row=a,this.column=b,this.zoom=c},a.Coordinate.prototype={row:0,column:0,zoom:0,toString:function(){return"("+this.row.toFixed(3)+", "+this.column.toFixed(3)+" @"+this.zoom.toFixed(3)+")"},toKey:function(){return this.zoom+","+this.row+","+this.column},copy:function(){return new a.Coordinate(this.row,this.column,this.zoom)},container:function(){return new a.Coordinate(Math.floor(this.row),Math.floor(this.column),Math.floor(this.zoom))},zoomTo:function(b){var c=Math.pow(2,b-this.zoom);return new a.Coordinate(this.row*c,this.column*c,b)},zoomBy:function(b){var c=Math.pow(2,b);return new a.Coordinate(this.row*c,this.column*c,this.zoom+b)},up:function(b){return b===undefined&&(b=1),new a.Coordinate(this.row-b,this.column,this.zoom)},right:function(b){return b===undefined&&(b=1),new a.Coordinate(this.row,this.column+b,this.zoom)},down:function(b){return b===undefined&&(b=1),new a.Coordinate(this.row+b,this.column,this.zoom)},left:function(b){return b===undefined&&(b=1),new a.Coordinate(this.row,this.column-b,this.zoom)}},a.Location=function(a,b){this.lat=parseFloat(a),this.lon=parseFloat(b)},a.Location.prototype={lat:0,lon:0,toString:function(){return"("+this.lat.toFixed(3)+", "+this.lon.toFixed(3)+")"},copy:function(){return new a.Location(this.lat,this.lon)}},a.Location.distance=function(a,b,c){c||(c=6378e3);var d=Math.PI/180,e=a.lat*d,f=a.lon*d,g=b.lat*d,h=b.lon*d,i=Math.cos(e)*Math.cos(f)*Math.cos(g)*Math.cos(h),j=Math.cos(e)*Math.sin(f)*Math.cos(g)*Math.sin(h),k=Math.sin(e)*Math.sin(g);return Math.acos(i+j+k)*c},a.Location.interpolate=function(b,c,d){if(b.lat===c.lat&&b.lon===c.lon)return new a.Location(b.lat,b.lon);var e=Math.PI/180,f=b.lat*e,g=b.lon*e,h=c.lat*e,i=c.lon*e,j=2*Math.asin(Math.sqrt(Math.pow(Math.sin((f-h)*.5),2)+Math.cos(f)*Math.cos(h)*Math.pow(Math.sin((g-i)*.5),2))),k=Math.sin((1-d)*j)/Math.sin(j),l=Math.sin(d*j)/Math.sin(j),m=k*Math.cos(f)*Math.cos(g)+l*Math.cos(h)*Math.cos(i),n=k*Math.cos(f)*Math.sin(g)+l*Math.cos(h)*Math.sin(i),o=k*Math.sin(f)+l*Math.sin(h),p=Math.atan2(o,Math.sqrt(Math.pow(m,2)+Math.pow(n,2))),q=Math.atan2(n,m);return new a.Location(p/e,q/e)},a.Location.bearing=function(a,b){var c=Math.PI/180,d=a.lat*c,e=a.lon*c,f=b.lat*c,g=b.lon*c,h=Math.atan2(Math.sin(e-g)*Math.cos(f),Math.cos(d)*Math.sin(f)-Math.sin(d)*Math.cos(f)*Math.cos(e-g))/-(Math.PI/180);return h<0?h+360:h},a.Extent=function(b,c,d,e){if(b instanceof a.Location&&c instanceof a.Location){var f=b,g=c;b=f.lat,c=f.lon,d=g.lat,e=g.lon}isNaN(d)&&(d=b),isNaN(e)&&(e=c),this.north=Math.max(b,d),this.south=Math.min(b,d),this.east=Math.max(e,c),this.west=Math.min(e,c)},a.Extent.prototype={north:0,south:0,east:0,west:0,copy:function(){return new a.Extent(this.north,this.west,this.south,this.east)},toString:function(a){return isNaN(a)&&(a=3),[this.north.toFixed(a),this.west.toFixed(a),this.south.toFixed(a),this.east.toFixed(a)].join(", ")},northWest:function(){return new a.Location(this.north,this.west)},southEast:function(){return new a.Location(this.south,this.east)},northEast:function(){return new a.Location(this.north,this.east)},southWest:function(){return new a.Location(this.south,this.west)},center:function(){return new a.Location(this.south+(this.north-this.south)*.5,this.east+(this.west-this.east)*.5)},encloseLocation:function(a){a.lat>this.north&&(this.north=a.lat),a.lat<this.south&&(this.south=a.lat),a.lon>this.east&&(this.east=a.lon),a.lon<this.west&&(this.west=a.lon)},encloseLocations:function(a){var b=a.length;for(var c=0;c<b;c++)this.encloseLocation(a[c])},setFromLocations:function(a){var b=a.length,c=a[0];this.north=this.south=c.lat,this.east=this.west=c.lon;for(var d=1;d<b;d++)this.encloseLocation(a[d])},encloseExtent:function(a){a.north>this.north&&(this.north=a.north),a.south<this.south&&(this.south=a.south),a.east>this.east&&(this.east=a.east),a.west<this.west&&(this.west=a.west)},containsLocation:function(a){return a.lat>=this.south&&a.lat<=this.north&&a.lon>=this.west&&a.lon<=this.east},toArray:function(){return[this.northWest(),this.southEast()]}},a.Extent.fromString=function(b){var c=b.split(/\s*,\s*/);if(c.length!=4)throw"Invalid extent string (expecting 4 comma-separated numbers)";return new a.Extent(parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3]))},a.Extent.fromArray=function(b){var c=new a.Extent;return c.setFromLocations(b),c},a.Transformation=function(a,b,c,d,e,f){this.ax=a,this.bx=b,this.cx=c,this.ay=d,this.by=e,this.cy=f},a.Transformation.prototype={ax:0,bx:0,cx:0,ay:0,by:0,cy:0,transform:function(b){return new a.Point(this.ax*b.x+this.bx*b.y+this.cx,this.ay*b.x+this.by*b.y+this.cy)},untransform:function(b){return new a.Point((b.x*this.by-b.y*this.bx-this.cx*this.by+this.cy*this.bx)/(this.ax*this.by-this.ay*this.bx),(b.x*this.ay-b.y*this.ax-this.cx*this.ay+this.cy*this.ax)/(this.bx*this.ay-this.by*this.ax))}},a.deriveTransformation=function(b,c,d,e,f,g,h,i,j,k,l,m){var n=a.linearSolution(b,c,d,f,g,h,j,k,l),o=a.linearSolution(b,c,e,f,g,i,j,k,m);return new a.Transformation(n[0],n[1],n[2],o[0],o[1],o[2])},a.linearSolution=function(a,b,c,d,e,f,g,h,i){a=parseFloat(a),b=parseFloat(b),c=parseFloat(c),d=parseFloat(d),e=parseFloat(e),f=parseFloat(f),g=parseFloat(g),h=parseFloat(h),i=parseFloat(i);var j=((f-i)*(b-e)-(c-f)*(e-h))/((d-g)*(b-e)-(a-d)*(e-h)),k=((f-i)*(a-d)-(c-f)*(d-g))/((e-h)*(a-d)-(b-e)*(d-g)),l=c-a*j-b*k;return[j,k,l]},a.Projection=function(b,c){c||(c=new a.Transformation(1,0,0,0,1,0)),this.zoom=b,this.transformation=c},a.Projection.prototype={zoom:0,transformation:null,rawProject:function(a){throw"Abstract method not implemented by subclass."},rawUnproject:function(a){throw"Abstract method not implemented by subclass."},project:function(a){return a=this.rawProject(a),this.transformation&&(a=this.transformation.transform(a)),a},unproject:function(a){return this.transformation&&(a=this.transformation.untransform(a)),a=this.rawUnproject(a),a},locationCoordinate:function(b){var c=new a.Point(Math.PI*b.lon/180,Math.PI*b.lat/180);return c=this.project(c),new a.Coordinate(c.y,c.x,this.zoom)},coordinateLocation:function(b){b=b.zoomTo(this.zoom);var c=new a.Point(b.column,b.row);return c=this.unproject(c),new a.Location(180*c.y/Math.PI,180*c.x/Math.PI)}},a.LinearProjection=function(b,c){a.Projection.call(this,b,c)},a.LinearProjection.prototype={rawProject:function(b){return new a.Point(b.x,b.y)},rawUnproject:function(b){return new a.Point(b.x,b.y)}},a.extend(a.LinearProjection,a.Projection),a.MercatorProjection=function(b,c){a.Projection.call(this,b,c)},a.MercatorProjection.prototype={rawProject:function(b){return new a.Point(b.x,Math.log(Math.tan(.25*Math.PI+.5*b.y)))},rawUnproject:function(b){return new a.Point(b.x,2*Math.atan(Math.pow(Math.E,b.y))-.5*Math.PI)}},a.extend(a.MercatorProjection,a.Projection),a.MapProvider=function(a){a&&(this.getTile=a)},a.MapProvider.prototype={tileLimits:[new a.Coordinate(0,0,0),(new a.Coordinate(1,1,0)).zoomTo(18)],getTileUrl:function(a){throw"Abstract method not implemented by subclass."},getTile:function(a){throw"Abstract method not implemented by subclass."},releaseTile:function(a){},setZoomRange:function(a,b){this.tileLimits[0]=this.tileLimits[0].zoomTo(a),this.tileLimits[1]=this.tileLimits[1].zoomTo(b)},sourceCoordinate:function(b){var c=this.tileLimits[0].zoomTo(b.zoom).container(),d=this.tileLimits[1].zoomTo(b.zoom),e=Math.pow(2,b.zoom),f;return d=new a.Coordinate(Math.ceil(d.row),Math.ceil(d.column),Math.floor(d.zoom)),b.column<0?f=(b.column%e+e)%e:f=b.column%e,b.row<c.row||b.row>=d.row?null:f<c.column||f>=d.column?null:new a.Coordinate(b.row,f,b.zoom)}},a.Template=function(b,c){function f(a,b,c){var d="";for(var e=1;e<=c;e++)d+=(a>>c-e&1)<<1|b>>c-e&1;return d||"0"}var d=b.match(/{(Q|quadkey)}/);d&&(b=b.replace("{subdomains}","{S}").replace("{zoom}","{Z}").replace("{quadkey}","{Q}"));var e=c&&c.length&&b.indexOf("{S}")>=0,g=function(a){var g=this.sourceCoordinate(a);if(!g)return null;var h=b;if(e){var i=parseInt(g.zoom+g.row+g.column,10)%c.length;h=h.replace("{S}",c[i])}return d?h.replace("{Z}",g.zoom.toFixed(0)).replace("{Q}",f(g.row,g.column,g.zoom)):h.replace("{Z}",g.zoom.toFixed(0)).replace("{X}",g.column.toFixed(0)).replace("{Y}",g.row.toFixed(0))};a.MapProvider.call(this,g)},a.Template.prototype={getTile:function(a){return this.getTileUrl(a)}},a.extend(a.Template,a.MapProvider),a.TemplatedLayer=function(b,c,d){return new a.Layer(new a.Template(b,c),null,d)},a.getMousePoint=function(b,c){var d=new a.Point(b.clientX,b.clientY);d.x+=document.body.scrollLeft+document.documentElement.scrollLeft,d.y+=document.body.scrollTop+document.documentElement.scrollTop;for(var e=c.parent;e;e=e.offsetParent)d.x-=e.offsetLeft,d.y-=e.offsetTop;return d},a.MouseWheelHandler=function(){function g(b){var g=0;e=e||(new Date).getTime();try{d.scrollTop=1e3,d.dispatchEvent(b),g=1e3-d.scrollTop}catch(h){g=b.wheelDelta||-b.detail*5}var i=(new Date).getTime()-e,j=a.getMousePoint(b,c);return Math.abs(g)>0&&i>200&&!f?(c.zoomByAbout(g>0?1:-1,j),e=(new Date).getTime()):f&&c.zoomByAbout(g*.001,j),a.cancelEvent(b)}var b={id:"MouseWheelHandler"},c,d,e,f=!1;return b.init=function(e){c=e,d=document.body.appendChild(document.createElement("div")),d.style.cssText="visibility:hidden;top:0;height:0;width:0;overflow-y:scroll";var f=d.appendChild(document.createElement("div"));return f.style.height="2000px",a.addEvent(c.parent,"mousewheel",g),b},b.precise=function(a){return arguments.length?(f=a,b):f},b.remove=function(){a.removeEvent(c.parent,"mousewheel",g),d.parentNode.removeChild(d)},b},a.DoubleClickHandler=function(){function d(b){var d=a.getMousePoint(b,c);return c.zoomByAbout(b.shiftKey?-1:1,d),a.cancelEvent(b)}var b={id:"DoubleClickHandler"},c;return b.init=function(e){return c=e,a.addEvent(c.parent,"dblclick",d),b},b.remove=function(){a.removeEvent(c.parent,"dblclick",d)},b},a.DragHandler=function(){function e(b){if(b.shiftKey||b.button==2)return;return a.addEvent(document,"mouseup",f),a.addEvent(document,"mousemove",g),c=new a.Point(b.clientX,b.clientY),d.parent.style.cursor="move",a.cancelEvent(b)}function f(b){return a.removeEvent(document,"mouseup",f),a.removeEvent(document,"mousemove",g),c=null,d.parent.style.cursor="",a.cancelEvent(b)}function g(b){return c&&(d.panBy(b.clientX-c.x,b.clientY-c.y),c.x=b.clientX,c.y=b.clientY,c.t=+(new Date)),a.cancelEvent(b)}var b={id:"DragHandler"},c,d;return b.init=function(c){return d=c,a.addEvent(d.parent,"mousedown",e),b},b.remove=function(){a.removeEvent(d.parent,"mousedown",e)},b},a.MouseHandler=function(){var b={id:"MouseHandler",handlers:[]},c;return b.init=function(d){return c=d,b.handlers=[a.DragHandler().init(c),a.DoubleClickHandler().init(c),a.MouseWheelHandler().init(c)],b},b.remove=function(){for(var a=0;a<b.handlers.length;a++)b.handlers[a].remove();return b.handlers=[],b},b},a.TouchHandler=function(){function l(){var a=document.createElement("div");return a.setAttribute("ongesturestart","return;"),typeof a.ongesturestart=="function"}function m(a){for(var b=0;b<a.touches.length;b+=1){var c=a.touches[b];if(c.identifier in g){var d=g[c.identifier];d.x=c.clientX,d.y=c.clientY,d.scale=a.scale}else g[c.identifier]={scale:a.scale,startPos:{x:c.clientX,y:c.clientY},x:c.clientX,y:c.clientY,time:(new Date).getTime()}}}function n(a,b){return a&&a.touch&&b.identifier==a.touch.identifier}function o(a){m(a)}function p(b){switch(b.touches.length){case 1:u(b.touches[0]);break;case 2:v(b)}return m(b),a.cancelEvent(b)}function q(b){var c=(new Date).getTime();b.touches.length===0&&j&&w(k);for(var f=0;f<b.changedTouches.length;f+=1){var h=b.changedTouches[f],i=g[h.identifier];if(!i||i.wasPinch)continue;var l={x:h.clientX,y:h.clientY},m=c-i.time,n=a.Point.distance(l,i.startPos);n>e||(m>d?(l.end=c,l.duration=m,r(l)):(l.time=c,s(l)))}var o={};for(var p=0;p<b.touches.length;p++)o[b.touches[p].identifier]=!0;for(var q in g)q in o||delete o[q];return a.cancelEvent(b)}function r(a){}function s(a){if(h.length&&a.time-h[0].time<f){t(a),h=[];return}h=[a]}function t(b){var d=c.getZoom(),e=Math.round(d)+1,f=e-d,g=new a.Point(b.x,b.y);c.zoomByAbout(f,g)}function u(a){var b={x:a.clientX,y:a.clientY},d=g[a.identifier];c.panBy(b.x-d.x,b.y-d.y)}function v(b){var d=b.touches[0],e=b.touches[1],f=new a.Point(d.clientX,d.clientY),h=new a.Point(e.clientX,e.clientY),i=g[d.identifier],l=g[e.identifier];i.wasPinch=!0,l.wasPinch=!0;var m=a.Point.interpolate(f,h,.5);c.zoomByAbout(Math.log(b.scale)/Math.LN2-Math.log(i.scale)/Math.LN2,m);var n=a.Point.interpolate(i,l,.5);c.panBy(m.x-n.x,m.y-n.y),j=!0,k=m}function w(a){if(i){var b=c.getZoom(),d=Math.round(b);c.zoomByAbout(d-b,a)}j=!1}var b={id:"TouchHandler"},c,d=250,e=30,f=350,g={},h=[],i=!0,j=!1,k=null;return b.init=function(d){return c=d,l()?(a.addEvent(c.parent,"touchstart",o),a.addEvent(c.parent,"touchmove",p),a.addEvent(c.parent,"touchend",q),b):b},b.remove=function(){return l()?(a.removeEvent(c.parent,"touchstart",o),a.removeEvent(c.parent,"touchmove",p),a.removeEvent(c.parent,"touchend",q),b):b},b},a.CallbackManager=function(a,b){this.owner=a,this.callbacks={};for(var c=0;c<b.length;c++)this.callbacks[b[c]]=[]},a.CallbackManager.prototype={owner:null,callbacks:null,addCallback:function(a,b){typeof b=="function"&&this.callbacks[a]&&this.callbacks[a].push(b)},removeCallback:function(a,b){if(typeof b=="function"&&this.callbacks[a]){var c=this.callbacks[a],d=c.length;for(var e=0;e<d;e++)if(c[e]===b){c.splice(e,1);break}}},dispatchCallback:function(a,b){if(this.callbacks[a])for(var c=0;c<this.callbacks[a].length;c+=1)try{this.callbacks[a][c](this.owner,b)}catch(d){}}},a.RequestManager=function(){this.loadingBay=document.createDocumentFragment(),this.requestsById={},this.openRequestCount=0,this.maxOpenRequests=4,this.requestQueue=[],this.callbackManager=new a.CallbackManager(this,["requestcomplete","requesterror"])},a.RequestManager.prototype={loadingBay:null,requestsById:null,requestQueue:null,openRequestCount:null,maxOpenRequests:null,callbackManager:null,addCallback:function(a,b){this.callbackManager.addCallback(a,b)},removeCallback:function(a,b){this.callbackManager.removeCallback(a,b)},dispatchCallback:function(a,b){this.callbackManager.dispatchCallback(a,b)},clear:function(){this.clearExcept({})},clearRequest:function(a){a in this.requestsById&&delete this.requestsById[a];for(var b=0;b<this.requestQueue.length;b++){var c=this.requestQueue[b];c&&c.id==a&&(this.requestQueue[b]=null)}},clearExcept:function(a){for(var b=0;b<this.requestQueue.length;b++){var c=this.requestQueue[b];c&&!(c.id in a)&&(this.requestQueue[b]=null)}var d=this.loadingBay.childNodes;for(var e=d.length-1;e>=0;e--){var f=d[e];f.id in a||(this.loadingBay.removeChild(f),this.openRequestCount--,f.src=f.coord=f.onload=f.onerror=null)}for(var g in this.requestsById)if(!(g in a)&&this.requestsById.hasOwnProperty(g)){var h=this.requestsById[g];delete this.requestsById[g],h!==null&&(h=h.id=h.coord=h.url=null)}},hasRequest:function(a){return a in this.requestsById},requestTile:function(a,b,c){if(!(a in this.requestsById)){var d={id:a,coord:b.copy(),url:c};this.requestsById[a]=d,c&&this.requestQueue.push(d)}},getProcessQueue:function(){if(!this._processQueue){var a=this;this._processQueue=function(){a.processQueue()}}return this._processQueue},processQueue:function(a){a&&this.requestQueue.length>8&&this.requestQueue.sort(a);while(this.openRequestCount<this.maxOpenRequests&&this.requestQueue.length>0){var b=this.requestQueue.pop();if(b){this.openRequestCount++;var c=document.createElement("img");c.id=b.id,c.style.position="absolute",c.coord=b.coord,this.loadingBay.appendChild(c),c.onload=c.onerror=this.getLoadComplete(),c.src=b.url,b=b.id=b.coord=b.url=null}}},_loadComplete:null,getLoadComplete:function(){if(!this._loadComplete){var a=this;this._loadComplete=function(b){b=b||window.event;var c=b.srcElement||b.target;c.onload=c.onerror=null,a.loadingBay.removeChild(c),a.openRequestCount--,delete a.requestsById[c.id],b.type==="load"&&(c.complete||c.readyState&&c.readyState=="complete")?a.dispatchCallback("requestcomplete",c):(a.dispatchCallback("requesterror",{element:c,url:""+c.src}),c.src=null),setTimeout(a.getProcessQueue(),0)}}return this._loadComplete}},a.Layer=function(b,c,d){this.parent=c||document.createElement("div"),this.parent.style.cssText="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; margin: 0; padding: 0; z-index: 0",this.name=d,this.levels={},this.requestManager=new a.RequestManager,this.requestManager.addCallback("requestcomplete",this.getTileComplete()),this.requestManager.addCallback("requesterror",this.getTileError()),b&&this.setProvider(b)},a.Layer.prototype={map:null,parent:null,name:null,enabled:!0,tiles:null,levels:null,requestManager:null,provider:null,_tileComplete:null,getTileComplete:function(){if(!this._tileComplete){var a=this;this._tileComplete=function(b,c){a.tiles[c.id]=c,a.positionTile(c),c.style.visibility="inherit",c.className="map-tile-loaded"}}return this._tileComplete},getTileError:function(){if(!this._tileError){var a=this;this._tileError=function(b,c){c.onload=c.onerror=null,a.tiles[c.element.id]=c.element,a.positionTile(c.element),c.element.style.visibility="hidden"}}return this._tileError},draw:function(){function c(a,c){if(a&&c){var d=a.coord,e=c.coord;if(d.zoom==e.zoom){var f=Math.abs(b.row-d.row-.5)+Math.abs(b.column-d.column-.5),g=Math.abs(b.row-e.row-.5)+Math.abs(b.column-e.column-.5);return f<g?1:f>g?-1:0}return d.zoom<e.zoom?1:d.zoom>e.zoom?-1:0}return a?1:c?-1:0}if(!this.enabled||!this.map)return;var b=this.map.coordinate.zoomTo(Math.round(this.map.coordinate.zoom)),d=Math.round(this.map.coordinate.zoom),e=this.map.pointCoordinate(new a.Point(0,0)).zoomTo(d).container(),f=this.map.pointCoordinate(this.map.dimensions).zoomTo(d).container().right().down(),g={},h=this.createOrGetLevel(e.zoom),i=e.copy();for(i.column=e.column;i.column<=f.column;i.column++)for(i.row=e.row;i.row<=f.row;i.row++){var j=this.inventoryVisibleTile(h,i);while(j.length)g[j.pop()]=!0}for(var k in this.levels)if(this.levels.hasOwnProperty(k)){var l=parseInt(k,10);if(l>=e.zoom-5&&l<e.zoom+2)continue;var m=this.levels[k];m.style.display="none";var n=this.tileElementsInLevel(m);while(n.length)this.provider.releaseTile(n[0].coord),this.requestManager.clearRequest(n[0].coord.toKey()),m.removeChild(n[0]),n.shift()}var o=e.zoom-5,p=e.zoom+2;for(var q=o;q<p;q++)this.adjustVisibleLevel(this.levels[q],q,g);this.requestManager.clearExcept(g),this.requestManager.processQueue(c)},inventoryVisibleTile:function(a,b){var c=b.toKey(),d=[c];if(c in this.tiles){var e=this.tiles[c];return e.parentNode!=a&&(a.appendChild(e),"reAddTile"in this.provider&&this.provider.reAddTile(c,b,e)),d}if(!this.requestManager.hasRequest(c)){var f=this.provider.getTile(b);typeof f=="string"?this.addTileImage(c,b,f):f&&this.addTileElement(c,b,f)}var g=!1,h=b.zoom;for(var i=1;i<=h;i++){var j=b.zoomBy(-i).container(),k=j.toKey();if(k in this.tiles){d.push(k),g=!0;break}}if(!g){var l=b.zoomBy(1);d.push(l.toKey()),l.column+=1,d.push(l.toKey()),l.row+=1,d.push(l.toKey()),l.column-=1,d.push(l.toKey())}return d},tileElementsInLevel:function(a){var b=[];for(var c=a.firstChild;c;c=c.nextSibling)c.nodeType==1&&b.push(c);return b},adjustVisibleLevel:function(b,c,d){if(!b)return;var e=1,f=this.map.coordinate.copy();if(b.childNodes.length>0)b.style.display="block",e=Math.pow(2,this.map.coordinate.zoom-c),f=f.zoomTo(c);else return b.style.display="none",!1;var g=this.map.tileSize.x*e,h=this.map.tileSize.y*e,i=new a.Point(this.map.dimensions.x*.5,this.map.dimensions.y*.5),j=this.tileElementsInLevel(b);while(j.length){var k=j.pop();d[k.id]?a.moveElement(k,{x:Math.round(i.x+(k.coord.column-f.column)*g),y:Math.round(i.y+(k.coord.row-f.row)*h),scale:e,width:this.map.tileSize.x,height:this.map.tileSize.y}):(this.provider.releaseTile(k.coord),this.requestManager.clearRequest(k.coord.toKey()),b.removeChild(k))}},createOrGetLevel:function(a){if(a in this.levels)return this.levels[a];var b=document.createElement("div");return b.id=this.parent.id+"-zoom-"+a,b.style.cssText="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; margin: 0; padding: 0;",b.style.zIndex=a,this.parent.appendChild(b),this.levels[a]=b,b},addTileImage:function(a,b,c){this.requestManager.requestTile(a,b,c)},addTileElement:function(a,b,c){c.id=a,c.coord=b.copy(),this.positionTile(c)},positionTile:function(b){var c=this.map.coordinate.zoomTo(b.coord.zoom);b.style.cssText="position:absolute;-webkit-user-select:none;-webkit-user-drag:none;-moz-user-drag:none;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;-ms-transform-origin:0 0;width:"+this.map.tileSize.x+"px; height: "+this.map.tileSize.y+"px;",b.ondragstart=function(){return!1};var d=Math.pow(2,this.map.coordinate.zoom-b.coord.zoom);a.moveElement(b,{x:Math.round(this.map.dimensions.x*.5+(b.coord.column-c.column)*this.map.tileSize.x),y:Math.round(this.map.dimensions.y*.5+(b.coord.row-c.row)*this.map.tileSize.y),scale:d,width:this.map.tileSize.x,height:this.map.tileSize.y});var e=this.levels[b.coord.zoom];e.appendChild(b),Math.round(this.map.coordinate.zoom)==b.coord.zoom&&(e.style.display="block"),this.requestRedraw()},_redrawTimer:undefined,requestRedraw:function(){this._redrawTimer||(this._redrawTimer=setTimeout(this.getRedraw(),1e3))},_redraw:null,getRedraw:function(){if(!this._redraw){var a=this;this._redraw=function(){a.draw(),a._redrawTimer=0}}return this._redraw},setProvider:function(a){var b=this.provider===null;if(!b){this.requestManager.clear();for(var c in this.levels)if(this.levels.hasOwnProperty(c)){var d=this.levels[c];while(d.firstChild)this.provider.releaseTile(d.firstChild.coord),d.removeChild(d.firstChild)}}this.tiles={},this.provider=a,b||this.draw()},enable:function(){return this.enabled=!0,this.parent.style.display="",this.draw(),this},disable:function(){return this.enabled=!1,this.requestManager.clear(),this.parent.style.display="none",this},destroy:function(){this.requestManager.clear(),this.requestManager.removeCallback("requestcomplete",this.getTileComplete()),this.requestManager.removeCallback("requesterror",this.getTileError()),this.provider=null,this.parent.parentNode&&this.parent.parentNode.removeChild(this.parent),this.map=null}},a.Map=function(b,c,d,e){if(typeof b=="string"){b=document.getElementById(b);if(!b)throw"The ID provided to modest maps could not be found."}this.parent=b,this.parent.style.padding="0",this.parent.style.overflow="hidden";var f=a.getStyle(this.parent,"position");f!="relative"&&f!="absolute"&&(this.parent.style.position="relative"),this.layers=[],c||(c=[]),c instanceof Array||(c=[c]);for(var g=0;g<c.length;g++)this.addLayer(c[g]);this.projection=new a.MercatorProjection(0,a.deriveTransformation(-Math.PI,Math.PI,0,0,Math.PI,Math.PI,1,0,-Math.PI,-Math.PI,0,1)),this.tileSize=new a.Point(256,256),this.coordLimits=[new a.Coordinate(0,-Infinity,0),(new a.Coordinate(1,Infinity,0)).zoomTo(18)],this.coordinate=new a.Coordinate(.5,.5,0),d?(this.autoSize=!1,this.parent.style.width=Math.round(d.x)+"px",this.parent.style.height=Math.round(d.y)+"px"):(d=new a.Point(this.parent.offsetWidth,this.parent.offsetHeight),this.autoSize=!0,a.addEvent(window,"resize",this.windowResize())),this.dimensions=d,this.callbackManager=new a.CallbackManager(this,["zoomed","panned","centered","extentset","resized","drawn"]);if(e===undefined)this.eventHandlers=[a.MouseHandler().init(this),a.TouchHandler().init(this)];else{this.eventHandlers=e;if(e instanceof Array)for(var h=0;h<e.length;h++)e[h].init(this)}},a.Map.prototype={parent:null,dimensions:null,projection:null,coordinate:null,tileSize:null,coordLimits:null,layers:null,callbackManager:null,eventHandlers:null,autoSize:null,toString:function(){return"Map(#"+this.parent.id+")"},addCallback:function(a,b){return this.callbackManager.addCallback(a,b),this},removeCallback:function(a,b){return this.callbackManager.removeCallback(a,b),this},dispatchCallback:function(a,b){return this.callbackManager.dispatchCallback(a,b),this},getHandler:function(a,b){var c=null,d=this.eventHandlers;if(b===!0){d=this.getHandler("MouseHandler",!1);if(!d)return c;d=d.handlers}if(!d)return c;for(var e=0;e<d.length;e++)if(typeof d[e].id=="string"&&d[e].id===a){c=d[e];break}return!c&&typeof b!="boolean"?this.getHandler(a,!0):c},disableHandler:function(a){var b=this.getHandler(a);return b&&typeof b.remove=="function"&&b.remove(),this},enableHandler:function(a){var b=this.getHandler(a);return b&&typeof b.remove=="function"&&b.init(this),this},removeHandler:function(a){var b=this.getHandler(a),c=this.eventHandlers.indexOf(b);if(c===-1){var d=this.getHandler("MouseHandler");c=d.handlers.indexOf(b),c!==-1&&(b.remove(),d.handlers.splice(c,1));return}return b.remove(),this.eventHandlers.splice(c,1),b},addHandler:function(a){a.init(this);if(typeof a.id!="string")throw new Error("Handler lacks the required id attribute");return this.eventHandlers.push(a),this},windowResize:function(){if(!this._windowResize){var b=this;this._windowResize=function(c){b.dimensions=new a.Point(b.parent.offsetWidth,b.parent.offsetHeight),b.draw(),b.dispatchCallback("resized",[b.dimensions])}}return this._windowResize},setZoomRange:function(a,b){return this.coordLimits[0]=this.coordLimits[0].zoomTo(a),this.coordLimits[1]=this.coordLimits[1].zoomTo(b),this},zoomBy:function(b){return this.coordinate=this.enforceLimits(this.coordinate.zoomBy(b)),a.getFrame(this.getRedraw()),this.dispatchCallback("zoomed",b),this},zoomIn:function(){return this.zoomBy(1)},zoomOut:function(){return this.zoomBy(-1)},setZoom:function(a){return this.zoomBy(a-this.coordinate.zoom)},zoomByAbout:function(a,b){var c=this.pointLocation(b);this.coordinate=this.enforceLimits(this.coordinate.zoomBy(a));var d=this.locationPoint(c);return this.dispatchCallback("zoomed",a),this.panBy(b.x-d.x,b.y-d.y)},panBy:function(b,c){return this.coordinate.column-=b/this.tileSize.x,this.coordinate.row-=c/this.tileSize.y,this.coordinate=this.enforceLimits(this.coordinate),a.getFrame(this.getRedraw()),this.dispatchCallback("panned",[b,c]),this},panLeft:function(){return this.panBy(100,0)},panRight:function(){return this.panBy(-100,0)},panDown:function(){return this.panBy(0,-100)},panUp:function(){return this.panBy(0,100)},setCenter:function(a){return this.setCenterZoom(a,this.coordinate.zoom)},setCenterZoom:function(b,c){return this.coordinate=this.projection.locationCoordinate(b).zoomTo(parseFloat(c)||0),this.coordinate=this.enforceLimits(this.coordinate),a.getFrame(this.getRedraw()),this.dispatchCallback("centered",[b,c]),this},extentCoordinate:function(b,c){b instanceof a.Extent&&(b=b.toArray());var d,e;for(var f=0;f<b.length;f++){var g=this.projection.locationCoordinate(b[f]);d?(d.row=Math.min(d.row,g.row),d.column=Math.min(d.column,g.column),d.zoom=Math.min(d.zoom,g.zoom),e.row=Math.max(e.row,g.row),e.column=Math.max(e.column,g.column),e.zoom=Math.max(e.zoom,g.zoom)):(d=g.copy(),e=g.copy())}var h=this.dimensions.x+1,i=this.dimensions.y+1,j=(e.column-d.column)/(h/this.tileSize.x),k=Math.log(j)/Math.log(2),l=d.zoom-(c?k:Math.ceil(k)),m=(e.row-d.row)/(i/this.tileSize.y),n=Math.log(m)/Math.log(2),o=d.zoom-(c?n:Math.ceil(n)),p=Math.min(l,o);p=Math.min(p,this.coordLimits[1].zoom),p=Math.max(p,this.coordLimits[0].zoom);var q=(d.row+e.row)/2,r=(d.column+e.column)/2,s=d.zoom;return(new a.Coordinate(q,r,s)).zoomTo(p)},setExtent:function(b,c){return this.coordinate=this.extentCoordinate(b,c),this.coordinate=this.enforceLimits(this.coordinate),a.getFrame(this.getRedraw()),this.dispatchCallback("extentset",b),this},setSize:function(b){return this.dimensions=new a.Point(b.x,b.y),this.parent.style.width=Math.round(this.dimensions.x)+"px",this.parent.style.height=Math.round(this.dimensions.y)+"px",this.autoSize&&(a.removeEvent(window,"resize",this.windowResize()),this.autoSize=!1),this.draw(),this.dispatchCallback("resized",this.dimensions),this},coordinatePoint:function(b){b.zoom!=this.coordinate.zoom&&(b=b.zoomTo(this.coordinate.zoom));var c=new a.Point(this.dimensions.x/2,this.dimensions.y/2);return c.x+=this.tileSize.x*(b.column-this.coordinate.column),c.y+=this.tileSize.y*(b.row-this.coordinate.row),c},pointCoordinate:function(a){var b=this.coordinate.copy();return b.column+=(a.x-this.dimensions.x/2)/this.tileSize.x,b.row+=(a.y-this.dimensions.y/2)/this.tileSize.y,b},locationCoordinate:function(a){return this.projection.locationCoordinate(a)},coordinateLocation:function(a){return this.projection.coordinateLocation(a)},locationPoint:function(a){return this.coordinatePoint(this.locationCoordinate(a))},pointLocation:function(a){return this.coordinateLocation(this.pointCoordinate(a))},getExtent:function(){return new a.Extent(this.pointLocation(new a.Point(0,0)),this.pointLocation(this.dimensions))},extent:function(a,b){return a?this.setExtent(a,b):this.getExtent()},getCenter:function(){return this.projection.coordinateLocation(this.coordinate)},center:function(a){return a?this.setCenter(a):this.getCenter()},getZoom:function(){return this.coordinate.zoom},zoom:function(a){return a!==undefined?this.setZoom(a):this.getZoom()},getLayers:function(){return this.layers.slice()},getLayer:function(a){for(var b=0;b<this.layers.length;b++)if(a==this.layers[b].name)return this.layers[b]},getLayerAt:function(a){return this.layers[a]},addLayer:function(b){return this.layers.push(b),this.parent.appendChild(b.parent),b.map=this,this.coordinate&&a.getFrame(this.getRedraw()),this},removeLayer:function(a){for(var b=0;b<this.layers.length;b++)if(a==this.layers[b]||a==this.layers[b].name){this.removeLayerAt(b);break}return this},setLayerAt:function(b,c){if(b<0||b>=this.layers.length)throw new Error("invalid index in setLayerAt(): "+b);if(this.layers[b]!=c){if(b<this.layers.length){var d=this.layers[b];this.parent.insertBefore(c.parent,d.parent),d.destroy()}else this.parent.appendChild(c.parent);this.layers[b]=c,c.map=this,a.getFrame(this.getRedraw())}return this},insertLayerAt:function(b,c){if(b<0||b>this.layers.length)throw new Error("invalid index in insertLayerAt(): "+b);if(b==this.layers.length)this.layers.push(c),this.parent.appendChild(c.parent);else{var d=this.layers[b];this.parent.insertBefore(c.parent,d.parent),this.layers.splice(b,0,c)}return c.map=this,a.getFrame(this.getRedraw()),this},removeLayerAt:function(a){if(a<0||a>=this.layers.length)throw new Error("invalid index in removeLayer(): "+a);var b=this.layers[a];return this.layers.splice(a,1),b.destroy(),this},swapLayersAt:function(a,b){if(a<0||a>=this.layers.length||b<0||b>=this.layers.length)throw new Error("invalid index in swapLayersAt(): "+index);var c=this.layers[a],d=this.layers[b],e=document.createElement("div");return this.parent.replaceChild(e,d.parent),this.parent.replaceChild(d.parent,c.parent),this.parent.replaceChild(c.parent,e),this.layers[a]=d,this.layers[b]=c,this},enableLayer:function(a){var b=this.getLayer(a);return b&&b.enable(),this},enableLayerAt:function(a){var b=this.getLayerAt(a);return b&&b.enable(),this},disableLayer:function(a){var b=this.getLayer(a);return b&&b.disable(),this},disableLayerAt:function(a){var b=this.getLayerAt(a);return b&&b.disable(),this},enforceZoomLimits:function(a){var b=this.coordLimits;if(b){var c=b[0].zoom,d=b[1].zoom;a.zoom<c?a=a.zoomTo(c):a.zoom>d&&(a=a.zoomTo(d))}return a},enforcePanLimits:function(b){if(this.coordLimits){b=b.copy();var c=this.coordLimits[0].zoomTo(b.zoom),d=this.coordLimits[1].zoomTo(b.zoom),e=this.pointCoordinate(new a.Point(0,0)).zoomTo(b.zoom),f=this.pointCoordinate(this.dimensions).zoomTo(b.zoom);d.row-c.row<f.row-e.row?b.row=(d.row+c.row)/2:e.row<c.row?b.row+=c.row-e.row:f.row>d.row&&(b.row-=f.row-d.row),d.column-c.column<f.column-e.column?b.column=(d.column+c.column)/2:e.column<c.column?b.column+=c.column-e.column:f.column>d.column&&(b.column-=f.column-d.column)}return b},enforceLimits:function(a){return this.enforcePanLimits(this.enforceZoomLimits(a))},draw:function(){this.coordinate=this.enforceLimits(this.coordinate);if(this.dimensions.x<=0||this.dimensions.y<=0){if(!this.autoSize)return;var b=this.parent.offsetWidth,c=this.parent.offsetHeight;this.dimensions=new a.Point(b,c);if(b<=0||c<=0)return}for(var d=0;d<this.layers.length;d++)this.layers[d].draw();this.dispatchCallback("drawn")},_redrawTimer:undefined,requestRedraw:function(){this._redrawTimer||(this._redrawTimer=setTimeout(this.getRedraw(),1e3))},_redraw:null,getRedraw:function(){if(!this._redraw){var a=this;this._redraw=function(){a.draw(),a._redrawTimer=0}}return this._redraw},destroy:function(){for(var b=0;b<this.layers.length;b++)this.layers[b].destroy();this.layers=[],this.projection=null;for(var c=0;c<this.eventHandlers.length;c++)this.eventHandlers[c].remove();this.autoSize&&a.removeEvent(window,"resize",this.windowResize())}},a.mapByCenterZoom=function(b,c,d,e){var f=a.coerceLayer(c),g=new a.Map(b,f,!1);return g.setCenterZoom(d,e).draw(),g},a.mapByExtent=function(b,c,d,e){var f=a.coerceLayer(c),g=new a.Map(b,f,!1);return g.setExtent([d,e]).draw(),g},typeof module!="undefined"&&module.exports&&(module.exports={Point:a.Point,Projection:a.Projection,MercatorProjection:a.MercatorProjection,LinearProjection:a.LinearProjection,Transformation:a.Transformation,Location:a.Location,MapProvider:a.MapProvider,Template:a.Template,Coordinate:a.Coordinate,deriveTransformation:a.deriveTransformation})})(MM),function(a,b){var c=function(){function k(a,b,c){return c===0?a:c===1?b:a+(b-a)*c}var a={},c=!1,d=!1,e,f={easeIn:function(a){return a*a},easeOut:function(a){return Math.sin(a*Math.PI/2)},easeInOut:function(a){return(1-Math.cos(Math.PI*a))/2},linear:function(a){return a}},g=f.easeOut,h,i,j;a.stop=function(a){d=!0,h=undefined,e=a},a.running=function(){return c},a.point=function(b){return i=j.pointCoordinate(b),a},a.zoom=function(b){return i||(i=j.coordinate.copy()),i=j.enforceZoomLimits(i.zoomTo(b)),a},a.location=function(b){return i=j.locationCoordinate(b),a},a.from=function(b){return arguments.length?(h=b.copy(),a):h?h.copy():h},a.to=function(b){return arguments.length?(i=j.enforceZoomLimits(b.copy()),a):i.copy()},a.path=function(b){return n=l[b],a},a.easing=function(b){return g=f[b],a},a.map=function(b){return arguments.length?(j=b,a):j};var l={},m=new b.Coordinate(0,0,0);l.screen=function(a,c,d,e){var f=k(a.zoom,c.zoom,d);if(e)e.row=k(a.row,c.row*Math.pow(2,a.zoom-c.zoom),d)*Math.pow(2,f-a.zoom),e.column=k(a.column,c.column*Math.pow(2,a.zoom-c.zoom),d)*Math.pow(2,f-a.zoom),e.zoom=f;else return new b.Coordinate(k(a.row,c.row*Math.pow(2,a.zoom-c.zoom),d)*Math.pow(2,f-a.zoom),k(a.column,c.column*Math.pow(2,a.zoom-c.zoom),d)*Math.pow(2,f-a.zoom),f)},l.about=function(a,c,d,e){var f=k(a.zoom,c.zoom,d),g=j.dimensions.x/2,h=j.dimensions.y/2,i=j.tileSize.x,l=j.tileSize.y,m=g+i*(c.column*Math.pow(2,a.zoom-c.zoom)-a.column),n=h+l*(c.row*Math.pow(2,a.zoom-c.zoom)-a.row),o=g+i*(c.column*Math.pow(2,f-c.zoom)-a.column*Math.pow(2,f-a.zoom)),p=h+l*(c.row*Math.pow(2,f-c.zoom)-a.row*Math.pow(2,f-a.zoom));if(e)e.column=a.column*Math.pow(2,f-a.zoom)-(m-o)/i,e.row=a.row*Math.pow(2,f-a.zoom)-(n-p)/l,e.zoom=f;else return new b.Coordinate(a.column*Math.pow(2,f-a.zoom)-(m-o)/i,a.row*Math.pow(2,f-a.zoom)-(n-p)/l,f)};var n=l.screen;a.t=function(b){return n(h,i,g(b),m),j.coordinate=m,j.draw(),a},a.future=function(a){var b=[];for(var c=0;c<a;c++)b.push(n(h,i,c/(a-1)));return b};var o;return a.resetRun=function(){return o=+(new Date),a},a.run=function(f,k){function l(){var a=+(new Date)-o;if(d)return d=c=!1,e(),e=undefined;if(a>f){i.zoom!=h.zoom&&j.dispatchCallback("zoomed",i.zoom-h.zoom),c=!1,n(h,i,1,m),j.coordinate=m,i=h=undefined,j.draw();if(k)return k(j)}else n(h,i,g(a/f),m),j.coordinate=m,j.draw(),b.getFrame(l)}if(c)return a.stop(function(){a.run(f,k)});h||(h=j.coordinate.copy()),i||(i=j.coordinate.copy()),f=f||1e3,o=+(new Date),c=!0,b.getFrame(l)},a.optimal=function(d,e,f){function g(a){return a*a}function l(a){return(Math.exp(a)-Math.exp(-a))/2}function m(a){return(Math.exp(a)+Math.exp(-a))/2}function o(a){return l(a)/m(a)}function z(a){var b=g(s)-g(r)+(a?-1:1)*Math.pow(e,4)*g(y-x),c=2*(a?s:r)*g(e)*(y-x);return b/c}function A(a){return Math.log(-z(a)+Math.sqrt(g(z(a))+1))}if(c)return a.stop(function(){a.optimal(d,e,f)});d=d||.9,e=e||1.42,h?j.coordinate=h:h=j.coordinate.copy();var p=j.pointCoordinate(new b.Point(0,0)).zoomTo(0),q=j.pointCoordinate(j.dimensions).zoomTo(0),r=Math.max(q.column-p.column,q.row-p.row),s=r*Math.pow(2,h.zoom-i.zoom),t=h.zoomTo(0),u=i.zoomTo(0),v={x:t.column,y:t.row},w={x:u.column,y:u.row},x=0,y=Math.sqrt(g(w.x-v.x)+g(w.y-v.y)),B=A(0),C=A(1),D=(C-B)/e,E=function(a){return r*m(B)/m(e*a+B)},F=function(a){return r/g(e)*m(B)*o(e*a+B)-r/g(e)*l(B)+x};if(Math.abs(y)<1e-6){if(Math.abs(r-s)<1e-6)return;var G=s<r?-1:1;D=Math.abs(Math.log(s/r))/e,F=function(a){return x},E=function(a){return r*Math.exp(G*e*a)}}var H=n;n=function(a,c,d,e){if(d==1)return e&&(e.row=i.row,e.column=i.column,e.zoom=i.zoom),i;var f=d*D,g=F(f),h=a.zoom+Math.log(r/E(f))/Math.LN2,j=k(v.x,w.x,g/y||1),l=k(v.y,w.y,g/y||1),m=Math.pow(2,h);if(e)e.row=l*m,e.column=j*m,e.zoom=h;else return new b.Coordinate(l*m,j*m,h)},a.run(D/d*1e3,function(a){n=H,f&&f(a)})},a};this.easey=c,typeof this.mapbox=="undefined"&&(this.mapbox={}),this.mapbox.ease=c}(this,MM),function(a,b){function d(a,c){function o(d){var j=Math.max(1,d-n);h&&i?l||(f.x=h.x-i.x,f.y=h.y-i.y,a.panBy(f.x,f.y),l=!0):(e.x*=Math.pow(1-c,j*60/1e3),e.y*=Math.pow(1-c,j*60/1e3),Math.abs(e.x)<.001&&(e.x=0),Math.abs(e.y)<.001&&(e.y=0),(e.x||e.y)&&a.panBy(e.x*j,e.y*j)),n=d,g||b.getFrame(o)}var d={};c=c||.15;var e={x:0,y:0},f={x:0,y:0},g=!1,h=null,i=null,j=null,k=null,l=!0,m,n=(new Date).getTime();return d.down=function(c){h=i=b.getMousePoint(c,a),j=k=+(new Date)},d.move=function(c){h&&(l&&(i=h,k=j,l=!1),h=b.getMousePoint(c,a),j=+(new Date))},d.up=function(){+(new Date)-k<50?(dt=Math.max(1,j-k),f.x=h.x-i.x,f.y=h.y-i.y,e.x=f.x/dt,e.y=f.y/dt):(e.x=0,e.y=0),h=i=null,j=null},d.remove=function(){g=!0},b.getFrame(o),d}var c={};c.TouchHandler=function(){function q(a){c.parent.focus()}function r(){j=1,k=1;for(var a in i)i.hasOwnProperty(a)&&delete i[a]}function s(a){var b=a.scale===undefined?j:a.scale;for(var d=0;d<a.touches.length;d+=1){var e=a.touches[d];if(e.identifier in i){var f=i[e.identifier];f.x=e.clientX,f.y=e.clientY,f.scale=b}else i[e.identifier]={scale:b,startPos:{x:e.clientX,y:e.clientY},startZoom:c.zoom(),x:e.clientX,y:e.clientY,time:(new Date).getTime()}}}function t(a){e||(e=d(c,.1)),b.addEvent(a.touches[0].target,"touchmove",u),b.addEvent(a.touches[0].target,"touchend",z);if(a.touches[1]){b.addEvent(a.touches[1].target,"touchmove",u),b.addEvent(a.touches[1].target,"touchend",z);if(a.scale===undefined){var f=a.touches[0],g=a.touches[1],h=new b.Point(0,0),i=new b.Point(0,0);h.x=f.clientX,h.y=f.clientY,i.x=g.clientX,i.y=g.clientY,k=b.Point.distance(h,i)}}return s(a),e.down(a.touches[0]),b.cancelEvent(a)}function u(a){switch(a.touches.length){case 1:e.move(a.touches[0]);break;case 2:x(a)}return s(a),b.cancelEvent(a)}function v(a){if(l.length&&a.time-l[0].time<h){w(a),l=[];return}l=[a]}function w(a){easey().map(c).to(c.pointCoordinate(a).zoomTo(c.getZoom()+1)).path("about").run(200,function(){c.dispatchCallback("zoomed"),r()})}function x(a){var d=a.touches[0],e=a.touches[1];o.x=d.clientX,o.y=d.clientY,p.x=e.clientX,p.y=e.clientY,l0=i[d.identifier],l1=i[e.identifier],l0.wasPinch=!0,l1.wasPinch=!0;var f=b.Point.interpolate(o,p,.5),g=a.scale===undefined?j=b.Point.distance(o,p)/k:a.scale;c.zoomByAbout(Math.log(g)/Math.LN2-Math.log(l0.scale)/Math.LN2,f),prevX=l0.x+(l1.x-l0.x)*.5,prevY=l0.y+(l1.y-l0.y)*.5,c.panBy(f.x-prevX,f.y-prevY),m=!0,n=f}function y(a){var b=c.getZoom(),d=i[a.identifier].startZoom>b?Math.floor(b):Math.ceil(b);easey().map(c).point(n).zoom(d).path("about").run(300),r(),m=!1}function z(a){b.removeEvent(a.target,"touchmove",u),b.removeEvent(a.target,"touchend",z);var c=(new Date).getTime();a.touches.length<=1&&m&&y(a.changedTouches[0]),e.up();for(var d=0;d<a.changedTouches.length;d+=1){var h=a.changedTouches[d],j=i[h.identifier];if(!j||j.wasPinch)continue;var k={x:h.clientX,y:h.clientY},l=c-j.time,n=b.Point.distance(k,j.startPos);n>g||(l>f?(k.end=c,k.duration=l):(k.time=c,v(k)))}var o={};for(var p=0;p<a.touches.length;p++)o[a.touches[p].identifier]=!0;for(var q in i)q in o||delete o[q];return b.cancelEvent(a)}var a={},c,e,f=250,g=30,h=350,i={},j=1,k=1,l=[],m=!1,n=null,o=new b.Point(0,0),p=new b.Point(0,0);return a.init=function(a){c=a,b.addEvent(c.parent,"touchstart",t)},a.remove=function(){if(!e)return;b.removeEvent(c.parent,"touchstart",t),e.remove()},a},c.DoubleClickHandler=function(){function d(a){var d=b.getMousePoint(a,c);return z=c.getZoom()+(a.shiftKey?-1:1),easey().map(c).to(c.pointCoordinate(b.getMousePoint(a,c)).zoomTo(z)).path("about").run(100,function(){c.dispatchCallback("zoomed")}),b.cancelEvent(a)}var a={},c;return a.init=function(e){return c=e,b.addEvent(c.parent,"dblclick",d),a},a.remove=function(){b.removeEvent(c.parent,"dblclick",d)},a},c.MouseWheelHandler=function(){function h(a){function j(){c.dispatchCallback("zoomed")}var g=0;f=f||(new Date).getTime();try{d.scrollTop=1e3,d.dispatchEvent(a),g=1e3-d.scrollTop}catch(h){g=a.wheelDelta||-a.detail*5}var i=(new Date).getTime()-f;if(!e.running()){var k=b.getMousePoint(a,c),l=c.getZoom();e.map(c).easing("easeOut").to(c.pointCoordinate(b.getMousePoint(a,c)).zoomTo(l+(g>0?1:-1))).path("about").run(100,j),f=(new Date).getTime()}else i>150&&(e.zoom(e.to().zoom+(g>0?1:-1)).from(c.coordinate).resetRun(),f=(new Date).getTime());return b.cancelEvent(a)}var a={},c,d,e=easey(),f,g=!1;return a.init=function(e){c=e,d=document.body.appendChild(document.createElement("div")),d.style.cssText="visibility:hidden;top:0;height:0;width:0;overflow-y:scroll";var f=d.appendChild(document.createElement("div"));return f.style.height="2000px",b.addEvent(c.parent,"mousewheel",h),a},a.precise=function(b){return arguments.length?(g=b,a):g},a.remove=function(){b.removeEvent(c.parent,"mousewheel",h),d.parentNode.removeChild(d)},a},c.DragHandler=function(){function f(a){c.parent.focus()}function g(a){if(a.shiftKey||a.button==2)return;return b.addEvent(document,"mousemove",h),b.addEvent(document,"mouseup",i),e.down(a),c.parent.style.cursor="move",b.cancelEvent(a)}function h(a){return e.move(a),b.cancelEvent(a)}function i(a){return b.removeEvent(document,"mousemove",h),b.removeEvent(document,"mouseup",i),e.up(),c.parent.style.cursor="",b.cancelEvent(a)}var a={},c,e;return a.init=function(a){c=a,b.addEvent(c.parent,"click",f),b.addEvent(c.parent,"mousedown",g),e=d(c)},a.remove=function(){b.removeEvent(c.parent,"click",f),b.removeEvent(c.parent,"mousedown",g),e.up(),e.remove()},a},this.easey_handlers=c}(this,MM),function(a,b){function r(a,b){return function(){if(q.plugin.debug)return a.apply(this,arguments);try{return a.apply(this,arguments)}catch(c){q.plugin.errors.push({plugin:b,thrown:c,source:a.toString()}),this.emit("pluginerror",q.plugin.errors)}}}if(!b.addEventListener){a.Popcorn={isSupported:!1};var c="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);while(c.length)a.Popcorn[c.shift()]=function(){};return}var d=Array.prototype,e=Object.prototype,f=d.forEach,g=d.slice,h=e.hasOwnProperty,i=e.toString,j=a.Popcorn,k=[],l=!1,m=!1,n={events:{hash:{},apis:{}}},o=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b,c){a.setTimeout(b,16)}}(),p=function(a){return Object.keys?Object.keys(a):function(a){var b,c=[];for(b in a)h.call(a,b)&&c.push(b);return c}(a)},q=function(a,b){return new q.p.init(a,b||null)};q.version="1.3",q.isSupported=!0,q.instances=[],q.p=q.prototype={init:function(a,c){var d,e,f=this;if(typeof a=="function"){if(b.readyState==="complete"){a(b,q);return}k.push(a);if(!l){l=!0;var g=function(){m=!0,b.removeEventListener("DOMContentLoaded",g,!1);for(var a=0,c=k.length;a<c;a++)k[a].call(b,q);k=null};b.addEventListener("DOMContentLoaded",g,!1)}return}if(typeof a=="string")try{d=b.querySelector(a)}catch(h){throw new Error("Popcorn.js Error: Invalid media element selector: "+a)}this.media=d||a,e=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video",this[e]=this.media,this.options=c||{},this.id=this.options.id||q.guid(e);if(q.byId(this.id))throw new Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")");this.isDestroyed=!1,this.data={running:{cue:[]},timeUpdate:q.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:{byStart:[{start:-1,end:-1}],byEnd:[{start:-1,end:-1}],animating:[],startIndex:0,endIndex:0,previousUpdateTime:-1}},q.instances.push(this);var i=function(){f.media.currentTime<0&&(f.media.currentTime=0),f.media.removeEventListener("loadeddata",i,!1);var a,b,c,d,e,g;a=f.media.duration,b=a!=a?Number.MAX_VALUE:a+1,q.addTrackEvent(f,{start:b,end:b}),f.options.frameAnimation?(f.data.timeUpdate=function(){q.timeUpdate(f,{}),q.forEach(q.manifest,function(a,b){c=f.data.running[b];if(c){e=c.length;for(var h=0;h<e;h++)d=c[h],g=d._natives,g&&g.frame&&g.frame.call(f,{},d,f.currentTime())}}),f.emit("timeupdate"),!f.isDestroyed&&o(f.data.timeUpdate)},!f.isDestroyed&&o(f.data.timeUpdate)):(f.data.timeUpdate=function(a){q.timeUpdate(f,a)},f.isDestroyed||f.media.addEventListener("timeupdate",f.data.timeUpdate,!1))};return Object.defineProperty(this,"error",{get:function(){return f.media.error}}),f.media.readyState>=2?i():f.media.addEventListener("loadeddata",i,!1),this}},q.p.init.prototype=q.p,q.byId=function(a){var b=q.instances,c=b.length,d=0;for(;d<c;d++)if(b[d].id===a)return b[d];return null},q.forEach=function(a,b,c){if(!a||!b)return{};c=c||this;var d,e;if(f&&a.forEach===f)return a.forEach(b,c);if(i.call(a)==="[object NodeList]"){for(d=0,e=a.length;d<e;d++)b.call(c,a[d],d,a);return a}for(d in a)h.call(a,d)&&b.call(c,a[d],d,a);return a},q.extend=function(a){var b=a,c=g.call(arguments,1);return q.forEach(c,function(a){for(var c in a)b[c]=a[c]}),b},q.extend(q,{noConflict:function(b){return b&&(a.Popcorn=j),q},error:function(a){throw new Error(a)},guid:function(a){return q.guid.counter++,(a?a:"")+(+(new Date)+q.guid.counter)},sizeOf:function(a){var b=0;for(var c in a)b++;return b},isArray:Array.isArray||function(a){return i.call(a)==="[object Array]"},nop:function(){},position:function(c){var d=c.getBoundingClientRect(),e={},f=c.ownerDocument,g=b.documentElement,h=b.body,i,j,k,l,m,n;i=g.clientTop||h.clientTop||0,j=g.clientLeft||h.clientLeft||0,k=a.pageYOffset&&g.scrollTop||h.scrollTop,l=a.pageXOffset&&g.scrollLeft||h.scrollLeft,m=Math.ceil(d.top+k-i),n=Math.ceil(d.left+l-j);for(var o in d)e[o]=Math.round(d[o]);return q.extend({},e,{top:m,left:n})},disable:function(a,b){if(!a.data.disabled[b]){a.data.disabled[b]=!0;for(var c=a.data.running[b].length-1,d;c>=0;c--)d=a.data.running[b][c],d._natives.end.call(a,null,d)}return a},enable:function(a,b){if(a.data.disabled[b]){a.data.disabled[b]=!1;for(var c=a.data.running[b].length-1,d;c>=0;c--)d=a.data.running[b][c],d._natives.start.call(a,null,d)}return a},destroy:function(a){var b=a.data.events,c=a.data.trackEvents,d,e,f,g;for(e in b){d=b[e];for(f in d)delete d[f];b[e]=null}for(g in q.registryByName)q.removePlugin(a,g);c.byStart.length=0,c.byEnd.length=0,a.isDestroyed||(a.data.timeUpdate&&a.media.removeEventListener("timeupdate",a.data.timeUpdate,!1),a.isDestroyed=!0)}}),q.guid.counter=1,q.extend(q.p,function(){var a="load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended",b={};return q.forEach(a.split(/\s+/g),function(a){b[a]=function(b){var c;return typeof this.media[a]=="function"?(b!=null&&/play|pause/.test(a)&&(this.media.currentTime=q.util.toSeconds(b)),this.media[a](),this):b!=null?(c=this.media[a],this.media[a]=b,c!==b&&this.emit("attrchange",{attribute:a,previousValue:c,currentValue:b}),this):this.media[a]}}),b}()),q.forEach("enable disable".split(" "),function(a){q.p[a]=function(b){return q[a](this,b)}}),q.extend(q.p,{roundTime:function(){return Math.round(this.media.currentTime)},exec:function(a,b,c){var d=arguments.length,e,f;try{f=q.util.toSeconds(a)}catch(g){}typeof f=="number"&&(a=f);if(typeof a=="number"&&d===2)c=b,b=a,a=q.guid("cue");else if(d===1)b=-1;else{e=this.getTrackEvent(a);if(e)typeof a=="string"&&d===2&&(typeof b=="number"&&(c=e._natives.start),typeof b=="function"&&(c=b,b=e.start));else if(d>=2){if(typeof b=="string"){try{f=q.util.toSeconds(b)}catch(g){}b=f}typeof b=="number"&&(c=q.nop()),typeof b=="function"&&(c=b,b=-1)}}return q.addTrackEvent(this,{id:a,start:b,end:b+1,_running:!1,_natives:{start:c||q.nop,end:q.nop,type:"cue"}}),this},mute:function(a){var b=a==null||a===!0?"muted":"unmuted";return b==="unmuted"&&(this.media.muted=!1,this.media.volume=this.data.state.volume),b==="muted"&&(this.data.state.volume=this.media.volume,this.media.muted=!0),this.emit(b),this},unmute:function(a){return this.mute(a==null?!1:!a)},position:function(){return q.position(this.media)},toggle:function(a){return q[this.data.disabled[a]?"enable":"disable"](this,a)},defaults:function(a,b){return q.isArray(a)?(q.forEach(a,function(a){for(var b in a)this.defaults(b,a[b])},this),this):(this.options.defaults||(this.options.defaults={}),this.options.defaults[a]||(this.options.defaults[a]={}),q.extend(this.options.defaults[a],b),this)}}),q.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"},q.Events.Natives=q.Events.UIEvents+" "+q.Events.MouseEvents+" "+q.Events.Events,n.events.apiTypes=["UIEvents","MouseEvents","Events"],function(a,b){var c=n.events.apiTypes,d=a.Natives.split(/\s+/g),e=0,f=d.length,g;for(;e<f;e++)b.hash[d[e]]=!0;c.forEach(function(c,d){b.apis[c]={};var e=a[c].split(/\s+/g),f=e.length,g=0;for(;g<f;g++)b.apis[c][e[g]]=!0})}(q.Events,n.events),q.events={isNative:function(a){return!!n.events.hash[a]},getInterface:function(a){if(!q.events.isNative(a))return!1;var b=n.events,c=b.apiTypes,d=b.apis,e=0,f=c.length,g,h;for(;e<f;e++){h=c[e];if(d[h][a]){g=h;break}}return g},all:q.Events.Natives.split(/\s+/g),fn:{trigger:function(c,d){var e,f;if(this.data.events[c]&&q.sizeOf(this.data.events[c])){e=q.events.getInterface(c);if(e)return f=b.createEvent(e),f.initEvent(c,!0,!0,a,1),this.media.dispatchEvent(f),this;q.forEach(this.data.events[c],function(a,b){a.call(this,d)},this)}return this},listen:function(a,b){var c=this,d=!0,e=q.events.hooks[a],f=a,g;return this.data.events[a]||(this.data.events[a]={},d=!1),e&&(e.add&&e.add.call(this,{},b),e.bind&&(a=e.bind),e.handler&&(g=b,b=function(a){e.handler.call(c,a,g)}),d=!0,this.data.events[a]||(this.data.events[a]={},d=!1)),this.data.events[a][b.name||b.toString()+q.guid()]=b,!d&&q.events.all.indexOf(a)>-1&&this.media.addEventListener(a,function(b){q.forEach(c.data.events[a],function(a,d){typeof a=="function"&&a.call(c,b)})},!1),this},unlisten:function(a,b){return this.data.events[a]&&this.data.events[a][b]?(delete this.data.events[a][b],this):(this.data.events[a]=null,this)}},hooks:{canplayall:{bind:"canplaythrough",add:function(a,b){var c=!1;this.media.readyState&&(b.call(this,a),c=!0),this.data.hooks.canplayall={fired:c}},handler:function(a,b){this.data.hooks.canplayall.fired||(b.call(this,a),this.data.hooks.canplayall.fired=!0)}}}},q.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(a){q.p[a[0]]=q.p[a[1]]=q.events.fn[a[0]]}),q.addTrackEvent=function(a,b){var c,d,e;b.id&&(c=a.getTrackEvent(b.id)),c&&(d=!0,b=q.extend({},c,b),a.removeTrackEvent(b.id)),b&&b._natives&&b._natives.type&&a.options.defaults&&a.options.defaults[b._natives.type]&&(b=q.extend({},a.options.defaults[b._natives.type],b)),b._natives&&(b._id=b.id||b._id||q.guid(b._natives.type),a.data.history.push(b._id)),b.start=q.util.toSeconds(b.start,a.options.framerate),b.end=q.util.toSeconds(b.end,a.options.framerate);var f=a.data.trackEvents.byStart,g=a.data.trackEvents.byEnd,h,i;for(h=f.length-1;h>=0;h--)if(b.start>=f[h].start){f.splice(h+1,0,b);break}for(i=g.length-1;i>=0;i--)if(b.end>g[i].end){g.splice(i+1,0,b);break}b.end>a.media.currentTime&&b.start<=a.media.currentTime&&(b._running=!0,a.data.running[b._natives.type].push(b),a.data.disabled[b._natives.type]||b._natives.start.call(a,null,b)),h<=a.data.trackEvents.startIndex&&b.start<=a.data.trackEvents.previousUpdateTime&&a.data.trackEvents.startIndex++,i<=a.data.trackEvents.endIndex&&b.end<a.data.trackEvents.previousUpdateTime&&a.data.trackEvents.endIndex++,this.timeUpdate(a,null,!0),b._id&&q.addTrackEvent.ref(a,b),d&&(b._natives.type==="cue"?e="cuechange":e="trackchange",a.emit(e,{id:b.id,previousValue:{time:c.start,fn:c._natives.start},currentValue:{time:b.start,fn:b._natives.start}}))},q.addTrackEvent.ref=function(a,b){return a.data.trackRefs[b._id]=b,a},q.removeTrackEvent=function(a,b){var c,d,e,f=a.data.history.length,g=a.data.trackEvents.byStart.length,h=0,i=0,j=[],k=[],l=[],m=[];while(--g>-1)c=a.data.trackEvents.byStart[h],d=a.data.trackEvents.byEnd[h],c._id||(j.push(c),k.push(d)),c._id&&(c._id!==b&&j.push(c),d._id!==b&&k.push(d),c._id===b&&(i=h,c._natives._teardown&&c._natives._teardown.call(a,c))),h++;g=a.data.trackEvents.animating.length,h=0;if(g)while(--g>-1)e=a.data.trackEvents.animating[h],e._id||l.push(e),e._id&&e._id!==b&&l.push(e),h++;i<=a.data.trackEvents.startIndex&&a.data.trackEvents.startIndex--,i<=a.data.trackEvents.endIndex&&a.data.trackEvents.endIndex--,a.data.trackEvents.byStart=j,a.data.trackEvents.byEnd=k,a.data.trackEvents.animating=l;for(var n=0;n<f;n++)a.data.history[n]!==b&&m.push(a.data.history[n]);a.data.history=m,q.removeTrackEvent.ref(a,b)},q.removeTrackEvent.ref=function(a,b){return delete a.data.trackRefs[b],a},q.getTrackEvents=function(a){var b=[],c=a.data.trackEvents.byStart,d=c.length,e=0,f;for(;e<d;e++)f=c[e],f._id&&b.push(f);return b},q.getTrackEvents.ref=function(a){return a.data.trackRefs},q.getTrackEvent=function(a,b){return a.data.trackRefs[b]},q.getTrackEvent.ref=function(a,b){return a.data.trackRefs[b]},q.getLastTrackEventId=function(a){return a.data.history[a.data.history.length-1]},q.timeUpdate=function(a,b){var c=a.media.currentTime,d=a.data.trackEvents.previousUpdateTime,e=a.data.trackEvents,f=e.endIndex,g=e.startIndex,h=e.byStart.length,i=e.byEnd.length,j=q.registryByName,k="trackstart",l="trackend",m,n,o,p,r,s;if(d<=c){while(e.byEnd[f]&&e.byEnd[f].end<=c){m=e.byEnd[f],p=m._natives,r=p&&p.type;if(!!p&&!j[r]&&!a[r]){q.removeTrackEvent(a,m._id);return}m._running===!0&&(m._running=!1,s=a.data.running[r],s.splice(s.indexOf(m),1),a.data.disabled[r]||(p.end.call(a,b,m),a.emit(l,q.extend({},m,{plugin:r,type:l})))),f++}while(e.byStart[g]&&e.byStart[g].start<=c){n=e.byStart[g],p=n._natives,r=p&&p.type;if(!!p&&!j[r]&&!a[r]){q.removeTrackEvent(a,n._id);return}n.end>c&&n._running===!1&&(n._running=!0,a.data.running[r].push(n),a.data.disabled[r]||(p.start.call(a,b,n),a.emit(k,q.extend({},n,{plugin:r,type:k})))),g++}}else if(d>c){while(e.byStart[g]&&e.byStart[g].start>c){n=e.byStart[g],p=n._natives,r=p&&p.type;if(!!p&&!j[r]&&!a[r]){q.removeTrackEvent(a,n._id);return}n._running===!0&&(n._running=!1,s=a.data.running[r],s.splice(s.indexOf(n),1),a.data.disabled[r]||(p.end.call(a,b,n),a.emit(l,q.extend({},n,{plugin:r,type:l})))),g--}while(e.byEnd[f]&&e.byEnd[f].end>c){m=e.byEnd[f],p=m._natives,r=p&&p.type;if(!!p&&!j[r]&&!a[r]){q.removeTrackEvent(a,m._id);return}m.start<=c&&m._running===!1&&(m._running=!0,a.data.running[r].push(m),a.data.disabled[r]||(p.start.call(a,b,m),a.emit(k,q.extend({},m,{plugin:r,type:k})))),f--}}e.endIndex=f,e.startIndex=g,e.previousUpdateTime=c,e.byStart.length<h&&e.startIndex--,e.byEnd.length<i&&e.endIndex--},q.extend(q.p,{getTrackEvents:function(){return q.getTrackEvents.call(null,this)},getTrackEvent:function(a){return q.getTrackEvent.call(null,this,a)},getLastTrackEventId:function(){return q.getLastTrackEventId.call(null,this)},removeTrackEvent:function(a){return q.removeTrackEvent.call(null,this,a),this},removePlugin:function(a){return q.removePlugin.call(null,this,a),this},timeUpdate:function(a){return q.timeUpdate.call(null,this,a),this},destroy:function(){return q.destroy.call(null,this),this}}),q.manifest={},q.registry=[],q.registryByName={},q.plugin=function(a,b,c){if(q.protect.natives.indexOf(a.toLowerCase())>=0){q.error("'"+a+"' is a protected function name");return}var d=["start","end"],e={},f,i=typeof b=="function",j=["_setup","_teardown","start","end","frame"],k=function(a,b){return a=a||q.nop,b=b||q.nop,function(){a.apply(this,arguments),b.apply(this,arguments)}};q.manifest[a]=c=c||b.manifest||{},j.forEach(function(c){b[c]=r(b[c]||q.nop,a)});var l=function(b,e){if(!e)return this;if(e.ranges&&q.isArray(e.ranges))return q.forEach(e.ranges,function(b){var c=q.extend({},e,b);delete c.ranges,this[a](c)},this),this;var f=e._natives={},i="",l,m;return q.extend(f,b),e._natives.type=a,e._running=!1,f.start=f.start||f["in"],f.end=f.end||f.out,e.once&&(f.end=k(f.end,function(){this.removeTrackEvent(e._id)})),f._teardown=k(function(){var a=g.call(arguments),b=this.data.running[f.type];a.unshift(null),a[1]._running&&b.splice(b.indexOf(e),1)&&f.end.apply(this,a)},f._teardown),e.compose=e.compose&&e.compose.split(" ")||[],e.effect=e.effect&&e.effect.split(" ")||[],e.compose=e.compose.concat(e.effect),e.compose.forEach(function(a){i=q.compositions[a]||{},j.forEach(function(a){f[a]=k(f[a],i[a])})}),e._natives.manifest=c,"start"in e||(e.start=e["in"]||0),!e.end&&e.end!==0&&(e.end=e.out||Number.MAX_VALUE),h.call(e,"toString")||(e.toString=function(){var b=["start: "+e.start,"end: "+e.end,"id: "+(e.id||e._id)];return e.target!=null&&b.push("target: "+e.target),a+" ( "+b.join(", ")+" )"}),e.target||(m="options"in c&&c.options,e.target=m&&"target"in m&&m.target),e._natives&&(e._id=q.guid(e._natives.type)),e._natives._setup&&e._natives._setup.call(this,e),q.addTrackEvent(this,e),q.forEach(b,function(a,b){b!=="type"&&d.indexOf(b)===-1&&this.on(b,a)},this),this};q.p[a]=e[a]=function(c,d){var e=arguments.length,f,g,h;if(c&&!d)d=c,c=null;else{f=this.getTrackEvent(c);if(!f)d.id=c;else return d=q.extend({},f,d),q.addTrackEvent(this,d),this}return this.data.running[a]=this.data.running[a]||[],g=this.options.defaults&&this.options.defaults[a]||{},h=q.extend({},g,d),l.call(this,i?b.call(this,h):b,h)},c&&q.extend(b,{manifest:c});var m={fn:e[a],definition:b,base:b,parents:[],name:a};return q.registry.push(q.extend(e,m,{type:a})),q.registryByName[a]=m,e},q.plugin.errors=[],q.plugin.debug=q.version==="@VERSION",q.removePlugin=function(a,b){if(!b){b=a,a=q.p;if(q.protect.natives.indexOf(b.toLowerCase())>=0){q.error("'"+b+"' is a protected function name");return}var c=q.registry.length,d;for(d=0;d<c;d++)if(q.registry[d].name===b){q.registry.splice(d,1),delete q.registryByName[b],delete q.manifest[b],delete a[b];return}}var e=a.data.trackEvents.byStart,f=a.data.trackEvents.byEnd,g=a.data.trackEvents.animating,h,i;for(h=0,i=e.length;h<i;h++)e[h]&&e[h]._natives&&e[h]._natives.type===b&&(e[h]._natives._teardown&&e[h]._natives._teardown.call(a,e[h]),e.splice(h,1),h--,i--,a.data.trackEvents.startIndex<=h&&(a.data.trackEvents.startIndex--,a.data.trackEvents.endIndex--)),f[h]&&f[h]._natives&&f[h]._natives.type===b&&f.splice(h,1);for(h=0,i=g.length;h<i;h++)g[h]&&g[h]._natives&&g[h]._natives.type===b&&(g.splice(h,1),h--,i--)},q.compositions={},q.compose=function(a,b,c){q.manifest[a]=c=c||b.manifest||{},q.compositions[a]=b},q.plugin.effect=q.effect=q.compose;var s=/^(?:\.|#|\[)/;q.dom={debug:!1,find:function(a,c){var d=null;a=a.trim(),c=c||b;if(a){if(!s.test(a)){d=b.getElementById(a);if(d!==null)return d}try{d=c.querySelector(a)}catch(e){if(q.dom.debug)throw new Error(e)}}return d}};var t=/\?/,u={url:"",data:"",dataType:"",success:q.nop,type:"GET",async:!0,xhr:function(){return new a.XMLHttpRequest}};q.xhr=function(a){a.dataType=a.dataType&&a.dataType.toLowerCase()||null;if(!(!a.dataType||a.dataType!=="jsonp"&&a.dataType!=="script")){q.xhr.getJSONP(a.url,a.success,a.dataType==="script");return}var b=q.extend({},u,a);b.ajax=b.xhr();if(b.ajax)return b.type==="GET"&&b.data&&(b.url+=(t.test(b.url)?"&":"?")+b.data,b.data=null),b.ajax.open(b.type,b.url,b.async),b.ajax.send(b.data||null),q.xhr.httpData(b)},q.xhr.httpData=function(a){var b,c=null,d,e=null;return a.ajax.onreadystatechange=function(){if(a.ajax.readyState===4){try{c=JSON.parse(a.ajax.responseText)}catch(f){}b={xml:a.ajax.responseXML,text:a.ajax.responseText,json:c};if(!b.xml||!b.xml.documentElement){b.xml=null;try{d=new DOMParser,e=d.parseFromString(a.ajax.responseText,"text/xml"),e.getElementsByTagName("parsererror").length||(b.xml=e)}catch(f){}}a.dataType&&(b=b[a.dataType]),a.success.call(a.ajax,b)}},b},q.xhr.getJSONP=function(a,c,d){var e=b.head||b.getElementsByTagName("head")[0]||b.documentElement,f=b.createElement("script"),g=!1,h=[],i=/(=)\?(?=&|$)|\?\?/,j,k,l,m,n;d||(n=a.match(/(callback=[^&]*)/),n!==null&&n.length?(k=n[1].split("=")[1],k==="?"&&(k="jsonp"),m=q.guid(k),a=a.replace(/(callback=[^&]*)/,"callback="+m)):(m=q.guid("jsonp"),i.test(a)&&(a=a.replace(i,"$1"+m)),h=a.split(/\?(.+)?/),a=h[0]+"?",h[1]&&(a+=h[1]+"&"),a+="callback="+m),window[m]=function(a){c&&c(a),g=!0}),f.addEventListener("load",function(){d&&c&&c(),g&&delete window[m],e.removeChild(f)},!1),f.src=a,e.insertBefore(f,e.firstChild);return},q.getJSONP=q.xhr.getJSONP,q.getScript=q.xhr.getScript=function(a,b){return q.xhr.getJSONP(a,b,!0)},q.util={toSeconds:function(a,b){var c=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,d="Invalid time format",e,f,g,h,i,j;return typeof a=="number"?a:(typeof a=="string"&&!c.test(a)&&q.error(d),e=a.split(":"),f=e.length-1,g=e[f],g.indexOf(";")>-1&&(i=g.split(";"),j=0,b&&typeof b=="number"&&(j=parseFloat(i[1],10)/b),e[f]=parseInt(i[0],10)+j),h=e[0],{1:parseFloat(h,10),2:parseInt(h,10)*60+parseFloat(e[1],10),3:parseInt(h,10)*3600+parseInt(e[1],10)*60+parseFloat(e[2],10)}[e.length||1])}},q.p.cue=q.p.exec,q.protect={natives:p(q.p).map(function(a){return a.toLowerCase()})},q.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(a,b){var c=q.p[b];q.p[b]=function(){return typeof console!="undefined"&&console.warn&&(console.warn("Deprecated method '"+b+"', "+(a==null?"do not use.":"use '"+a+"' instead.")),q.p[b]=c),q.p[a].apply(this,[].slice.call(arguments))}}),a.Popcorn=q}(window,window.document),function(a,b){var c=a.document,d=a.location,e=/:\/\//,f=d.href.replace(d.href.split("/").slice(-1)[0],""),g=function(a,b,c){a=a||0,b=(b||a||0)+1,c=c||1;var d=Math.ceil((b-a)/c)||0,e=0,f=[];f.length=d;while(e<d)f[e++]=a,a+=c;return f};b.sequence=function(a,c){return new b.sequence.init(a,c)},b.sequence.init=function(a,d){this.parent=c.getElementById(a),this.seqId=b.guid("__sequenced"),this.queue=[],this.playlist=[],this.inOuts={ofVideos:[],ofClips:[]},this.dims={width:0,height:0},this.active=0,this.cycling=!1,this.playing=!1,this.times={last:0},this.events={};var g=this,h=0;return b.forEach(d,function(d,h){var i=c.createElement("video");i.preload="auto",i.controls=!0,i.style.display=h&&"none"||"",i.id=g.seqId+"-"+h,g.queue.push(i);var j=d["in"],k=d.out;g.inOuts.ofVideos.push({"in":j!==undefined&&j||1,out:k!==undefined&&k||0}),g.inOuts.ofVideos[h].out=g.inOuts.ofVideos[h].out||g.inOuts.ofVideos[h]["in"]+2,i.src=e.test(d.src)?d.src:f+d.src,i.setAttribute("data-sequence-owner",a),i.setAttribute("data-sequence-guid",g.seqId),i.setAttribute("data-sequence-id",h),i.setAttribute("data-sequence-clip",[g.inOuts.ofVideos[h]["in"],g.inOuts.ofVideos[h].out].join(":")),g.parent.appendChild(i),g.playlist.push(b("#"+i.id))}),g.inOuts.ofVideos.forEach(function(a){var b=a.out-a["in"],c={"in":h,out:h+b};g.inOuts.ofClips.push(c),h=c.out+1}),b.forEach(this.queue,function(a,c){function d(b){return c||(g.dims.width=a.videoWidth,g.dims.height=a.videoHeight),a.currentTime=g.inOuts.ofVideos[c]["in"]-.5,a.removeEventListener("canplaythrough",d,!1),!0}a.addEventListener("canplaythrough",d,!1),a.addEventListener("play",function(a){g.playing=!0},!1),a.addEventListener("pause",function(a){g.playing=!1},!1),a.addEventListener("timeupdate",function(c){var d=c.srcElement||c.target,e=+(d.dataset&&d.dataset.sequenceId||d.getAttribute("data-sequence-id")),f=Math.floor(a.currentTime);g.times.last!==f&&e===g.active&&(g.times.last=f,f===g.inOuts.ofVideos[e].out&&b.sequence.cycle.call(g,e))},!1)}),this},b.sequence.init.prototype=b.sequence.prototype,b.sequence.cycle=function(a){this.queue||b.error("Popcorn.sequence.cycle is not a public method");var c=this.queue,d=this.inOuts.ofVideos,e=c[a],f=0,g,h,i,j;return c[a+1]&&(f=a+1),c[a+1]?(g=c[f],h=d[f],b.extend(g,{width:this.dims.width,height:this.dims.height}),i=this.playlist[f],j=this.playlist[a],e.pause(),this.active=f,this.times.last=h["in"]-1,i.currentTime(h["in"]),i[f?"play":"pause"](),this.trigger("cycle",{position:{previous:a,current:f}}),f&&(e.style.display="none",g.style.display=""),this.cycling=!1):(f=0,this.playlist[a].pause()),this};var h=["timeupdate","play","pause"];b.extend(b.sequence.prototype,{eq:function(a){return this.playlist[a]},remove:function(){this.parent.innerHTML=null},clip:function(a){return this.inOuts.ofVideos[a]},duration:function(){var a=0,b=this.inOuts.ofClips,c=0;for(;c<b.length;c++)a+=b[c].out-b[c]["in"]+1;return a-1},play:function(){return this.playlist[this.active].play(),this},exec:function(a,c){var d=this.active;return this.inOuts.ofClips.forEach(function(b,c){a>=b["in"]&&a<=b.out&&(d=c)}),a+=this.inOuts.ofVideos[d]["in"]-this.inOuts.ofClips[d]["in"],b.addTrackEvent(this.playlist[d],{start:a-1,end:a,_running:!1,_natives:{start:c||b.nop,end:b.nop,type:"exec"}}),this},listen:function(a,c){var d=this,e=this.playlist,f=e.length,g=0,i;return c||(c=b.nop),b.Events.Natives.indexOf(a)>-1?b.forEach(e,function(b){b.listen(a,function(e){e.active=d,h.indexOf(a)>-1?c.call(b,e):++g===f&&c.call(b,e)})}):(this.events[a]||(this.events[a]={}),i=c.name||b.guid("__"+a),this.events[a][i]=c),this},unlisten:function(a,b){},trigger:function(a,c){var d=this;if(b.Events.Natives.indexOf(a)>-1)return;return this.events[a]&&b.forEach(this.events[a],function(b,e){b.call(d,{type:a},c)}),this}}),b.forEach(b.manifest,function(a,c){b.sequence.prototype[c]=function(a){var d={},e=[],f,h,i,j,k,l,m,n,o;for(f=0;f<this.inOuts.ofClips.length;f++)h=this.inOuts.ofClips[f],i=g(h["in"],h.out),j=i.indexOf(a.start),k=i.indexOf(a.end),j>-1&&(d[f]=b.extend({},h,{start:i[j],clipIdx:j})),k>-1&&(d[f]=b.extend({},h,{end:i[k],clipIdx:k}));l=Object.keys(d).map(function(a){return+a}),e=g(l[0],l[1]);for(f=0;f<e.length;f++){var p={},q=e[f],r=d[q];r?(m=this.inOuts.ofVideos[q],n=r.clipIdx,o=g(m["in"],m.out),r.start&&(p.start=o[n],p.end=o[o.length-1]),r.end&&(p.start=o[0],p.end=o[n])):(p.start=this.inOuts.ofVideos[q]["in"],p.end=this.inOuts.ofVideos[q].out),this.playlist[q][c](b.extend({},a,p))}return this}})}(this,Popcorn),function(a){document.addEventListener("DOMContentLoaded",function(){var b="data-timeline-sources",c=document.querySelectorAll("["+b+"]");a.forEach(c,function(d,e){var f=c[e],g=!1,h,i,j;f.id||(f.id=a.guid("__popcorn")),f.nodeType&&f.nodeType===1&&(j=a("#"+f.id),h=(f.getAttribute(b)||"").split(","),h[0]&&a.forEach(h,function(a){i=a.split("!"),i.length===1&&(i=a.match(/(.*)[\/\\]([^\/\\]+\.\w+)$/)[2].split("."),i[0]="parse"+i[1].toUpperCase(),i[1]=a),h[0]&&j[i[0]]&&j[i[0]](i[1])}),!j.autoplay()||j.play())})},!1)}(Popcorn),function(a,b){function d(a){var b=typeof a=="string"?a:[a.language,a.region].join("-"),c=b.split("-");return{iso6391:b,language:c[0]||"",region:c[1]||""}}var c=a.navigator,e=d(c.userLanguage||c.language);b.locale={get:function(){return e},set:function(a){return e=d(a),b.locale.broadcast(),e},broadcast:function(a){var c=b.instances,d=c.length,e=0,f;a=a||"locale:changed";for(;e<d;e++)f=c[e],a in f.data.events&&f.trigger(a)}}}(this,this.Popcorn),function(a){var b=Array.prototype,c=Object.prototype,d=b.forEach,e=b.slice,f=c.hasOwnProperty,g=c.toString;a.parsers={},a.parser=function(b,c,d){if(a.protect.natives.indexOf(b.toLowerCase())>=0){a.error("'"+b+"' is a protected function name");return}typeof c=="function"&&!d&&(d=c,c="");if(typeof d!="function"||typeof c!="string")return;var e=a.events.all,g,h={};return g=function(b,e){if(!b)return this;var g=this;return a.xhr({url:b,dataType:c,success:function(a){var b=d(a),c,h,i,j=0;c=b.data||[],h=c.length,i=null;if(!h)return;for(;j<h;j++){i=c[j];for(var k in i)f.call(i,k)&&!!g[k]&&g[k](i[k])}e&&e()}}),this},h[b]=g,a.extend(a.p,h),h}}(Popcorn),function(a){var b=function(b,c){return b=b||a.nop,c=c||a.nop,function(){b.apply(this,arguments),c.apply(this,arguments)}},c=/^(#([\w\-\_\.]+))$/,d="ogg|oga|aac|mp3|wav",e="ogg|ogv|mp4|webm",f=d+"|"+e,g=new RegExp("^.*\\.("+d+")($|\\?)"),h=new RegExp("^.*\\.("+f+")($|\\?)");a.player=function(c,d){if(a[c])return;d=d||{};var e=function(c,e,f){f=f||{};var g=new Date/1e3,h=g,i=0,j=0,k=1,l=!1,m={},n=typeof c=="string"?a.dom.find(c):c,o={},p,q;Object.prototype.__defineGetter__||(o=n||document.createElement("div"));for(var r in n){if(r in o)continue;typeof n[r]=="object"?o[r]=n[r]:typeof n[r]=="function"?o[r]=function(a){return"length"in n[a]&&!n[a].call?n[a]:function(){return n[a].apply(n,arguments)}}(r):a.player.defineProperty(o,r,{get:function(a){return function(){return n[a]}}(r),set:a.nop,configurable:!0})}var s=function(){g=new Date/1e3,o.paused||(o.currentTime=o.currentTime+(g-h),o.dispatchEvent("timeupdate"),p=setTimeout(s,10)),h=g};return o.play=function(){this.paused=!1,o.readyState>=4&&(h=new Date/1e3,o.dispatchEvent("play"),s())},o.pause=function(){this.paused=!0,o.dispatchEvent("pause")},a.player.defineProperty(o,"currentTime",{get:function(){return i},set:function(a){return i=+a,o.dispatchEvent("timeupdate"),i},configurable:!0}),a.player.defineProperty(o,"volume",{get:function(){return k},set:function(a){return k=+a,o.dispatchEvent("volumechange"),k},configurable:!0}),a.player.defineProperty(o,"muted",{get:function(){return l},set:function(a){return l=+a,o.dispatchEvent("volumechange"),l},configurable:!0}),a.player.defineProperty(o,"readyState",{get:function(){return j},set:function(a){return j=a,j},configurable:!0}),o.addEventListener=function(a,b){return m[a]||(m[a]=[]),m[a].push(b),b},o.removeEventListener=function(a,b){var c,d=m[a];if(!d)return;for(c=m[a].length-1;c>=0;c--)b===d[c]&&d.splice(c,1);return b},o.dispatchEvent=function(b){var c,d=this,e,f=b.type;f||(f=b,e=a.events.getInterface(f),e&&(c=document.createEvent(e),c.initEvent(f,!0,!0,window,1)));if(m[f])for(var g=m[f].length-1;g>=0;g--)m[f][g].call(d,c,d)},o.src=e||"",o.duration=0,o.paused=!0,o.ended=0,f&&f.events&&a.forEach(f.events,function(a,b){o.addEventListener(b,a,!1)}),d._canPlayType(n.nodeName,e)!==!1?d._setup?d._setup.call(o,f):(o.readyState=4,o.dispatchEvent("loadedmetadata"),o.dispatchEvent("loadeddata"),o.dispatchEvent("canplaythrough")):setTimeout(function(){o.dispatchEvent("error")},0),q=new a.p.init(o,f),d._teardown&&(q.destroy=b(q.destroy,function(){d._teardown.call(o,f)})),q};e.canPlayType=d._canPlayType=d._canPlayType||a.nop,a[c]=a.player.registry[c]=e},a.player.registry={},a.player.defineProperty=Object.defineProperty||function(b,c,d){b.__defineGetter__(c,d.get||a.nop),b.__defineSetter__(c,d.set||a.nop)},a.player.playerQueue=function(){var a=[],b=!1;return{next:function(){b=!1,a.shift(),a[0]&&a[0]()},add:function(c){a.push(function(){b=!0,c&&c()}),!b&&a[0]()}}},a.smart=function(b,c,d){var e,f=["AUDIO","VIDEO"],i,j,k=a.dom.find(b),l,m,n=document.createElement("video"),o={ogg:"video/ogg",ogv:"video/ogg",oga:"audio/ogg",webm:"video/webm",mp4:"video/mp4",mp3:"audio/mp3"},p=function(a){return n.canPlayType(o[a])},q=function(a){return m=h.exec(a),!m||!m[1]?!1:p(m[1])};if(!k){a.error("Specified target "+b+" was not found.");return}if(f.indexOf(k.nodeName)>-1&&!c)return typeof c=="object"&&(d=c,c=undefined),a(k,d);typeof c=="string"&&(c=[c]);for(l=0,srcLength=c.length;l<srcLength;l++){if(q(c[l])){c=c[l];break}for(var r in a.player.registry)if(a.player.registry.hasOwnProperty(r)&&a.player.registry[r].canPlayType(k.nodeName,c[l]))return a[r](k,c[l],d)}return f.indexOf(k.nodeName)===-1&&(j=typeof c=="string"?c:c.length?c[0]:c,b=document.createElement(g.exec(j)?f[0]:f[1]),b.controls=!0,k.appendChild(b),k=b),d&&d.events&&d.events.error&&k.addEventListener("error",d.events.error,!1),k.src=c,a(k,d)}}(Popcorn),function(a,b){var c="http://popcornjs.org/code/modules/player/popcorn.player.js",d=/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu|vimeo|soundcloud|baseplayer)/,e,f={},g={vimeo:!1,youtube:!1,soundcloud:!1,module:!1};Object.defineProperty(f,e,{get:function(){return g[e]},set:function(a){g[e]=a}}),a.plugin("mediaspawner",{manifest:{about:{name:"Popcorn Media Spawner Plugin",version:"0.1",author:"Matthew Schranz, @mjschranz",website:"mschranz.wordpress.com"},options:{source:{elem:"input",type:"text",label:"Media Source","default":"http://www.youtube.com/watch?v=CXDstfD9eJ0"},caption:{elem:"input",type:"text",label:"Media Caption","default":"Popcorn Popping",optional:!0},target:"mediaspawner-container",start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},autoplay:{elem:"input",type:"checkbox",label:"Autoplay Video",optional:!0},width:{elem:"input",type:"number",label:"Media Width","default":400,units:"px",optional:!0},height:{elem:"input",type:"number",label:"Media Height","default":200,units:"px",optional:!0}}},_setup:function(b){function k(){function c(){g!=="HTML5"&&!window.Popcorn[g]?setTimeout(function(){c()},300):(b.id=b._container.id,b._container.style.width=b.width+"px",b._container.style.height=b.height+"px",b.popcorn=a.smart("#"+b.id,b.source),g==="HTML5"&&b.popcorn.controls(!0),b._container.style.width="0px",b._container.style.height="0px",b._container.style.visibility="hidden",b._container.style.overflow="hidden")}g!=="HTML5"&&!window.Popcorn[g]&&!f[g]?(f[g]=!0,a.getScript("http://popcornjs.org/code/players/"+g+"/popcorn."+g+".js",function(){c()})):c()}function l(){window.Popcorn.player?k():setTimeout(function(){l()},300)}var e=document.getElementById(b.target)||{},g,h,i,j;j=d.exec(b.source),j?(g=j[1],g==="youtu"&&(g="youtube")):g="HTML5",b._type=g,b._container=document.createElement("div"),h=b._container,h.id="mediaSpawnerdiv-"+a.guid(),b.width=b.width||400,b.height=b.height||200,b.caption&&(i=document.createElement("div"),i.innerHTML=b.caption,i.style.display="none",b._capCont=i,h.appendChild(i)),e&&e.appendChild(h),!window.Popcorn.player&&!f.module?(f.module=!0,a.getScript(c,l)):l()},start:function(a,b){b._capCont&&(b._capCont.style.display=""),b._container.style.width=b.width+"px",b._container.style.height=b.height+"px",b._container.style.visibility="visible",b._container.style.overflow="visible",b.autoplay&&b.popcorn.play()},end:function(a,b){b._capCont&&(b._capCont.style.display="none"),b._container.style.width="0px",b._container.style.height="0px",b._container.style.visibility="hidden",b._container.style.overflow="hidden",b.popcorn.pause()},_teardown:function(a){a.popcorn&&a.popcorn.destory&&a.popcorn.destroy(),document.getElementById(a.target)&&document.getElementById(a.target).removeChild(a._container)}})}(Popcorn,this),function(a){a.plugin("code",function(b){var c=!1,d=this,e=function(){var a=function(a){return function(b,e){var f=function(){c&&b.call(d,e),c&&a(f)};f()}};return window.webkitRequestAnimationFrame?a(window.webkitRequestAnimationFrame):window.mozRequestAnimationFrame?a(window.mozRequestAnimationFrame):a(function(a){window.setTimeout(a,16)})}();if(!b.onStart||typeof b.onStart!="function")b.onStart=a.nop;return b.onEnd&&typeof b.onEnd!="function"&&(b.onEnd=undefined),b.onFrame&&typeof b.onFrame!="function"&&(b.onFrame=undefined),{start:function(a,b){b.onStart.call(d,b),b.onFrame&&(c=!0,e(b.onFrame,b))},end:function(a,b){b.onFrame&&(c=!1),b.onEnd&&b.onEnd.call(d,b)}}},{about:{name:"Popcorn Code Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},onStart:{elem:"input",type:"function",label:"onStart"},onFrame:{elem:"input",type:"function",label:"onFrame",optional:!0},onEnd:{elem:"input",type:"function",label:"onEnd"}}})}(Popcorn),function(a){var b=0;a.plugin("flickr",function(c){var d,e=document.getElementById(c.target),f,g,h,i,j=c.numberofimages||4,k=c.height||"50px",l=c.width||"50px",m=c.padding||"5px",n=c.border||"0px";d=document.createElement("div"),d.id="flickr"+b,d.style.width="100%",d.style.height="100%",d.style.display="none",b++,e&&e.appendChild(d);var o=function(){f?setTimeout(function(){o()},5):(g="http://api.flickr.com/services/rest/?method=flickr.people.findByUsername&",g+="username="+c.username+"&api_key="+c.apikey+"&format=json&jsoncallback=flickr",a.getJSONP(g,function(a){f=a.user.nsid,p()}))},p=function(){g="http://api.flickr.com/services/feeds/photos_public.gne?",f&&(g+="id="+f+"&"),c.tags&&(g+="tags="+c.tags+"&"),g+="lang=en-us&format=json&jsoncallback=flickr",a.xhr.getJSONP(g,function(b){var c=document.createElement("div");c.innerHTML="<p style='padding:"+m+";'>"+b.title+"<p/>",a.forEach(b.items,function(a,b){if(b<j)h=document.createElement("a"),h.setAttribute("href",a.link),h.setAttribute("target","_blank"),i=document.createElement("img"),i.setAttribute("src",a.media.m),i.setAttribute("height",k),i.setAttribute("width",l),i.setAttribute("style","border:"+n+";padding:"+m),h.appendChild(i),c.appendChild(h);else return!1}),d.appendChild(c)})};return c.username&&c.apikey?o():(f=c.userid,p()),{start:function(a,b){d.style.display="inline"},end:function(a,b){d.style.display="none"},_teardown:function(a){document.getElementById(a.target)&&document.getElementById(a.target).removeChild(d)}}},{about:{name:"Popcorn Flickr Plugin",version:"0.2",author:"Scott Downe, Steven Weerdenburg, Annasob",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},userid:{elem:"input",type:"text",label:"User ID",optional:!0},tags:{elem:"input",type:"text",label:"Tags"},username:{elem:"input",type:"text",label:"Username",optional:!0},apikey:{elem:"input",type:"text",label:"API Key",optional:!0},target:"flickr-container",height:{elem:"input",type:"text",label:"Height","default":"50px",optional:!0},width:{elem:"input",type:"text",label:"Width","default":"50px",optional:!0},padding:{elem:"input",type:"text",label:"Padding",optional:!0},border:{elem:"input",type:"text",label:"Border","default":"5px",optional:!0},numberofimages:{elem:"input",type:"number","default":4,label:"Number of Images"}}})}(Popcorn),function(a){a.plugin("footnote",{manifest:{about:{name:"Popcorn Footnote Plugin",version:"0.2",author:"@annasob, @rwaldron",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text"},target:"footnote-container"}},_setup:function(b){var c=a.dom.find(b.target);b._container=document.createElement("div"),b._container.style.display="none",b._container.innerHTML=b.text,c.appendChild(b._container)},start:function(a,b){b._container.style.display="inline"},end:function(a,b){b._container.style.display="none"},_teardown:function(b){var c=a.dom.find(b.target);c&&c.removeChild(b._container)}})}(Popcorn),function(a){function c(a,c){return String(a).replace(/&(?!\w+;)|[<>"']/g,function(a){return b[a]||a})}function d(a){return a.replace(/\r?\n/gm,"<br>")}function e(a,b){var c=a.container=document.createElement("div"),d=c.style,e=a.media,f=function(){var b=a.position();d.fontSize="18px",d.width=e.offsetWidth+"px",d.top=b.top+e.offsetHeight-c.offsetHeight-40+"px",d.left=b.left+"px",setTimeout(f,10)};return c.id=b||"",d.position="absolute",d.color="white",d.textShadow="black 2px 2px 6px",d.fontWeight="bold",d.textAlign="center",f(),a.media.parentNode.appendChild(c),c}var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};a.plugin("text",{manifest:{about:{name:"Popcorn Text Plugin",version:"0.1",author:"@humphd"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},escape:{elem:"input",type:"checkbox",label:"Escape"},multiline:{elem:"input",type:"checkbox",label:"Multiline"}}},_setup:function(b){var f,g,h=b._container=document.createElement("div");h.style.display="none",b.target?(f=a.dom.find(b.target),f?["VIDEO","AUDIO"].indexOf(f.nodeName)>-1&&(f=e(this,b.target+"-overlay")):f=e(this,b.target)):this.container?f=this.container:f=e(this),b._target=f,g=b.escape?c(b.text):b.text,g=b.multiline?d(g):g,h.innerHTML=g||"",f.appendChild(h)},start:function(a,b){b._container.style.display="inline"},end:function(a,b){b._container.style.display="none"},_teardown:function(a){var b=a._target;b&&b.removeChild(a._container)}})}(Popcorn);var googleCallback;(function(a){function g(a,b,c){var d=a.type?a.type.toUpperCase():"HYBRID",e;if(d==="STAMEN-WATERCOLOR"||d==="STAMEN-TERRAIN"||d==="STAMEN-TONER")e=d.replace("STAMEN-","").toLowerCase();var f=new google.maps.Map(c,{mapTypeId:e?e:google.maps.MapTypeId[d],mapTypeControlOptions:{mapTypeIds:[]}});return e&&f.mapTypes.set(e,new google.maps.StamenMapType(e)),f.getDiv().style.display="none",f}var b=1,c=!1,d=!1,e,f;googleCallback=function(b){typeof google!="undefined"&&google.maps&&google.maps.Geocoder&&google.maps.LatLng?(e=new google.maps.Geocoder,a.getScript("//maps.stamen.com/js/tile.stamen.js",function(){d=!0})):setTimeout(function(){googleCallback(b)},1)},f=function(){document.body?(c=!0,a.getScript("//maps.google.com/maps/api/js?sensor=false&callback=googleCallback")):setTimeout(function(){f()},1)},a.plugin("googlemap",function(a){var h,j,k,l=document.getElementById(a.target);a.type=a.type||"ROADMAP",a.zoom=a.zoom||1,a.lat=a.lat||0,a.lng=a.lng||0,c||f(),h=document.createElement("div"),h.id="actualmap"+b,h.style.width=a.width||"100%",a.height?h.style.height=a.height:l&&l.clientHeight?h.style.height=l.clientHeight+"px":h.style.height="100%",b++,l&&l.appendChild(h);var m=function(){d?h&&(a.location?e.geocode({address:a.location},function(b,c){h&&c===google.maps.GeocoderStatus.OK&&(a.lat=b[0].geometry.location.lat(),a.lng=b[0].geometry.location.lng(),k=new google.maps.LatLng(a.lat,a.lng),j=g(a,k,h))}):(k=new google.maps.LatLng(a.lat,a.lng),j=g(a,k,h))):setTimeout(function(){m()},5)};return m(),{start:function(a,b){var c=this,d,e=function(){if(j){b._map=j,j.getDiv().style.display="block",google.maps.event.trigger(j,"resize"),j.setCenter(k),b.zoom&&typeof b.zoom!="number"&&(b.zoom=+b.zoom),j.setZoom(b.zoom),b.heading&&typeof b.heading!="number"&&(b.heading=+b.heading),b.pitch&&typeof b.pitch!="number"&&(b.pitch=+b.pitch);if(b.type==="STREETVIEW"){j.setStreetView(d=new google.maps.StreetViewPanorama(h,{position:k,pov:{heading:b.heading=b.heading||0,pitch:b.pitch=b.pitch||0,zoom:b.zoom}}));var a=function(d,e){var h=google.maps.geometry.spherical.computeHeading;setTimeout(function(){var e=c.media.currentTime;if(typeof b.tween=="object"){for(var i=0,j=d.length;i<j;i++){var k=d[i];e>=k.interval*(i+1)/1e3&&(e<=k.interval*(i+2)/1e3||e>=k.interval*j/1e3)&&(o.setPosition(new google.maps.LatLng(k.position.lat,k.position.lng)),o.setPov({heading:k.pov.heading||h(k,d[i+1])||0,zoom:k.pov.zoom||0,pitch:k.pov.pitch||0}))}a(d,d[0].interval)}else{for(var l=0,m=d.length;l<m;l++){var n=b.interval;e>=n*(l+1)/1e3&&(e<=n*(l+2)/1e3||e>=n*m/1e3)&&(f.setPov({heading:h(d[l],d[l+1])||0,zoom:b.zoom,pitch:b.pitch||0}),f.setPosition(g[l]))}a(g,b.interval)}},e)};if(b.location&&typeof b.tween=="string"){var f=d,g=[],i=new google.maps.DirectionsService,l=new google.maps.DirectionsRenderer(f),m={origin:b.location,destination:b.tween,travelMode:google.maps.TravelMode.DRIVING};i.route(m,function(a,b){b==google.maps.DirectionsStatus.OK&&(l.setDirections(a),n(a,c))});var n=function(c,d){var e=c.routes[0].overview_path;for(var f=0,h=e.length;f<h;f++)g.push(new google.maps.LatLng(e[f].lat(),e[f].lng()));b.interval=b.interval||1e3,a(g,10)}}else if(typeof b.tween=="object"){var o=d;for(var p=0,q=b.tween.length;p<q;p++)b.tween[p].interval=b.tween[p].interval||1e3,a(b.tween,10)}}b.onmaploaded&&b.onmaploaded(b,j)}else setTimeout(function(){e()},13)};e()},end:function(a,b){j&&(j.getDiv().style.display="none")},_teardown:function(a){var b=document.getElementById(a.target);b&&b.removeChild(h),h=j=k=null,a._map=null}}},{about:{name:"Popcorn Google Map Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"start",label:"Start"},end:{elem:"input",type:"start",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","STREETVIEW","HYBRID","TERRAIN","STAMEN-WATERCOLOR","STAMEN-TERRAIN","STAMEN-TONER"],label:"Map Type",optional:!0},zoom:{elem:"input",type:"text",label:"Zoom","default":0,optional:!0},lat:{elem:"input",type:"text",label:"Lat",optional:!0},lng:{elem:"input",type:"text",label:"Lng",optional:!0},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},heading:{elem:"input",type:"text",label:"Heading","default":0,optional:!0},pitch:{elem:"input",type:"text",label:"Pitch","default":1,optional:!0}}})})(Popcorn),function(a){function d(a){function g(){var b=a.getBoundingClientRect(),c=e.getBoundingClientRect();c.left!==b.left&&(e.style.left=b.left+"px"),c.top!==b.top&&(e.style.top=b.top+"px")}var d=-1,e=document.createElement("div"),f=getComputedStyle(a).zIndex;return e.setAttribute("data-popcorn-helper-container",!0),e.style.position="absolute",isNaN(f)?e.style.zIndex=b:e.style.zIndex=f+1,document.body.appendChild(e),{element:e,start:function(){d=setInterval(g,c)},stop:function(){clearInterval(d),d=-1},destroy:function(){document.body.removeChild(e),d!==-1&&clearInterval(d)}}}var b=2e3,c=10;a.plugin("image",{manifest:{about:{name:"Popcorn image Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Image URL","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png"},href:{elem:"input",type:"url",label:"Link","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png",optional:!0},target:"image-container",text:{elem:"input",type:"text",label:"Caption","default":"Popcorn.js",optional:!0}}},_setup:function(b){var c=document.createElement("img"),e=document.getElementById(b.target);b.anchor=document.createElement("a"),b.anchor.style.position="relative",b.anchor.style.textDecoration="none",b.anchor.style.display="none",e&&(["VIDEO","AUDIO"].indexOf(e.nodeName)>-1?(b.trackedContainer=d(e),b.trackedContainer.element.appendChild(b.anchor)):e&&e.appendChild(b.anchor)),c.addEventListener("load",function(){c.style.borderStyle="none",b.anchor.href=b.href||b.src||"#",b.anchor.target="_blank";var d,f;c.style.height=e.style.height,c.style.width=e.style.width,b.anchor.appendChild(c),b.text&&(d=c.height/12+"px",f=document.createElement("div"),a.extend(f.style,{color:"black",fontSize:d,fontWeight:"bold",position:"relative",textAlign:"center",width:c.style.width||c.width+"px",zIndex:"10"}),f.innerHTML=b.text||"",f.style.top=(c.style.height.replace("px","")||c.height)/2-f.offsetHeight/2+"px",b.anchor.insertBefore(f,c))},!1),c.src=b.src},start:function(a,b){b.anchor.style.display="inline",b.trackedContainer&&b.trackedContainer.start()},end:function(a,b){b.anchor.style.display="none",b.trackedContainer&&b.trackedContainer.stop()},_teardown:function(a){a.trackedContainer?a.trackedContainer.destroy():a.anchor.parentNode&&a.anchor.parentNode.removeChild(a.anchor)}})}(Popcorn),function(a){var b=1,c=!1;a.plugin("googlefeed",function(d){var e=function(){var b=!1,d=0,e=document.getElementsByTagName("link"),f=e.length,g=document.head||document.getElementsByTagName("head")[0],h=document.createElement("link"),i="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.";window.GFdynamicFeedControl?c=!0:a.getScript(i+"js",function(){c=!0});for(;d<f;d++)e[d].href===i+"css"&&(b=!0);b||(h.type="text/css",h.rel="stylesheet",h.href=i+"css",g.insertBefore(h,g.firstChild))};window.google?e():a.getScript("//www.google.com/jsapi",function(){google.load("feeds","1",{callback:function(){e()}})});var f=document.createElement("div"),g=document.getElementById(d.target),h=function(){c?d.feed=new GFdynamicFeedControl(d.url,f,{vertical:d.orientation.toLowerCase()==="vertical"?!0:!1,horizontal:d.orientation.toLowerCase()==="horizontal"?!0:!1,title:d.title=d.title||"Blog"}):setTimeout(function(){h()},5)};if(!d.orientation||d.orientation.toLowerCase()!=="vertical"&&d.orientation.toLowerCase()!=="horizontal")d.orientation="vertical";return f.style.display="none",f.id="_feed"+b,f.style.width="100%",f.style.height="100%",b++,g&&g.appendChild(f),h(),{start:function(a,b){f.setAttribute("style","display:inline")},end:function(a,b){f.setAttribute("style","display:none")},_teardown:function(a){document.getElementById(a.target)&&document.getElementById(a.target).removeChild(f),delete a.feed}}},{about:{name:"Popcorn Google Feed Plugin",version:"0.1",author:"David Seifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",url:{elem:"input",type:"url",label:"Feed URL","default":"http://planet.mozilla.org/rss20.xml"},title:{elem:"input",type:"text",label:"Title","default":"Planet Mozilla",optional:!0},orientation:{elem:"select",options:["Vertical","Horizontal"],label:"Orientation","default":"Vertical",optional:!0}}})}(Popcorn),function(a){var b=0,c=function(b,c){var d=b.container=document.createElement("div"),e=d.style,f=b.media,g=function(){var a=b.position();e.fontSize="18px",e.width=f.offsetWidth+"px",e.top=a.top+f.offsetHeight-d.offsetHeight-40+"px",e.left=a.left+"px",setTimeout(g,10)};return d.id=c||a.guid(),e.position="absolute",e.color="white",e.textShadow="black 2px 2px 6px",e.fontWeight="bold",e.textAlign="center",g(),b.media.parentNode.appendChild(d),d};a.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"Start"},end:{elem:"input",type:"text",label:"End"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"}}},_setup:function(a){var d=document.createElement("div");d.id="subtitle-"+b++,d.style.display="none",!this.container&&(!a.target||a.target==="subtitle-container")&&c(this),a.target&&a.target!=="subtitle-container"?a.container=document.getElementById(a.target)||c(this,a.target):a.container=this.container,document.getElementById(a.container.id)&&document.getElementById(a.container.id).appendChild(d),a.innerContainer=d,a.showSubtitle=function(){a.innerContainer.innerHTML=a.text||""}},start:function(a,b){b.innerContainer.style.display="inline",b.showSubtitle(b,b.text)},end:function(a,b){b.innerContainer.style.display="none",b.innerContainer.innerHTML=""},_teardown:function(a){a.container.removeChild(a.innerContainer)}})}(Popcorn),function(a){var b=!1;a.plugin("twitter",{manifest:{about:{name:"Popcorn Twitter Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"text",label:"Tweet Source (# or @)","default":"@popcornjs"},target:"twitter-container",height:{elem:"input",type:"number",label:"Height","default":"200",optional:!0},width:{elem:"input",type:"number",label:"Width","default":"250",optional:!0}}},_setup:function(c){!window.TWTR&&!b&&(b=!0,a.getScript("//widgets.twimg.com/j/2/widget.js"));var d=document.getElementById(c.target);c.container=document.createElement("div"),c.container.setAttribute("id",a.guid()),c.container.style.display="none",d&&d.appendChild(c.container);var e=c.src||"",f=c.width||250,g=c.height||200,h=/^@/.test(e),i={version:2,id:c.container.getAttribute("id"),rpp:30,width:f,height:g,interval:6e3,theme:{shell:{background:"#ffffff",color:"#000000"},tweets:{background:"#ffffff",color:"#444444",links:"#1985b5"}},features:{loop:!0,timestamp:!0,avatars:!0,hashtags:!0,toptweets:!0,live:!0,scrollbar:!1,behavior:"default"}},j=function(a){window.TWTR?h?(i.type="profile",(new TWTR.Widget(i)).render().setUser(e).start()):(i.type="search",i.search=e,i.subject=e,(new TWTR.Widget(i)).render().start()):setTimeout(function(){j(a)},1)};j(this)},start:function(a,b){b.container.style.display="inline"},end:function(a,b){b.container.style.display="none"},_teardown:function(a){document.getElementById(a.target)&&document.getElementById(a.target).removeChild(a.container)}})}(Popcorn),function(a){a.plugin("webpage",{manifest:{about:{name:"Popcorn Webpage Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{id:{elem:"input",type:"text",label:"Id",optional:!0},start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Webpage URL","default":"http://mozillapopcorn.org"},target:"iframe-container"}},_setup:function(a){var b=document.getElementById(a.target);a.src=a.src.replace(/^(https?:)?(\/\/)?/,"//"),a._iframe=document.createElement("iframe"),a._iframe.setAttribute("width","100%"),a._iframe.setAttribute("height","100%"),a._iframe.id=a.id,a._iframe.src=a.src,a._iframe.style.display="none",b&&b.appendChild(a._iframe)},start:function(a,b){b._iframe.src=b.src,b._iframe.style.display="inline"},end:function(a,b){b._iframe.style.display="none"},_teardown:function(a){document.getElementById(a.target)&&document.getElementById(a.target).removeChild(a._iframe)}})}(Popcorn);var wikiCallback;(function(a){a.plugin("wikipedia",{manifest:{about:{name:"Popcorn Wikipedia Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},lang:{elem:"input",type:"text",label:"Language","default":"english",optional:!0},src:{elem:"input",type:"url",label:"Wikipedia URL","default":"http://en.wikipedia.org/wiki/Cat"},title:{elem:"input",type:"text",label:"Title","default":"Cats",optional:!0},numberofwords:{elem:"input",type:"number",label:"Number of Words","default":"200",optional:!0},target:"wikipedia-container"}},_setup:function(b){var c,d=a.guid();b.lang||(b.lang="en"),b.numberofwords=b.numberofwords||200,window["wikiCallback"+d]=function(a){b._link=document.createElement("a"),b._link.setAttribute("href",b.src),b._link.setAttribute("target","_blank"),b._link.innerHTML=b.title||a.parse.displaytitle,b._desc=document.createElement("p"),c=a.parse.text["*"].substr(a.parse.text["*"].indexOf("<p>")),c=c.replace(/((<(.|\n)+?>)|(\((.*?)\) )|(\[(.*?)\]))/g,""),c=c.split(" "),b._desc.innerHTML=c.slice(0,c.length>=b.numberofwords?b.numberofwords:c.length).join(" ")+" ...",b._fired=!0},b.src&&a.getScript("//"+b.lang+".wikipedia.org/w/api.php?action=parse&props=text&redirects&page="+b.src.slice(b.src.lastIndexOf("/")+1)+"&format=json&callback=wikiCallback"+d)},start:function(a,b){var c=function(){b._fired?b._link&&b._desc&&document.getElementById(b.target)&&(document.getElementById(b.target).appendChild(b._link),document.getElementById(b.target).appendChild(b._desc),b._added=!0):setTimeout(function(){c()},13)};c()},end:function(a,b){b._added&&(document.getElementById(b.target).removeChild(b._link),document.getElementById(b.target).removeChild(b._desc))},_teardown:function(a){a._added&&(a._link.parentNode&&document.getElementById(a.target).removeChild(a._link),a._desc.parentNode&&document.getElementById(a.target).removeChild(a._desc),delete a.target)}})})(Popcorn),function(a){a.plugin("mustache",function(b){var c,d,e,f;a.getScript("http://mustache.github.com/extras/mustache.js");var g=!!b.dynamic,h=typeof b.template,i=typeof b.data,j=document.getElementById(b.target);return b.container=j||document.createElement("div"),h==="function"?g?e=b.template:f=b.template(b):h==="string"?f=b.template:f="",i==="function"?g?c=b.data:d=b.data(b):i==="string"?d=JSON.parse(b.data):i==="object"?d=b.data:d="",{start:function(a,b){var g=function(){if(!window.Mustache)setTimeout(function(){g()},10);else{c&&(d=c(b)),e&&(f=e(b));var a=Mustache.to_html(f,d).replace(/^\s*/mg,"");b.container.innerHTML=a}};g()},end:function(a,b){b.container.innerHTML=""},_teardown:function(a){c=d=e=f=null}}},{about:{name:"Popcorn Mustache Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"mustache-container",template:{elem:"input",type:"text",label:"Template"},data:{elem:"input",type:"text",label:"Data"},dynamic:{elem:"input",type:"checkbox",label:"Dynamic","default":!0}}})}(Popcorn),function(a){function d(a,b){if(a.map){a.map.div.style.display=b;return}setTimeout(function(){d(a,b)},10)}var b,c=1;a.plugin("openmap",function(b){var e,f,g,h,j,k,l,m,n=document.getElementById(b.target);return e=document.createElement("div"),e.id="openmapdiv"+c,e.style.width="100%",e.style.height="100%",c++,n&&n.appendChild(e),m=function(){if(!window.OpenLayers||!window.OpenLayers.Layer.Stamen)setTimeout(function(){m()},50);else{b.location?(location=new OpenLayers.LonLat(0,0),a.getJSONP("//tinygeocoder.com/create-api.php?q="+b.location+"&callback=jsonp",function(a){f=new OpenLayers.LonLat(a[1],a[0])})):f=new OpenLayers.LonLat(b.lng,b.lat),b.type=b.type||"ROADMAP";switch(b.type){case"SATELLITE":b.map=new OpenLayers.Map({div:e,maxResolution:.28125,tileSize:new OpenLayers.Size(512,512)});var c=new OpenLayers.Layer.WorldWind("LANDSAT","//worldwind25.arc.nasa.gov/tile/tile.aspx",2.25,4,{T:"105"});b.map.addLayer(c),h=new OpenLayers.Projection("EPSG:4326"),g=new OpenLayers.Projection("EPSG:4326");break;case"TERRAIN":h=new OpenLayers.Projection("EPSG:4326"),g=new OpenLayers.Projection("EPSG:4326"),b.map=new OpenLayers.Map({div:e,projection:g});var d=new OpenLayers.Layer.WMS("USGS Terraserver","//terraserver-usa.org/ogcmap.ashx?",{layers:"DRG"});b.map.addLayer(d);break;case"STAMEN-TONER":case"STAMEN-WATERCOLOR":case"STAMEN-TERRAIN":var i=b.type.replace("STAMEN-","").toLowerCase(),j=new OpenLayers.Layer.Stamen(i);h=new OpenLayers.Projection("EPSG:4326"),g=new OpenLayers.Projection("EPSG:900913"),f=f.transform(h,g),b.map=new OpenLayers.Map({div:e,projection:g,displayProjection:h,controls:[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanPanel,new OpenLayers.Control.ZoomPanel]}),b.map.addLayer(j);break;default:g=new OpenLayers.Projection("EPSG:900913"),h=new OpenLayers.Projection("EPSG:4326"),f=f.transform(h,g),b.map=new OpenLayers.Map({div:e,projection:g,displayProjection:h});var k=new OpenLayers.Layer.OSM;b.map.addLayer(k)}b.map&&(b.map.setCenter(f,b.zoom||10),b.map.div.style.display="none")}},m(),{_setup:function(b){window.OpenLayers||a.getScript("//openlayers.org/api/OpenLayers.js",function(){a.getScript("//maps.stamen.com/js/tile.stamen.js")});var c=function(){if(!b.map)setTimeout(function(){c()},13);else{b.zoom=b.zoom||2,b.zoom&&typeof b.zoom!="number"&&(b.zoom=+b.zoom),b.map.setCenter(f,b.zoom);if(b.markers){var d=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]),e=function(a){clickedFeature=a.feature;if(!clickedFeature.attributes.text)return;l=new OpenLayers.Popup.FramedCloud("featurePopup",clickedFeature.geometry.getBounds().getCenterLonLat(),new OpenLayers.Size(120,250),clickedFeature.attributes.text,null,!0,function(a){k.unselect(this.feature)}),clickedFeature.popup=l,l.feature=clickedFeature,b.map.addPopup(l)},i=function(a){feature=a.feature,feature.popup&&(l.feature=null,b.map.removePopup(feature.popup),feature.popup.destroy(),feature.popup=null)},m=function(b){a.getJSONP("//tinygeocoder.com/create-api.php?q="+b.location+"&callback=jsonp",function(a){var c=(new OpenLayers.Geometry.Point(a[1],a[0])).transform(h,g),e=OpenLayers.Util.extend({},d);if(!b.size||isNaN(b.size))b.size=14;e.pointRadius=b.size,e.graphicOpacity=1,e.externalGraphic=b.icon;var f=new OpenLayers.Feature.Vector(c,null,e);b.text&&(f.attributes={text:b.text}),j.addFeatures([f])})};j=new OpenLayers.Layer.Vector("Point Layer",{style:d}),b.map.addLayer(j);for(var n=0,o=b.markers.length;n<o;n++){var p=b.markers[n];p.text&&(k||(k=new OpenLayers.Control.SelectFeature(j),b.map.addControl(k),k.activate(),j.events.on({featureselected:e,featureunselected:i})));if(p.location){var q=m;q(p)}else{var r=(new OpenLayers.Geometry.Point(p.lng,p.lat)).transform(h,g),s=OpenLayers.Util.extend({},d);if(!p.size||isNaN(p.size))p.size=14;s.pointRadius=p.size,s.graphicOpacity=1,s.externalGraphic=p.icon;var t=new OpenLayers.Feature.Vector(r,null,s);p.text&&(t.attributes={text:p.text}),j.addFeatures([t])}}}}};c()},start:function(a,b){d(b,"block")},end:function(a,b){d(b,"none")},_teardown:function(a){n&&n.removeChild(e),e=map=f=g=h=j=k=l=null}}},{about:{name:"Popcorn OpenMap Plugin",version:"0.3",author:"@mapmeld",website:"mapadelsur.blogspot.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","TERRAIN"],label:"Map Type",optional:!0},zoom:{elem:"input",type:"number",label:"Zoom","default":2},lat:{elem:"input",type:"text",label:"Lat",optional:!0},lng:{elem:"input",type:"text",label:"Lng",optional:!0},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},markers:{elem:"input",type:"text",label:"List Markers",optional:!0}}})}(Popcorn),document.addEventListener("click",function(a){var b=a.target;(b.nodeName==="A"||b.parentNode&&b.parentNode.nodeName==="A")&&Popcorn.instances.forEach(function(a){a.options.pauseOnLinkClicked&&a.pause()})},!1),function(a){var b={},c=0,d=function(a){b[a]=document.createElement("div");var c=document.getElementById(a);return c&&c.appendChild(b[a]),b[a].style.height="100%",b[a].style.position="relative",b[a]},e=document.createElement("span"),f=["webkit","Moz","ms","O",""],g=["Transform","TransitionDuration","TransitionTimingFunction"],h={},i;document.getElementsByTagName("head")[0].appendChild(e);for(var j=0,k=g.length;j<k;j++)for(var l=0,m=f.length;l<m;l++){i=f[l]+g[j];if(i in e.style){h[g[j].toLowerCase()]=i;break}}document.getElementsByTagName("head")[0].appendChild(e),a.plugin("wordriver",{manifest:{about:{name:"Popcorn WordRiver Plugin"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"wordriver-container",text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},color:{elem:"input",type:"text",label:"Color","default":"Green",optional:!0}}},_setup:function(a){a._duration=a.end-a.start,a._container=b[a.target]||d(a.target),a.word=document.createElement("span"),a.word.style.position="absolute",a.word.style.whiteSpace="nowrap",a.word.style.opacity=0,a.word.style.MozTransitionProperty="opacity, -moz-transform",a.word.style.webkitTransitionProperty="opacity, -webkit-transform",a.word.style.OTransitionProperty="opacity, -o-transform",a.word.style.transitionProperty="opacity, transform",a.word.style[h.transitionduration]="1s, "+a._duration+"s",a.word.style[h.transitiontimingfunction]="linear",a.word.innerHTML=a.text,a.word.style.color=a.color||"black"},start:function(a,b){b._container.appendChild(b.word),b.word.style[h.transform]="",b.word.style.fontSize=~~(30+20*Math.random())+"px",c%=b._container.offsetWidth-b.word.offsetWidth,b.word.style.left=c+"px",c+=b.word.offsetWidth+10,b.word.style[h.transform]="translateY("+(b._container.offsetHeight-b.word.offsetHeight)+"px)",b.word.style.opacity=1,setTimeout(function(){b.word.style.opacity=0},(b.end-b.start-1||1)*1e3)},end:function(a,b){b.word.style.opacity=0},_teardown:function(a){var c=document.getElementById(a.target);a.word.parentNode&&a._container.removeChild(a.word),b[a.target]&&!b[a.target].childElementCount&&c&&c.removeChild(b[a.target])&&delete b[a.target]}})}(Popcorn),function(a){var b=1;a.plugin("timeline",function(a){var c=document.getElementById(a.target),d=document.createElement("div"),e,f=!0;return c&&!c.firstChild?(c.appendChild(e=document.createElement("div")),e.style.width="inherit",e.style.height="inherit",e.style.overflow="auto"):e=c.firstChild,d.style.display="none",d.id="timelineDiv"+b,a.direction=a.direction||"up",a.direction.toLowerCase()==="down"&&(f=!1),c&&e&&(f?e.insertBefore(d,e.firstChild):e.appendChild(d)),b++,d.innerHTML="<p><span id='big' style='font-size:24px; line-height: 130%;' >"+a.title+"</span><br />"+"<span id='mid' style='font-size: 16px;'>"+a.text+"</span><br />"+a.innerHTML,{start:function(a,b){d.style.display="block",b.direction==="down"&&(e.scrollTop=e.scrollHeight)},end:function(a,b){d.style.display="none"},_teardown:function(a){e&&d&&e.removeChild(d)&&!e.firstChild&&c.removeChild(e)}}},{about:{name:"Popcorn Timeline Plugin",version:"0.1",author:"David Seifried @dcseifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",title:{elem:"input",type:"text",label:"Title"},text:{elem:"input",type:"text",label:"Text"},innerHTML:{elem:"input",type:"text",label:"HTML Code",optional:!0},direction:{elem:"select",options:["DOWN","UP"],label:"Direction",optional:!0}}})}(Popcorn),function(a,b){var c={};a.plugin("documentcloud",{manifest:{about:{name:"Popcorn Document Cloud Plugin",version:"0.1",author:"@humphd, @ChrisDeCairos",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"documentcloud-container",width:{elem:"input",type:"text",label:"Width",optional:!0},height:{elem:"input",type:"text",label:"Height",optional:!0},src:{elem:"input",type:"url",label:"PDF URL","default":"http://www.documentcloud.org/documents/70050-urbina-day-1-in-progress.html"},preload:{elem:"input",type:"checkbox",label:"Preload","default":!0},page:{elem:"input",type:"number",label:"Page Number",optional:!0},aid:{elem:"input",type:"number",label:"Annotation Id",optional:!0}}},_setup:function(d){function g(){function v(a){d._key=a.api.getId(),d._changeView=function(a){d.aid?a.pageSet.showAnnotation(a.api.getAnnotation(d.aid)):a.api.setCurrentPage(d.page)}}function w(b){var f=!1;return a.forEach(e.viewers,function(a,g){if(a.api.getSchema().canonicalURL===b){var h;v(a),h=c[d._key],d._containerId=h.id,h.num+=1,f=!0,e.loaded=!0}}),f}function x(){var a={num:1,id:d._containerId};c[d._key]=a,e.loaded=!0}e.loaded=!1;var g=d.url.replace(/\.html$/,".js"),h=d.target,i=b.getElementById(h),j=b.createElement("div"),k=a.position(i),l=d.width||k.width,m=d.height||k.height,n=d.sidebar||!0,o=d.text||!0,p=d.pdf||!0,q=d.showAnnotations||!0,r=d.zoom||700,s=d.search||!0,t=d.page,u;if(!w(d.url)){j.id=d._containerId=a.guid(h),u="#"+j.id,i.appendChild(j),f.trigger("documentready");var y=d.page||d.aid?function(a){v(a),d._changeView(a),j.style.visibility="hidden",a.elements.pages.hide(),x()}:function(a){v(a),x(),j.style.visibility="hidden",a.elements.pages.hide()};e.load(g,{width:l,height:m,sidebar:n,text:o,pdf:p,showAnnotations:q,zoom:r,search:s,container:u,afterLoad:y})}}function h(){window.DV.loaded?g():setTimeout(h,25)}var e=window.DV=window.DV||{},f=this;if(!e.loading){e.loading=!0,e.recordHit="//www.documentcloud.org/pixel.gif";var i=b.createElement("link"),j=b.getElementsByTagName("head")[0];i.rel="stylesheet",i.type="text/css",i.media="screen",i.href="//s3.documentcloud.org/viewer/viewer-datauri.css",j.appendChild(i),e.loaded=!1,a.getScript("http://s3.documentcloud.org/viewer/viewer.js",function(){e.loading=!1,g()})}else h()},start:function(a,c){var d=b.getElementById(c._containerId),e=DV.viewers[c._key];(c.page||c.aid)&&e&&c._changeView(e),d&&e&&(d.style.visibility="visible",e.elements.pages.show())},end:function(a,c){var d=b.getElementById(c._containerId);d&&DV.viewers[c._key]&&(d.style.visibility="hidden",DV.viewers[c._key].elements.pages.hide())},_teardown:function(a){var d=b.getElementById(a._containerId),e=a._key;if(e&&DV.viewers[e]&&--c[e].num===0){DV.viewers[e].api.unload();while(d.hasChildNodes())d.removeChild(d.lastChild);d.parentNode.removeChild(d)}}})}(Popcorn,window.document),function(a){a.parser("parseJSON","JSON",function(b){var c={title:"",remote:"",data:[]},d={},e=b;return a.forEach(e.data,function(a,b){c.data.push(a)}),c})}(Popcorn),function(a){a.parser("parseSBV",function(a){var b={title:"",remote:"",data:[]},c=[],d,e=0,f=0,g=0,h=function(a){var b=a.split(":"),c=b.length-1,d;try{d=parseInt(b[c-1],10)*60+parseFloat(b[c],10),c===2&&(d+=parseInt(b[0],10)*3600)}catch(e){throw"Bad cue"}return d},i=function(a,b){var c={};return c[a]=b,c};d=a.text.split(/(?:\r\n|\r|\n)/gm),f=d.length;while(e<f){var j={},k=[],l=d[e++].split(",");try{j.start=h(l[0]),j.end=h(l[1]);while(e<f&&d[e])k.push(d[e++]);j.text=k.join("<br />"),c.push(i("subtitle",j))}catch(m){while(e<f&&d[e])e++}while(e<f&&!d[e])e++}return b.data=c,b})}(Popcorn),function(a){function b(a,b){var c={};return c[a]=b,c}function c(a){var b=a.split(":");try{var c=b[2].split(",");return c.length===1&&(c=b[2].split(".")),parseFloat(b[0],10)*3600+parseFloat(b[1],10)*60+parseFloat(c[0],10)+parseFloat(c[1],10)/1e3}catch(d){return 0}}function d(a){var b=a.length-1;while(b>=0&&!a[b])b--;return b}a.parser("parseSRT",function(a){var e={title:"",remote:"",data:[]},f=[],g=0,h=0,i,j,k,l,m;i=a.text.split(/(?:\r\n|\r|\n)/gm),l=d(i)+1;for(g=0;g<l;g++){m={},k=[],m.id=parseInt(i[g++],10),j=i[g++].split(/[\t ]*-->[\t ]*/),m.start=c(j[0]),h=j[1].indexOf(" "),h!==-1&&(j[1]=j[1].substr(0,h)),m.end=c(j[1]);while(g<l&&i[g])k.push(i[g++]);m.text=k.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,""),m.text=m.text.replace(/</g,"&lt;").replace(/>/g,"&gt;"),m.text=m.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w\-]*\w)(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>"),m.text=m.text.replace(/\\N/gi,"<br />"),f.push(b("subtitle",m))}return e.data=f,e})}(Popcorn),function(a){function b(a,b){var e=a.substr(10).split(","),f=/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,g=/\\N/gi,h;h={start:c(e[b.start]),end:c(e[b.end])};if(h.start===-1||h.end===-1)throw"Invalid time";return h.text=d(e,b.text).replace(f,"").replace(g,"<br />"),h}function c(a){var b=a.split(":");return a.length!==10||b.length<3?-1:parseInt(b[0],10)*3600+parseInt(b[1],10)*60+parseFloat(b[2],10)}function d(a,b){var c=a.length,d=[],e=b;for(;e<c;e++)d.push(a[e]);return d.join(",")}function e(a,b){var c={};return c[a]=b,c}function f(a){var b=a.substr(8).split(", "),c={},d,e;for(e=0,d=b.length;e<d;e++)b[e]==="Start"?c.start=e:b[e]==="End"?c.end=e:b[e]==="Text"&&(c.text=e);return c}a.parser("parseSSA",function(a){var c={title:"",remote:"",data:[]},d=/(?:\r\n|\r|\n)/gm,g=[],h,i,j=0,k;h=a.text.split(d),k=h.length;while(j<k&&h[j]!=="[Events]")j++;i=f(h[++j]);while(++j<k&&h[j]&&h[j][0]!=="[")try{g.push(e("subtitle",b(h[j],i)))}catch(l){}return c.data=g,c})}(Popcorn),function(a){function d(a,b,c){var h=a.firstChild,i=e(a,c),j=[],k;while(h)h.nodeType===1&&(h.nodeName==="p"?j.push(f(h,b,i)):h.nodeName==="div"&&(k=g(h.getAttribute("begin")),k<0&&(k=b),j.push.apply(j,d(h,k,i)))),h=h.nextSibling;return j}function e(a,b){var c=a.getAttribute("region");return c!==null?c:b||""}function f(a,d,f){var h={};return h.text=(a.textContent||a.text).replace(b,"").replace(c,"<br />"),h.id=a.getAttribute("xml:id")||a.getAttribute("id"),h.start=g(a.getAttribute("begin"),d),h.end=g(a.getAttribute("end"),d),h.target=e(a,f),h.end<0&&(h.end=g(a.getAttribute("duration"),0),h.end>=0?h.end+=h.start:h.end=Number.MAX_VALUE),{subtitle:h}}function g(b,c){var d;if(!b)return-1;try{return a.util.toSeconds(b)}catch(e){return d=h(b),parseFloat(b.substring(0,d))*i(b.substring(d))+(c||0)}}function h(a){var b=a.length-1;while(b>=0&&a[b]<="9"&&a[b]>="0")b--;return b}function i(a){return{h:3600,m:60,s:1,ms:.001}[a]||-1}var b=/^[\s]+|[\s]+$/gm,c=/(?:\r\n|\r|\n)/gm;a.parser("parseTTML",function(a){var b={title:"",remote:"",data:[]},c;if(!a.xml||!a.xml.documentElement)return b;c=a.xml.documentElement.firstChild;if(!c)return b;while(c.nodeName!=="body")c=c.nextSibling;return c&&(b.data=d(c,0)),b})}(Popcorn),function(a){a.parser("parseTTXT",function(a){var b={title:"",remote:"",data:[]},c=function(a){var b=a.split(":"),c=0;try{return parseFloat(b[0],10)*60*60+parseFloat(b[1],10)*60+parseFloat(b[2],10)}catch(d){c=0}return c},d=function(a,b){var c={};return c[a]=b,c},e=a.xml.lastChild.lastChild,f=Number.MAX_VALUE,g=[];while(e){if(e.nodeType===1&&e.nodeName==="TextSample"){var h={};h.start=c(e.getAttribute("sampleTime")),h.text=e.getAttribute("text"),h.text&&(h.end=f-.001,g.push(d("subtitle",h))),f=h.start}e=e.previousSibling}return b.data=g.reverse(),b})}(Popcorn),function(a){function b(a){var b=a.split(":"),c=a.length,d;if(c!==12&&c!==9)throw"Bad cue";c=b.length-1;try{d=parseInt(b[c-1],10)*60+parseFloat(b[c],10),c===2&&(d+=parseInt(b[0],10)*3600)}catch(e){throw"Bad cue"}return d}function c(a,b){var c={};return c[a]=b,c}function d(a){var c,d,e={},f=/-->/,g=/[\t ]+/;if(!a||a.indexOf("-->")===-1)throw"Bad cue";c=a.replace(f," --> ").split(g);if(c.length<2)throw"Bad cue";return e.id=a,e.start=b(c[0]),e.end=b(c[2]),e}function e(a,b,c){while(c<b&&!a[c])c++;return c}function f(a,b,c){while(c<b&&a[c])c++;return c}a.parser("parseVTT",function(a){var b={title:"",remote:"",data:[]},g=[],h=0,i=0,j,k,l,m=/(?:\r\n|\r|\n)/gm;j=a.text.split(m),i=j.length;if(i===0||j[0]!=="WEBVTT")return b;h++;while(h<i){k=[];try{h=e(j,i,h),l=d(j[h++]);while(h<i&&j[h])k.push(j[h++]);l.text=k.join("<br />"),g.push(c("subtitle",l))}catch(n){h=f(j,i,h)}}return b.data=g,b})}(Popcorn),function(a){a.parser("parseXML","XML",function(b){var c={title:"",remote:"",data:[]},d={},e=function(a){var b=a.split(":");if(b.length===1)return parseFloat(b[0],10);if(b.length===2)return parseFloat(b[0],10)+parseFloat(b[1]/12,10);if(b.length===3)return parseInt(b[0]*60,10)+parseFloat(b[1],10)+parseFloat(b[2]/12,10);if(b.length===4)return parseInt(b[0]*3600,10)+parseInt(b[1]*60,10)+parseFloat(b[2],10)+parseFloat(b[3]/12,10)},f=function(a){var b={};for(var c=0,f=a.length;c<f;c++){var g=a.item(c).nodeName,h=a.item(c).nodeValue,i=d[h];if(g==="in")b.start=e(h);else if(g==="out")b.end=e(h);else if(g==="resourceid")for(var j in i)i.hasOwnProperty(j)&&!b[j]&&j!=="id"&&(b[j]=i[j]);else b[g]=h}return b},g=function(a,b){var c={};return c[a]=b,c},h=function(b,e,i){var j={};a.extend(j,e,f(b.attributes),{text:b.textContent||b.text});var k=b.childNodes;if(k.length<1||k.length===1&&k[0].nodeType===3)i?d[j.id]=j:c.data.push(g(b.nodeName,j));else for(var l=0;l<k.length;l++)k[l].nodeType===1&&h(k[l],j,i)},i=b.documentElement.childNodes;for(var j=0,k=i.length;j<k;j++)i[j].nodeType===1&&(i[j].nodeName==="manifest"?h(i[j],{},!0):h(i[j],{},!1));return c})}(Popcorn),function(){var a=!1,b=!1;Popcorn.player("soundcloud",{_canPlayType:function(a,b){return/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(soundcloud)/.test(b)&&a.toLowerCase()!=="video"},_setup:function(c){function n(){a=!0,SC.initialize({client_id:"PRaNFlda6Bhf5utPjUsptg"}),SC.get("/resolve",{url:d.src},function(a){d.width=d.style.width?""+d.offsetWidth:"560",d.height=d.style.height?""+d.offsetHeight:"315",e.scrolling="no",e.frameborder="no",e.id="soundcloud-"+Popcorn.guid(),e.src="http://w.soundcloud.com/player/?url="+a.uri+"&show_artwork=false"+"&buying=false"+"&liking=false"+"&sharing=false",e.width="100%",e.height="100%",c.loadListener=function(a){c.widget=j=SC.Widget(e.id),j.bind(SC.Widget.Events.FINISH,function(){d.pause(),d.dispatchEvent("ended")}),j.bind(SC.Widget.Events.PLAY_PROGRESS,function(a){g=a.currentPosition/1e3,d.dispatchEvent("timeupdate")}),j.bind(SC.Widget.Events.PLAY,function(a){h=i=!1,d.dispatchEvent("play"),d.dispatchEvent("playing"),d.currentTime=g,m.next()}),j.bind(SC.Widget.Events.PAUSE,function(a){h=i=!0,d.dispatchEvent("pause"),m.next()}),j.bind(SC.Widget.Events.READY,function(a){j.getDuration(function(a){k=a/1e3,d.style.visibility="visible",d.dispatchEvent("durationchange"),d.readyState=4,d.dispatchEvent("readystatechange"),d.dispatchEvent("loadedmetadata"),d.dispatchEvent("loadeddata"),d.dispatchEvent("canplaythrough"),d.dispatchEvent("load"),!d.paused&&d.play()}),j.getVolume(function(a){f=a/100})})},e.addEventListener("load",c.loadListener,!1),d.appendChild(e)})}function o(){b?function c(){setTimeout(function(){a?n():c()},100)}():(b=!0,Popcorn.getScript("http://w.soundcloud.com/player/api.js",function(){Popcorn.getScript("http://connect.soundcloud.com/sdk.js",function(){n()})}))}var d=this,e=document.createElement("iframe"),f=1,g=0,h=!0,i=!0,j,k=0,l=!1,m=Popcorn.player.playerQueue();c._container=e,d.style.visibility="hidden",d.play=function(){h=!1,m.add(function(){i?j&&j.play():m.next()})},d.pause=function(){h=!0,m.add(function(){i?m.next():j&&j.pause()})},Object.defineProperties(d,{muted:{set:function(a){a?(j&&j.getVolume(function(a){f=a/100}),j&&j.setVolume(0),l=!0):(j&&j.setVolume(f*100),l=!1),d.dispatchEvent("volumechange")},get:function(){return l}},volume:{set:function(a){j&&j.setVolume(a*100),f=a,d.dispatchEvent("volumechange")},get:function(){return l?0:f}},currentTime:{set:function(a){g=a,j&&j.seekTo(a*1e3),d.dispatchEvent("seeked"),d.dispatchEvent("timeupdate")},get:function(){return g}},duration:{get:function(){return k}},paused:{get:function(){return h}}}),a?n():o()},_teardown:function(a){var b=a.widget,c=SC.Widget.Events,d=a._container,e=d.parentNode;a.destroyed=!0;if(!b){d.removeEventListener("load",a.loadEventListener,!1);return}for(var f in c)b&&b.unbind(c[f])}})}(),function(){function a(b){var c=a.options,d=c.parser[c.strictMode?"strict":"loose"].exec(b),e={},f=14;while(f--)e[c.key[f]]=d[f]||"";return e[c.q.name]={},e[c.key[12]].replace(c.q.parser,function(a,b,d){b&&(e[c.q.name][b]=d)}),e}function b(a,b){return/player.vimeo.com\/video\/\d+/.test(b)||/vimeo.com\/\d+/.test(b)}a.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},Popcorn.player("vimeo",{_canPlayType:b,_setup:function(c){function p(a,b){var c=m.src.split("?")[0],d=JSON.stringify({method:a,value:b});c.substr(0,2)==="//"&&(c=window.location.protocol+c);if(!m.contentWindow){h.unload();return}m.contentWindow.postMessage(d,c)}function s(a){if(a.origin!=="http://player.vimeo.com")return;var b;try{b=JSON.parse(a.data)}catch(c){console.warn(c)}if(b.player_id!=g)return;b.method&&q[b.method]&&q[b.method](b),b.event&&r[b.event]&&r[b.event](b)}function t(a){n.error={},Popcorn.extend(n.error,f),n.error.code=a,h.dispatchEvent("error")}function u(){isNaN(n.duration)||(n.readyState=4,h.dispatchEvent("durationchange"),h.dispatchEvent("loadedmetadata"),h.dispatchEvent("loadeddata"),h.dispatchEvent("canplay"),h.dispatchEvent("canplaythrough"))}function v(){k||(k=setInterval(function(){h.dispatchEvent("timeupdate")},d)),j||(j=setInterval(function(){p("getCurrentTime")},e))}function w(){k&&(clearInterval(k),k=0),j&&(clearInterval(j),j=0)}var d=250,e=16,f={MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4},g,h=this,i={q:[],queue:function(a){this.q.push(a),this.process()},process:function(){if(!l)return;while(this.q.length){var a=this.q.shift();a()}}},j,k,l,m=document.createElement("iframe"),n={error:null,src:h.src,NETWORK_EMPTY:0,NETWORK_IDLE:1,NETWORK_LOADING:2,NETWORK_NO_SOURCE:3,networkState:0,HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4,readyState:0,seeking:!1,currentTime:0,duration:NaN,paused:!0,ended:!1,autoplay:!1,loop:!1,volume:1,muted:!1,width:0,height:0},o="error networkState readyState seeking duration paused ended";Popcorn.forEach(o.split(" "),function(a){Object.defineProperty(h,a,{get:function(){return n[a]}})}),Object.defineProperties(h,{src:{get:function(){return n.src},set:function(a){n.src=a,h.load()}},currentTime:{get:function(){return n.currentTime},set:function(a){i.queue(function(){p("seekTo",a)}),n.seeking=!0,h.dispatchEvent("seeking")}},autoplay:{get:function(){return n.autoplay},set:function(a){n.autoplay=!!a}},loop:{get:function(){return n.loop},set:function(a){n.loop=!!a,i.queue(function(){p("setLoop",loop)})}},volume:{get:function(){return n.volume},set:function(a){n.volume=a,i.queue(function(){p("setVolume",n.muted?0:n.volume)}),h.dispatchEvent("volumechange")}},muted:{get:function(){return n.muted},set:function(a){n.muted=!!a,i.queue(function(){p("setVolume",n.muted?0:n.volume)}),h.dispatchEvent("volumechange")}},width:{get:function(){return m.width},set:function(a){m.width=a}},height:{get:function(){return m.height},set:function(a){m.height=a}}});var q={getCurrentTime:function(a){n.currentTime=parseFloat(a.value)},getDuration:function(a){n.duration=parseFloat(a.value),u()},getVolume:function(a){n.volume=parseFloat(a.value)}},r={ready:function(a){p("addEventListener","loadProgress"),p("addEventListener","playProgress"),p("addEventListener","play"),p("addEventListener","pause"),p("addEventListener","finish"),p("addEventListener","seek"),p("getDuration"),l=!0,i.process(),h.dispatchEvent("loadstart")},loadProgress:function(a){h.dispatchEvent("progress"),n.duration=parseFloat(a.data.duration)},playProgress:function(a){n.currentTime=parseFloat(a.data.seconds)},play:function(a){n.seeking&&(n.seeking=!1,h.dispatchEvent("seeked")),n.paused=!1,n.ended=!1,v(),h.dispatchEvent("play")},pause:function(a){n.paused=!0,w(),h.dispatchEvent("pause")},finish:function(a){n.ended=!0,w(),h.dispatchEvent("ended")},seek:function(a){n.currentTime=parseFloat(a.data.seconds),n.seeking=!1,n.ended=!1,h.dispatchEvent("timeupdate"),h.dispatchEvent("seeked")}};h.load=function(){l=!1,g=Popcorn.guid();var d=a(n.src),e={},f=[],i={api:1,player_id:g};if(!b(h.nodeName,d.source)){t(n.MEDIA_ERR_SRC_NOT_SUPPORTED);return}Popcorn.extend(e,c),Popcorn.extend(e,d.queryKey),Popcorn.extend(e,i),d="http://player.vimeo.com/video/"+/\d+$/.exec(d.path)+"?";for(var j in e)e.hasOwnProperty(j)&&f.push(encodeURIComponent(j)+"="+encodeURIComponent(e[j]));d+=f.join("&"),n.loop=!!d.match(/loop=1/),n.autoplay=!!d.match(/autoplay=1/),m.width=h.style.width?h.style.width:500,m.height=h.style.height?h.style.height:281,m.frameBorder=0,m.webkitAllowFullScreen=!0,m.mozAllowFullScreen=!0,m.allowFullScreen=!0,m.src=d,h.appendChild(m)},h.unload=function(){w(),window.removeEventListener("message",s,!1)},h.play=function(){i.queue(function(){p("play")})},h.pause=function(){i.queue(function(){p("pause")})},setTimeout(function(){window.addEventListener("message",s,!1),h.load()},0)},_teardown:function(a){this.unload&&this.unload()}})}(),function(a,b){a.onYouTubePlayerAPIReady=function(){onYouTubePlayerAPIReady.ready=!0;for(var a=0;a<onYouTubePlayerAPIReady.waiting.length;a++)onYouTubePlayerAPIReady.waiting[a]()},a.YT&&(a.quarantineYT=a.YT,a.YT=null),onYouTubePlayerAPIReady.waiting=[];var c=!1;b.player("youtube",{_canPlayType:function(a,b){return typeof b=="string"&&/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu)/.test(b)&&a.toLowerCase()!=="video"},_setup:function(d){!a.YT&&!c&&(c=!0,b.getScript("//youtube.com/player_api"));var e=this,f=!1,g=document.createElement("div"),h=0,i=!0,j=0,k=!0,l=!1,m=0,n=!1,o=100,p=b.player.playerQueue(),q=function(){b.player.defineProperty(e,"currentTime",{set:function(a){if(d.destroyed)return;l=!0,h=Math.round(+a*100)/100},get:function(){return h}}),b.player.defineProperty(e,"paused",{get:function(){return i}}),b.player.defineProperty(e,"muted",{set:function(a){return d.destroyed?a:(d.youtubeObject.isMuted()!==a&&(a?d.youtubeObject.mute():d.youtubeObject.unMute(),n=d.youtubeObject.isMuted(),e.dispatchEvent("volumechange")),d.youtubeObject.isMuted())},get:function(){return d.destroyed?0:d.youtubeObject.isMuted()}}),b.player.defineProperty(e,"volume",{set:function(a){return d.destroyed?a:(d.youtubeObject.getVolume()/100!==a&&(d.youtubeObject.setVolume(a*100),o=d.youtubeObject.getVolume(),e.dispatchEvent("volumechange")),d.youtubeObject.getVolume()/100)},get:function(){return d.destroyed?0:d.youtubeObject.getVolume()/100}}),e.play=function(){if(d.destroyed)return;i=!1,p.add(function(){d.youtubeObject.getPlayerState()!==1?(l=!1,d.youtubeObject.playVideo()):p.next()})},e.pause=function(){if(d.destroyed)return;i=!0,p.add(function(){d.youtubeObject.getPlayerState()!==2?d.youtubeObject.pauseVideo():p.next()})}};g.id=e.id+b.guid(),d._container=g,e.appendChild(g);var r=function(){var a,b,c,j,k,r=!0,s=function(){if(d.destroyed)return;l?h===d.youtubeObject.getCurrentTime()?(l=!1,e.dispatchEvent("seeked"),e.dispatchEvent("timeupdate")):d.youtubeObject.seekTo(h):(h=d.youtubeObject.getCurrentTime(),e.dispatchEvent("timeupdate")),setTimeout(s,250)},t=function(a){var b=d.youtubeObject.getDuration();isNaN(b)||b===0?setTimeout(function(){t(a*2)},a*1e3):(e.duration=b,e.dispatchEvent("durationchange"),e.dispatchEvent("loadedmetadata"),e.dispatchEvent("loadeddata"),e.readyState=4,s(),e.dispatchEvent("canplaythrough"))};d.controls=+d.controls===0||+d.controls===1?d.controls:1,d.annotations=+d.annotations===1||+d.annotations===3?d.annotations:1,a=/^.*(?:\/|v=)(.{11})/.exec(e.src)[1],b=(e.src.split("?")[1]||"").replace(/v=.{11}/,""),b=b.replace(/&t=(?:(\d+)m)?(?:(\d+)s)?/,function(a,b,c){return b|=0,c|=0,m=+c+b*60,""}),b=b.replace(/&start=(\d+)?/,function(a,b){return b|=0,m=b,""}),f=/autoplay=1/.test(b),c=b.split(/[\&\?]/g),j={wmode:"transparent"};for(var u=0;u<c.length;u++)k=c[u].split("="),j[k[0]]=k[1];d.youtubeObject=new YT.Player(g.id,{height:"100%",width:"100%",wmode:"transparent",playerVars:j,videoId:a,events:{onReady:function(){o=e.volume,n=e.muted,v(),i=e.paused,q(),d.youtubeObject.playVideo(),e.currentTime=m},onStateChange:function(a){if(d.destroyed||a.data===-1)return;if(a.data===2)i=!0,e.dispatchEvent("pause"),p.next();else if(a.data===1&&!r)i=!1,e.dispatchEvent("play"),e.dispatchEvent("playing"),p.next();else if(a.data===0)e.dispatchEvent("ended");else if(a.data===1&&r){r=!1;if(f||!e.paused)i=!1;i&&d.youtubeObject.pauseVideo(),t(.025)}},onError:function(a){[2,100,101,150].indexOf(a.data)!==-1&&(e.error={customCode:a.data},e.dispatchEvent("error"))}}});var v=function(){if(d.destroyed)return;n!==d.youtubeObject.isMuted()&&(n=d.youtubeObject.isMuted(),e.dispatchEvent("volumechange")),o!==d.youtubeObject.getVolume()&&(o=d.youtubeObject.getVolume(),e.dispatchEvent("volumechange")),setTimeout(v,250)}};onYouTubePlayerAPIReady.ready?r():onYouTubePlayerAPIReady.waiting.push(r)},_teardown:function(a){a.destroyed=!0;var b=a.youtubeObject;b&&(b.stopVideo(),b.clearVideo&&b.clearVideo()),this.removeChild(document.getElementById(a._container.id))}})}(window,Popcorn),function(a){var b=function(b,c){var d=0,e=0,f;a.forEach(c.classes,function(a,b){f=[],a==="parent"?f[0]=document.querySelectorAll("#"+c.target)[0].parentNode:f=document.querySelectorAll("#"+c.target+" "+a);for(d=0,e=f.length;d<e;d++)f[d].classList.toggle(b)})};a.compose("applyclass",{manifest:{about:{name:"Popcorn applyclass Effect",version:"0.1",author:"@scottdowne",website:"scottdowne.wordpress.com"},options:{}},_setup:function(a){a.classes={},a.applyclass=a.applyclass||"";var b=a.applyclass.replace(/\s/g,"").split(","),c=[],d=0,e=b.length;for(;d<e;d++)c=b[d].split(":"),c[0]&&(a.classes[c[0]]=c[1]||"")},start:b,end:b})}(Popcorn),function(){if(!this.require){var a={},b={},c=function(f,g){var h=d(g,f),i=d(h,"./index"),j,k;j=b[h]||b[i];if(j)return j;if(k=a[h]||a[h=i])return j={id:h,exports:{}},b[h]=j.exports,k(j.exports,function(a){return c(a,e(h))},j),b[h]=j.exports;throw"module "+f+" not found"},d=function(a,b){var c=[],d,e;/^\.\.?(\/|$)/.test(b)?d=[a,b].join("/").split("/"):d=b.split("/");for(var f=0,g=d.length;f<g;f++)e=d[f],e==".."?c.pop():e!="."&&e!=""&&c.push(e);return c.join("/")},e=function(a){return a.split("/").slice(0,-1).join("/")};this.require=function(a){return c(a,"")},this.require.define=function(b){for(var c in b)a[c]=b[c]},this.require.modules=a,this.require.cache=b}return this.require.define}.call(this)({"spine/index":function(a,b,c){c.exports=b("./lib/spine")},"spine/lib/spine":function(a,b,c){((function(){var a,b,d,e,f,g,h,i,j,k,l,m,n=[].slice,o=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},p={}.hasOwnProperty,q=function(a,b){function d(){this.constructor=a}for(var c in b)p.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},r=function(a,b){return function(){return a.apply(b,arguments)}};d={bind:function(a,b){var c,d,e,f,g;d=a.split(" "),c=this.hasOwnProperty("_callbacks")&&this._callbacks||(this._callbacks={});for(f=0,g=d.length;f<g;f++)e=d[f],c[e]||(c[e]=[]),c[e].push(b);return this},one:function(a,b){var c;return this.bind(a,c=function(){return this.unbind(a,c),b.apply(this,arguments)})},trigger:function(){var a,b,c,d,e,f,g;a=1<=arguments.length?n.call(arguments,0):[],c=a.shift(),d=this.hasOwnProperty("_callbacks")&&((g=this._callbacks)!=null?g[c]:void 0);if(!d)return;for(e=0,f=d.length;e<f;e++){b=d[e];if(b.apply(this,a)===!1)break}return!0},listenTo:function(a,b,c){return a.bind(b,c),this.listeningTo||(this.listeningTo=[]),this.listeningTo.push(a),this},listenToOnce:function(a,b,c){var d;return d=this.listeningToOnce||(this.listeningToOnce=[]),d.push(a),a.one(b,function(){var b;return b=d.indexOf(a),b!==-1&&d.splice(b,1),c.apply(this,arguments)}),this},stopListening:function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,p;if(arguments.length===0){f=[],m=[this.listeningTo,this.listeningToOnce];for(g=0,j=m.length;g<j;g++){e=m[g];if(!e)continue;for(h=0,k=e.length;h<k;h++){a=e[h];if(o.call(f,a)>=0)continue;a.unbind(),f.push(a)}}return this.listeningTo=void 0,this.listeningToOnce=void 0}if(a){b&&a.unbind(b,c),b||a.unbind(),n=[this.listeningTo,this.listeningToOnce],p=[];for(i=0,l=n.length;i<l;i++){e=n[i];if(!e)continue;d=e.indexOf(a),d!==-1?p.push(e.splice(d,1)):p.push(void 0)}return p}},unbind:function(a,b){var c,d,e,f,g,h,i,j,k,l;if(arguments.length===0)return this._callbacks={},this;if(!a)return this;d=a.split(" ");for(h=0,j=d.length;h<j;h++){g=d[h],f=(l=this._callbacks)!=null?l[g]:void 0;if(!f)continue;if(!b){delete this._callbacks[g];continue}for(e=i=0,k=f.length;i<k;e=++i){c=f[e];if(c!==b)continue;f=f.slice(),f.splice(e,1),this._callbacks[g]=f;break}}return this}},d.on=d.bind,d.off=d.unbind,e={trace:!0,logPrefix:"(App)",log:function(){var a;a=1<=arguments.length?n.call(arguments,0):[];if(!this.trace)return;return this.logPrefix&&a.unshift(this.logPrefix),typeof console!="undefined"&&console!==null&&typeof console.log=="function"&&console.log.apply(console,a),this}},m=["included","extended"],g=function(){function a(){typeof this.init=="function"&&this.init.apply(this,arguments)}return a.include=function(a){var b,c,d;if(!a)throw new Error("include(obj) requires obj");for(b in a)c=a[b],o.call(m,b)<0&&(this.prototype[b]=c);return(d=a.included)!=null&&d.apply(this),this},a.extend=function(a){var b,c,d;if(!a)throw new Error("extend(obj) requires obj");for(b in a)c=a[b],o.call(m,b)<0&&(this[b]=c);return(d=a.extended)!=null&&d.apply(this),this},a.proxy=function(a){var b=this;return function(){return a.apply(b,arguments)}},a.prototype.proxy=function(a){var b=this;return function(){return a.apply(b,arguments)}},a}(),f=function(b){function c(a){c.__super__.constructor.apply(this,arguments),a&&this.load(a),this.cid=this.constructor.uid("c-")}return q(c,b),c.extend(d),c.records=[],c.irecords={},c.crecords={},c.attributes=[],c.configure=function(){var a,b;return b=arguments[0],a=2<=arguments.length?n.call(arguments,1):[],this.className=b,this.deleteAll(),a.length&&(this.attributes=a),this.attributes&&(this.attributes=l(this.attributes)),this.attributes||(this.attributes=[]),this.unbind(),this},c.toString=function(){return""+this.className+"("+this.attributes.join(", ")+")"},c.find=function(a){var b;b=this.exists(a);if(!b)throw new Error('"'+this.className+'" model could not find a record for the ID "'+a+'"');return b},c.exists=function(a){var b,c;return(b=(c=this.irecords[a])!=null?c:this.crecords[a])!=null?b.clone():void 0},c.refresh=function(a,b){var c,d,e,f,g;b==null&&(b={}),b.clear&&this.deleteAll(),d=this.fromJSON(a),j(d)||(d=[d]);for(f=0,g=d.length;f<g;f++)c=d[f],c.id&&this.irecords[c.id]?this.records[this.records.indexOf(this.irecords[c.id])]=c:(c.id||(c.id=c.cid),this.records.push(c)),this.irecords[c.id]=c,this.crecords[c.cid]=c;return this.sort(),e=this.cloneArray(d),this.trigger("refresh",this.cloneArray(d)),e},c.select=function(a){var b,c,d,e,f;e=this.records,f=[];for(c=0,d=e.length;c<d;c++)b=e[c],a(b)&&f.push(b.clone());return f},c.findByAttribute=function(a,b){var c,d,e,f;f=this.records;for(d=0,e=f.length;d<e;d++){c=f[d];if(c[a]===b)return c.clone()}return null},c.findAllByAttribute=function(a,b){return this.select(function(c){return c[a]===b})},c.each=function(a){var b,c,d,e,f;e=this.records,f=[];for(c=0,d=e.length;c<d;c++)b=e[c],f.push(a(b.clone()));return f},c.all=function(){return this.cloneArray(this.records)},c.first=function(){var a;return(a=this.records[0])!=null?a.clone():void 0},c.last=function(){var a;return(a=this.records[this.records.length-1])!=null?a.clone():void 0},c.count=function(){return this.records.length},c.deleteAll=function(){return this.records=[],this.irecords={},this.crecords={}},c.destroyAll=function(a){var b,c,d,e,f;e=this.records,f=[];for(c=0,d=e.length;c<d;c++)b=e[c],f.push(b.destroy(a));return f},c.update=function(a,b,c){return this.find(a).updateAttributes(b,c)},c.create=function(a,b){var c;return c=new this(a),c.save(b)},c.destroy=function(a,b){return this.find(a).destroy(b)},c.change=function(a){return typeof a=="function"?this.bind("change",a):this.trigger.apply(this,["change"].concat(n.call(arguments)))},c.fetch=function(a){return typeof a=="function"?this.bind("fetch",a):this.trigger.apply(this,["fetch"].concat(n.call(arguments)))},c.toJSON=function(){return this.records},c.fromJSON=function(a){var b,c,d,e;if(!a)return;typeof a=="string"&&(a=JSON.parse(a));if(j(a)){e=[];for(c=0,d=a.length;c<d;c++)b=a[c],e.push(new this(b));return e}return new this(a)},c.fromForm=function(){var a;return(a=new this).fromForm.apply(a,arguments)},c.sort=function(){return this.comparator&&this.records.sort(this.comparator),this.records},c.cloneArray=function(a){var b,c,d,e;e=[];for(c=0,d=a.length;c<d;c++)b=a[c],e.push(b.clone());return e},c.idCounter=0,c.uid=function(a){var b;return a==null&&(a=""),b=a+this.idCounter++,this.exists(b)&&(b=this.uid(a)),b},c.prototype.isNew=function(){return!this.exists()},c.prototype.isValid=function(){return!this.validate()},c.prototype.validate=function(){},c.prototype.load=function(a){var b,c;a.id&&(this.id=a.id);for(b in a)c=a[b],a.hasOwnProperty(b)&&typeof this[b]=="function"?this[b](c):this[b]=c;return this},c.prototype.attributes=function(){var a,b,c,d,e;b={},e=this.constructor.attributes;for(c=0,d=e.length;c<d;c++)a=e[c],a in this&&(typeof this[a]=="function"?b[a]=this[a]():b[a]=this[a]);return this.id&&(b.id=this.id),b},c.prototype.eql=function(a){return!!(a&&a.constructor===this.constructor&&a.cid===this.cid||a.id&&a.id===this.id)},c.prototype.save=function(a){var b,c;a==null&&(a={});if(a.validate!==!1){b=this.validate();if(b)return this.trigger("error",b),!1}return this.trigger("beforeSave",a),c=this.isNew()?this.create(a):this.update(a),this.stripCloneAttrs(),this.trigger("save",a),c},c.prototype.stripCloneAttrs=function(){var a,b;if(this.hasOwnProperty("cid"))return;for(a in this){if(!p.call(this,a))continue;b=this[a],this.constructor.attributes.indexOf(a)>-1&&delete this[a]}return this},c.prototype.updateAttribute=function(a,b,c){var d;return d={},d[a]=b,this.updateAttributes(d,c)},c.prototype.updateAttributes=function(a,b){return this.load(a),this.save(b)},c.prototype.changeID=function(a){var b;return b=this.constructor.irecords,b[a]=b[this.id],delete b[this.id],this.id=a,this.save()},c.prototype.destroy=function(a){var b,c,d,e,f;a==null&&(a={}),this.trigger("beforeDestroy",a),d=this.constructor.records.slice(0);for(b=e=0,f=d.length;e<f;b=++e){c=d[b];if(!this.eql(c))continue;d.splice(b,1);break}return this.constructor.records=d,delete this.constructor.irecords[this.id],delete this.constructor.crecords[this.cid],this.destroyed=!0,this.trigger("destroy",a),this.trigger("change","destroy",a),this.listeningTo&&this.stopListening(),this.unbind(),this},c.prototype.dup=function(a){var b;return b=new this.constructor(this.attributes()),a===!1?b.cid=this.cid:delete b.id,b},c.prototype.clone=function(){return i(this)},c.prototype.reload=function(){var a;return this.isNew()?this:(a=this.constructor.find(this.id),this.load(a.attributes()),a)},c.prototype.toJSON=function(){return this.attributes()},c.prototype.toString=function(){return"<"+this.constructor.className+" ("+JSON.stringify(this)+")>"},c.prototype.fromForm=function(b){var c,d,e,f,g;d={},g=a(b).serializeArray();for(e=0,f=g.length;e<f;e++)c=g[e],d[c.name]=c.value;return this.load(d)},c.prototype.exists=function(){return this.constructor.exists(this.id)},c.prototype.update=function(a){var b,c;return this.trigger("beforeUpdate",a),c=this.constructor.irecords,c[this.id].load(this.attributes()),this.constructor.sort(),b=c[this.id].clone(),b.trigger("update",a),b.trigger("change","update",a),b},c.prototype.create=function(a){var b,c;return this.trigger("beforeCreate",a),this.id||(this.id=this.cid),c=this.dup(!1),this.constructor.records.push(c),this.constructor.irecords[this.id]=c,this.constructor.crecords[this.cid]=c,this.constructor.sort(),b=c.clone(),b.trigger("create",a),b.trigger("change","create",a),b},c.prototype.bind=function(a,b){var c,d,e,f,g,h,i=this;this.constructor.bind(a,c=function(a){if(a&&i.eql(a))return b.apply(i,arguments)}),h=a.split(" "),e=function(a){var d;return i.constructor.bind("unbind",d=function(e,f,g){if(e&&i.eql(e)){if(f&&f!==a)return;if(g&&g!==b)return;return i.constructor.unbind(a,c),i.constructor.unbind("unbind",d)}})};for(f=0,g=h.length;f<g;f++)d=h[f],e(d);return this},c.prototype.one=function(a,b){var c,d=this;return this.bind(a,c=function(){return d.unbind(a,c),b.apply(d,arguments)})},c.prototype.trigger=function(){var a,b;return a=1<=arguments.length?n.call(arguments,0):[],a.splice(1,0,this),(b=this.constructor).trigger.apply(b,a)},c.prototype.listenTo=function(a,b,c){return a.bind(b,c),this.listeningTo||(this.listeningTo=[]),this.listeningTo.push(a)},c.prototype.listenToOnce=function(a,b,c){var d,e,f=this;return e=this.listeningToOnce||(this.listeningToOnce=[]),e.push(a),a.bind(b,d=function(){var f;return f=e.indexOf(a),f!==-1&&e.splice(f,1),a.unbind(b,d),c.apply(a,arguments)})},c.prototype.stopListening=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,p,q;if(arguments.length===0){f=[],m=[this.listeningTo,this.listeningToOnce];for(g=0,j=m.length;g<j;g++){e=m[g];if(!e)continue;n=this.listeningTo;for(h=0,k=n.length;h<k;h++){a=n[h];if(o.call(f,a)>=0)continue;a.unbind(),f.push(a)}}this.listeningTo=void 0,this.listeningToOnce=void 0;return}if(a){b||a.unbind(),b&&a.unbind(b,c),p=[this.listeningTo,this.listeningToOnce],q=[];for(i=0,l=p.length;i<l;i++){e=p[i];if(!e)continue;d=e.indexOf(a),d!==-1?q.push(e.splice(d,1)):q.push(void 0)}return q}},c.prototype.unbind=function(a,b){var c,d,e,f,g;if(arguments.length===0)return this.trigger("unbind");if(a){f=a.split(" "),g=[];for(d=0,e=f.length;d<e;d++)c=f[d],g.push(this.trigger("unbind",c,b));return g}},c}(g),f.prototype.on=f.prototype.bind,f.prototype.off=f.prototype.unbind,b=function(b){function c(b){this.release=r(this.release,this);var d,e,f,g,h;this.options=b,h=this.options;for(e in h)g=h[e],this[e]=g;this.el||(this.el=document.createElement(this.tag)),this.el=a(this.el),this.$el=this.el,this.className&&this.el.addClass(this.className),this.attributes&&this.el.attr(this.attributes),this.events||(this.events=this.constructor.events),this.elements||(this.elements=this.constructor.elements),d=this;while(f=d.constructor.__super__)f.events&&(this.events=a.extend({},f.events,this.events)),f.elements&&(this.elements=a.extend({},f.elements,this.elements)),d=f;this.events&&this.delegateEvents(this.events),this.elements&&this.refreshElements(),c.__super__.constructor.apply(this,arguments)}return q(c,b),c.include(d),c.include(e),c.prototype.eventSplitter=/^(\S+)\s*(.*)$/,c.prototype.tag="div",c.prototype.release=function(){return this.trigger("release",this),this.el.remove(),this.unbind(),this.stopListening()},c.prototype.$=function(b){return a(b,this.el)},c.prototype.delegateEvents=function(a){var b,c,d,e,f,g,h=this;g=[];for(c in a){e=a[c];if(typeof e=="function")e=function(a){return function(){return a.apply(h,arguments),!0}}(e);else{if(!this[e])throw new Error(""+e+" doesn't exist");e=function(a){return function(){return h[a].apply(h,arguments),!0}}(e)}d=c.match(this.eventSplitter),b=d[1],f=d[2],f===""?g.push(this.el.bind(b,e)):g.push(this.el.delegate(f,b,e))}return g},c.prototype.refreshElements=function(){var a,b,c,d;c=this.elements,d=[];for(a in c)b=c[a],d.push(this[b]=this.$(a));return d},c.prototype.delay=function(a,b){return setTimeout(this.proxy(a),b||0)},c.prototype.html=function(a){return this.el.html(a.el||a),this.refreshElements(),this.el},c.prototype.append=function(){var a,b,c;return b=1<=arguments.length?n.call(arguments,0):[],b=function(){var c,d,e;e=[];for(c=0,d=b.length;c<d;c++)a=b[c],e.push(a.el||a);return e}(),(c=this.el).append.apply(c,b),this.refreshElements(),this.el},c.prototype.appendTo=function(a){return this.el.appendTo(a.el||a),this.refreshElements(),this.el},c.prototype.prepend=function(){var a,b,c;return b=1<=arguments.length?n.call(arguments,0):[],b=function(){var c,d,e;e=[];for(c=0,d=b.length;c<d;c++)a=b[c],e.push(a.el||a);return e}(),(c=this.el).prepend.apply(c,b),this.refreshElements(),this.el},c.prototype.replace=function(b){var c,d;return d=[this.el,a(b.el||b)],c=d[0],this.el=d[1],c.replaceWith(this.el),this.delegateEvents(this.events),this.refreshElements(),this.el},c}(g),a=(typeof window!="undefined"&&window!==null?window.jQuery:void 0)||(typeof window!="undefined"&&window!==null?window.Zepto:void 0)||function(a){return a},i=Object.create||function(a){var b;return b=function(){},b.prototype=a,new b},j=function(a){return Object.prototype.toString.call(a)==="[object Array]"},k=function(a){var b;if(!a)return!0;for(b in a)return!1;return!0},l=function(a){return Array.prototype.slice.call(a,0)},h=this.Spine={},typeof c!="undefined"&&c!==null&&(c.exports=h),h.version="1.1.0",h.isArray=j,h.isBlank=k,h.$=a,h.Events=d,h.Log=e,h.Module=g,h.Controller=b,h.Model=f,g.extend.call(h,d),g.create=g.sub=b.create=b.sub=f.sub=function(a,b){var c,d;return c=function(a){function b(){return d=b.__super__.constructor.apply(this,arguments),d}return q(b,a),b}(this),a&&c.include(a),b&&c.extend(b),typeof c.unbind=="function"&&c.unbind(),c},f.setup=function(a,b){var c,d;return b==null&&(b=[]),c=function(a){function b(){return d=b.__super__.constructor.apply(this,arguments),d}return q(b,a),b}(this),c.configure.apply(c,[a].concat(n.call(b))),c},h.Class=g})).call(this)},"spine/lib/local":function(a,b,c){((function(){var a;a=this.Spine||b("spine"),a.Model.Local={extended:function(){return this.change(this.saveLocal),this.fetch(this.loadLocal)},saveLocal:function(){var a;return a=JSON.stringify(this),localStorage[this.className]=a},loadLocal:function(){var a;return a=localStorage[this.className],this.refresh(a||[],{clear:!0})}},typeof c!="undefined"&&c!==null&&(c.exports=a.Model.Local)})).call(this)},"spine/lib/ajax":function(a,b,c){((function(){var a,d,e,f,g,h,i,j,k,l,m=[].slice,n=function(a,b){return function(){return a.apply(b,arguments)}},o={}.hasOwnProperty,p=function(a,b){function d(){this.constructor=a}for(var c in b)o.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};l=this.Spine||b("spine"),a=l.$,i=l.Model,j=a({}),d={getURL:function(a){return(typeof a.url=="function"?a.url():void 0)||a.url},getScope:function(a){return(typeof a.scope=="function"?a.scope():void 0)||a.scope},generateURL:function(){var a,b,c,e,f;return c=arguments[0],a=2<=arguments.length?m.call(arguments,1):[],c.className?(b=c.className.toLowerCase()+"s",f=d.getScope(c)):(typeof c.constructor.url=="string"?b=c.constructor.url:b=c.constructor.className.toLowerCase()+"s",f=d.getScope(c)||d.getScope(c.constructor)),a.unshift(b),a.unshift(f),e=a.join("/"),e=e.replace(/(\/\/)/g,"/"),e=e.replace(/^\/|\/$/g,""),e.indexOf("../")!==0?i.host+"/"+e:e},enabled:!0,disable:function(a){var b;if(!this.enabled)return a();this.enabled=!1;try{return a()}catch(c){throw b=c,b}finally{this.enabled=!0}},queue:function(a){return a?j.queue(a):j.queue()},clearQueue:function(){return this.queue([])}},e=function(){function b(){}return b.prototype.defaults={dataType:"json",processData:!1,headers:{"X-Requested-With":"XMLHttpRequest"}},b.prototype.queue=d.queue,b.prototype.ajax=function(b,c){return a.ajax(this.ajaxSettings(b,c))},b.prototype.ajaxQueue=function(b,c){var e,f,g,h,i;return f=null,e=a.Deferred(),g=e.promise(),d.enabled?(i=this.ajaxSettings(b,c),h=function(b){return f=a.ajax(i).done(e.resolve).fail(e.reject).then(b,b)},g.abort=function(b){var c;return f?f.abort(b):(c=a.inArray(h,this.queue()),c>-1&&this.queue().splice(c,1),e.rejectWith(i.context||i,[g,b,""]),g)},this.queue(h),g):g},b.prototype.ajaxSettings=function(b,c){return a.extend({},this.defaults,c,b)},b}(),f=function(a){function b(a){this.model=a,this.failResponse=n(this.failResponse,this),this.recordsResponse=n(this.recordsResponse,this)}return p(b,a),b.prototype.find=function(a,b){var c;return c=new this.model({id:a}),this.ajaxQueue(b,{type:"GET",url:d.getURL(c)}).done(this.recordsResponse).fail(this.failResponse)},b.prototype.all=function(a){return this.ajaxQueue(a,{type:"GET",url:d.getURL(this.model)}).done(this.recordsResponse).fail(this.failResponse)},b.prototype.fetch=function(a,b){var c,d=this;return a==null&&(a={}),b==null&&(b={}),(c=a.id)?(delete a.id,this.find(c,a).done(function(a){return d.model.refresh(a,b)})):this.all(a).done(function(a){return d.model.refresh(a,b)})},b.prototype.recordsResponse=function(a,b,c){return this.model.trigger("ajaxSuccess",null,b,c)},b.prototype.failResponse=function(a,b,c){return this.model.trigger("ajaxError",null,a,b,c)},b}(e),k=function(a){function b(a){this.record=a,this.failResponse=n(this.failResponse,this),this.recordResponse=n(this.recordResponse,this),this.model=this.record.constructor}return p(b,a),b.prototype.reload=function(a,b){return this.ajaxQueue(a,{type:"GET",url:d.getURL(this.record)}).done(this.recordResponse(b)).fail(this.failResponse(b))},b.prototype.create=function(a,b){return this.ajaxQueue(a,{type:"POST",contentType:"application/json",data:JSON.stringify(this.record),url:d.getURL(this.model)}).done(this.recordResponse(b)).fail(this.failResponse(b))},b.prototype.update=function(a,b){return this.ajaxQueue(a,{type:"PUT",contentType:"application/json",data:JSON.stringify(this.record),url:d.getURL(this.record)}).done(this.recordResponse(b)).fail(this.failResponse(b))},b.prototype.destroy=function(a,b){return this.ajaxQueue(a,{type:"DELETE",url:d.getURL(this.record)}).done(this.recordResponse(b)).fail(this.failResponse(b))},b.prototype.recordResponse=function(a){var b=this;return a==null&&(a={}),function(c,e,f){var g,h;return l.isBlank(c)||b.record.destroyed?c=!1:c=b.model.fromJSON(c),d.disable(function(){if(c)return c.id&&b.record.id!==c.id&&b.record.changeID(c.id),b.record.updateAttributes(c.attributes())}),b.record.trigger("ajaxSuccess",c,e,f),(g=a.success)!=null&&g.apply(b.record),(h=a.done)!=null?h.apply(b.record):void 0}},b.prototype.failResponse=function(a){var b=this;return a==null&&(a={}),function(c,d,e){var f,g;return b.record.trigger("ajaxError",c,d,e),(f=a.error)!=null&&f.apply(b.record),(g=a.fail)!=null?g.apply(b.record):void 0}},b}(e),i.host="",h={ajax:function(){return new k(this)},url:function(){var a;return a=1<=arguments.length?m.call(arguments,0):[],a.unshift(encodeURIComponent(this.id)),d.generateURL.apply(d,[this].concat(m.call(a)))}},g={ajax:function(){return new f(this)},url:function(){var a;return a=1<=arguments.length?m.call(arguments,0):[],d.generateURL.apply(d,[this].concat(m.call(a)))}},i.Ajax={extended:function(){return this.fetch(this.ajaxFetch),this.change(this.ajaxChange),this.extend(g),this.include(h)},ajaxFetch:function(){var a;return(a=this.ajax()).fetch.apply(a,arguments)},ajaxChange:function(a,b,c){c==null&&(c={});if(c.ajax===!1)return;return a.ajax()[b](c.ajax,c)}},i.Ajax.Methods={extended:function(){return this.extend(g),this.include(h)}},d.defaults=e.prototype.defaults,l.Ajax=d,typeof c!="undefined"&&c!==null&&(c.exports=d)})).call(this)},"spine/lib/route":function(a,b,c){((function(){var a,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function d(){this.constructor=a}for(var c in b)i.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},k=[].slice;d=this.Spine||b("spine"),a=d.$,f=/^#*/,g=/:([\w\d]+)/g,h=/\*([\w\d]+)/g,e=/[-[\]{}()+?.,\\^$|#\s]/g,d.Route=function(b){function i(a,b){var c;this.path=a,this.callback=b,this.names=[];if(typeof a=="string"){g.lastIndex=0;while((c=g.exec(a))!==null)this.names.push(c[1]);h.lastIndex=0;while((c=h.exec(a))!==null)this.names.push(c[1]);a=a.replace(e,"\\$&").replace(g,"([^/]*)").replace(h,"(.*?)"),this.route=new RegExp("^"+a+"$")}else this.route=a}var c;return j(i,b),i.extend(d.Events),i.historySupport=((c=window.history)!=null?c.pushState:void 0)!=null,i.routes=[],i.options={trigger:!0,history:!1,shim:!1,replace:!1},i.add=function(a,b){var c,d,e;if(typeof a!="object"||a instanceof RegExp)return this.routes.push(new this(a,b));e=[];for(c in a)d=a[c],e.push(this.add(c,d));return e},i.setup=function(b){b==null&&(b={}),this.options=a.extend({},this.options,b),this.options.history&&(this.history=this.historySupport&&this.options.history);if(this.options.shim)return;return this.history?a(window).bind("popstate",this.change):a(window).bind("hashchange",this.change),this.change()},i.unbind=function(){if(this.options.shim)return;return this.history?a(window).unbind("popstate",this.change):a(window).unbind("hashchange",this.change)},i.navigate=function(){var b,c,d,e;b=1<=arguments.length?k.call(arguments,0):[],d={},c=b[b.length-1],typeof c=="object"?d=b.pop():typeof c=="boolean"&&(d.trigger=b.pop()),d=a.extend({},this.options,d),e=b.join("/");if(this.path===e)return;this.path=e,this.trigger("navigate",this.path),d.trigger&&this.matchRoute(this.path,d);if(d.shim)return;return this.history&&d.replace?history.replaceState({},document.title,this.path):this.history?history.pushState({},document.title,this.path):window.location.hash=this.path},i.getPath=function(){var a;return this.history?(a=window.location.pathname,a.substr(0,1)!=="/"&&(a="/"+a)):(a=window.location.hash,a=a.replace(f,"")),a},i.getHost=function(){return""+window.location.protocol+"//"+window.location.host},i.change=function(){var a;a=this.getPath();if(a===this.path)return;return this.path=a,this.matchRoute(this.path)},i.matchRoute=function(a,b){var c,d,e,f;f=this.routes;for(d=0,e=f.length;d<e;d++){c=f[d];if(!c.match(a,b))continue;return this.trigger("change",c,a),c}},i.prototype.match=function(a,b){var c,d,e,f,g,h;b==null&&(b={}),d=this.route.exec(a);if(!d)return!1;b.match=d,f=d.slice(1);if(this.names.length)for(c=g=0,h=f.length;g<h;c=++g)e=f[c],b[this.names[c]]=e;return this.callback.call(null,b)!==!1},i}(d.Module),d.Route.change=d.Route.proxy(d.Route.change),d.Controller.include({route:function(a,b){return d.Route.add(a,this.proxy(b))},routes:function(a){var b,c,d;d=[];for(b in a)c=a[b],d.push(this.route(b,c));return d},navigate:function(){return d.Route.navigate.apply(d.Route,arguments)}}),typeof c!="undefined"&&c!==null&&(c.exports=d.Route)})).call(this)},"spine/lib/manager":function(a,b,c){((function(){var a,d,e={}.hasOwnProperty,f=function(a,b){function d(){this.constructor=a}for(var c in b)e.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},g=[].slice;d=this.Spine||b("spine"),a=d.$,d.Manager=function(a){function b(){this.controllers=[],this.bind("change",this.change),this.add.apply(this,arguments)}return f(b,a),b.include(d.Events),b.prototype.add=function(){var a,b,c,d,e;b=1<=arguments.length?g.call(arguments,0):[],e=[];for(c=0,d=b.length;c<d;c++)a=b[c],e.push(this.addOne(a));return e},b.prototype.addOne=function(a){var b=this;return a.bind("active",function(){var c;return c=1<=arguments.length?g.call(arguments,0):[],b.trigger.apply(b,["change",a].concat(g.call(c)))}),a.bind("release",function(){return b.controllers.splice(b.controllers.indexOf(a),1)}),this.controllers.push(a)},b.prototype.deactivate=function(){return this.trigger.apply(this,["change",!1].concat(g.call(arguments)))},b.prototype.change=function(){var a,b,c,d,e,f,h;c=arguments[0],a=2<=arguments.length?g.call(arguments,1):[],f=this.controllers,h=[];for(d=0,e=f.length;d<e;d++)b=f[d],b===c?h.push(b.activate.apply(b,a)):h.push(b.deactivate.apply(b,a));return h},b}(d.Module),d.Controller.include({active:function(){var a;return a=1<=arguments.length?g.call(arguments,0):[],typeof a[0]=="function"?this.bind("active",a[0]):(a.unshift("active"),this.trigger.apply(this,a)),this},isActive:function(){return this.el.hasClass("active")},activate:function(){return this.el.addClass("active"),this},deactivate:function(){return this.el.removeClass("active"),this}}),d.Stack=function(a){function b(){var a,c,e,f,g,h=this;b.__super__.constructor.apply(this,arguments),this.manager=new d.Manager,f=this.controllers;for(a in f){c=f[a];if(this[a]!=null)throw Error("'@"+a+"' already assigned - choose a different name");this[a]=new c({stack:this}),this.add(this[a])}g=this.routes,e=function(a,b){var c;return typeof b=="function"&&(c=b),c||(c=function(){var a;return(a=h[b]).active.apply(a,arguments)}),h.route(a,c)};for(a in g)c=g[a],e(a,c);this["default"]&&this[this["default"]].active()}return f(b,a),b.prototype.controllers={},b.prototype.routes={},b.prototype.className="spine stack",b.prototype.add=function(a){return this.manager.add(a),this.append(a)},b}(d.Controller),typeof c!="undefined"&&c!==null&&(c.exports=d.Manager),typeof c!="undefined"&&c!==null&&(c.exports.Stack=d.Stack)})).call(this)},index:function(a,b,c){((function(){var a,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g={}.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b("lib/setup"),e=b("spine"),d=b("lib/locations"),a=function(a){function b(){this.goToLocation=f(this.goToLocation,this);var a,c=this;b.__super__.constructor.apply(this,arguments),window.bd=this,a=new MM.TemplatedLayer(this.template),this.map=new MM.Map("map",[],null,[new MM.TouchHandler,new MM.DragHandler]),this.map.addLayer(a),this.map.setCenterZoom(new MM.Location(32.58,-117.07),11),this.map.addCallback("panned",function(a){var b,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;q=c.targetArea.position(),r=q.top,h=q.left,s=c.targetArea.width(),e=c.targetArea.height(),o=new MM.Point(r,h),p=new MM.Point(r+e,h+s),f=c.map.pointLocation(o),g=c.map.pointLocation(p),m=f.lat,k=g.lat,n=f.lon,l=g.lon,v=[];for(t=0,u=d.length;t<u;t++)j=d[t],b=j.coords,i=new MM.Location(b.lat,b.lon),c.map.extent().containsLocation(i)?v.push(console.log(j.name)):v.push(void 0);return v})}return h(b,a),b.prototype.template="http://tile.stamen.com/terrain/{Z}/{X}/{Y}.png",b.prototype.events={"click li a":"goToLocation"},b.prototype.elements={".target-area":"targetArea"},b.prototype.goToLocation=function(a,b,c){var e,f,g;return e=((g=a.target)!=null?g.dataset.index:void 0)||a,b=b||.9,c=c||1.42,f=d[e],console.log("You're going to "+f.name),easey().map(this.map).to(this.map.locationCoordinate(f.coords)).zoom(11).optimal(b,c)},b}(e.Controller),c.exports=a})).call(this)},"lib/locations":function(a,b,c){((function(){c.exports=[{name:"Ali Jegk",coords:{lat:31.816022,lon:-112.554245}},{name:"Nogales",coords:{lat:31.329812,lon:-110.964274}},{name:"Sierra Vista",coords:{lat:31.335091,lon:-110.181112}},{name:"San Ysidro San Diego California",coords:{lat:32.555556,lon:-117.0470434}},{name:"San Ysidro San Diego California",coords:{lat:32.555556,lon:-117.0470434}},{name:"Otay Mesa San Diego California",coords:{lat:32.5594732,lon:-116.9734685}},{name:"Tecate California",coords:{lat:32.5811734,lon:-116.6209871}},{name:"Calexico California",coords:{lat:32.6789476,lon:-115.4988834}},{name:"Andrade California",coords:{lat:32.7258333,lon:-114.7258333}},{name:"San Luis Arizona",coords:{lat:32.4869996,lon:-114.7821796}},{name:"Lukeville Arizona",coords:{lat:31.8825681,lon:-112.8157127}},{name:"Sasabe Arizona",coords:{lat:31.4887016,lon:-111.5420505}},{name:"Nogales Arizona",coords:{lat:31.3403775,lon:-110.9342532}},{name:"Naco Arizona",coords:{lat:31.3353801,lon:-109.9481297}},{name:"Douglas Arizona",coords:{lat:31.3445471,lon:-109.5453447}},{name:"Antelope Wells New Mexico",coords:{lat:31.34889,lon:-108.50833}},{name:"Columbus New Mexico",coords:{lat:31.8276002,lon:-107.6400232}},{name:"Santa Teresa New Mexico",coords:{lat:31.8559384,lon:-106.6391577}},{name:"El Paso Texas",coords:{lat:31.7587198,lon:-106.4869314}},{name:"Fabens Texas",coords:{lat:31.50234,lon:-106.1585867}},{name:"Fort Hancock Texas",coords:{lat:31.2914585,lon:-105.860307}},{name:"Presidio Texas",coords:{lat:29.5607383,lon:-104.3721465}},{name:"Del Rio Texas",coords:{lat:29.3708857,lon:-100.8958674}},{name:"Eagle Pass Texas",coords:{lat:28.7091433,lon:-100.4995214}},{name:"Laredo Texas",coords:{lat:27.506407,lon:-99.5075421}},{name:"Falcon Heights Texas",coords:{lat:26.5589442,lon:-99.1230884}},{name:"Roma Texas",coords:{lat:26.4061111,lon:-99.0055556}},{name:"Rio Grande City Texas",coords:{lat:26.3797874,lon:-98.8203046}},{name:"Los Ebanos Texas",coords:{lat:26.2434051,lon:-98.5616885}},{name:"Mission Texas",coords:{lat:26.2159066,lon:-98.32529319999999}},{name:"Hidalgo Texas",coords:{lat:26.1003547,lon:-98.2630684}},{name:"Pharr Texas",coords:{lat:26.1947962,lon:-98.1836216}},{name:"Donna Texas",coords:{lat:26.1703525,lon:-98.05194999999999}},{name:"Progreso Texas",coords:{lat:26.0922991,lon:-97.9572242}},{name:"Los Indios Texas",coords:{lat:26.0492445,lon:-97.74499349999999}},{name:"Brownsville Texas",coords:{lat:25.9017472,lon:-97.4974838}}]})).call(this)},"lib/setup":function(a,b,c){((function(){b("spine"),b("spine/lib/local"),b("spine/lib/ajax"),b("spine/lib/manager"),b("spine/lib/route")})).call(this)},"views/location-navigation":function(a,b,c){c.exports=function(a){a||(a={});var b=[],c=function(a){var c=b,d;return b=[],a.call(this),d=b.join(""),b=c,e(d)},d=function(a){return a&&a.ecoSafe?a:typeof a!="undefined"&&a!=null?g(a):""},e,f=a.safe,g=a.escape;return e=a.safe=function(a){if(a&&a.ecoSafe)return a;if(typeof a=="undefined"||a==null)a="";var b=new String(a);return b.ecoSafe=!0,b},g||(g=a.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){((function(){var a,c,d,e;b.push("<ul>\n  ");for(a=d=0,e=this.length;d<e;a=++d)c=this[a],b.push("\n    <li data-index="),b.push(a),b.push(" ></li>\n  ");b.push("\n</ul>")})).call(this)}.call(a),a.safe=f,a.escape=g,b.join("")}}})